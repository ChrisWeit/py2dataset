
        <html>
        <head>
            <style>
                table {border-collapse: collapse; width: 100%; table-layout: fixed;}
                th, td {
                    border: 1px solid black;
                    padding: 8px;
                    text-align: left;
                    white-space: pre-line;
                    vertical-align: top;
                    word-wrap: break-word;
                }
            </style>
        </head>
        <body>
            <table>
                <thead>
                    <tr>
        <th style='width: 33.333333333333336%;'>instruction</th><th style='width: 33.333333333333336%;'>input</th><th style='width: 33.333333333333336%;'>output</th>
                    </tr>
                </thead>
                <tbody>
        <tr><td>Dependencies&nbsp;of&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>&quot;&quot;&quot;<br/>Generates&nbsp;JSON&nbsp;format&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions&nbsp;for&nbsp;a&nbsp;Python&nbsp;file<br/>Requirements:<br/>[req01]&nbsp;The&nbsp;`DatasetGenerator`&nbsp;class&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;Python&nbsp;file&nbsp;path&nbsp;(str),&nbsp;file&nbsp;details&nbsp;(Dict),&nbsp;base&nbsp;name&nbsp;(str),&nbsp;list&nbsp;of&nbsp;questions&nbsp;(List[Dict]),&nbsp;and&nbsp;model&nbsp;configuration&nbsp;(Dict)&nbsp;as&nbsp;input&nbsp;during&nbsp;instantiation.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Initialize&nbsp;and&nbsp;store&nbsp;the&nbsp;Python&nbsp;file&nbsp;path,&nbsp;file&nbsp;details,&nbsp;base&nbsp;name,&nbsp;list&nbsp;of&nbsp;questions,&nbsp;language&nbsp;model,&nbsp;and&nbsp;use_llm&nbsp;flag&nbsp;as&nbsp;class&nbsp;attributes.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Provide&nbsp;the&nbsp;`clean_and_get_unique_elements`&nbsp;method&nbsp;to&nbsp;clean&nbsp;an&nbsp;input&nbsp;string&nbsp;(str)&nbsp;and&nbsp;return&nbsp;a&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Provide&nbsp;the&nbsp;`get_response_from_llm`&nbsp;method&nbsp;to&nbsp;retrieve&nbsp;a&nbsp;response&nbsp;from&nbsp;the&nbsp;language&nbsp;model&nbsp;based&nbsp;on&nbsp;a&nbsp;query&nbsp;and&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Provide&nbsp;the&nbsp;`process_question`&nbsp;method&nbsp;to&nbsp;process&nbsp;a&nbsp;question&nbsp;based&nbsp;on&nbsp;its&nbsp;type&nbsp;and&nbsp;generate&nbsp;a&nbsp;corresponding&nbsp;response&nbsp;to&nbsp;add&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.&nbsp;Provide&nbsp;the&nbsp;`process_question_type`&nbsp;method&nbsp;to&nbsp;process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.&nbsp;Provide&nbsp;the&nbsp;`generate`&nbsp;method&nbsp;to&nbsp;generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;questions&nbsp;in&nbsp;the&nbsp;list&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h.&nbsp;Internally&nbsp;manage&nbsp;a&nbsp;question&nbsp;mapping&nbsp;to&nbsp;correlate&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/><br/>[req02]&nbsp;The&nbsp;`get_python_datasets`&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;Python&nbsp;file&nbsp;path&nbsp;(str),&nbsp;file&nbsp;details&nbsp;(Dict),&nbsp;base&nbsp;name&nbsp;(str),&nbsp;list&nbsp;of&nbsp;questions&nbsp;(List[Dict]),&nbsp;and&nbsp;model&nbsp;configuration&nbsp;(Dict)&nbsp;as&nbsp;input.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Instantiate&nbsp;an&nbsp;object&nbsp;of&nbsp;the&nbsp;`DatasetGenerator`&nbsp;class&nbsp;using&nbsp;the&nbsp;provided&nbsp;input.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions&nbsp;using&nbsp;the&nbsp;`generate`&nbsp;method&nbsp;of&nbsp;the&nbsp;`DatasetGenerator`&nbsp;instance.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Return&nbsp;the&nbsp;generated&nbsp;`instruct_list`.<br/>&quot;&quot;&quot;<br/>import&nbsp;logging<br/>import&nbsp;re<br/>import&nbsp;math<br/>from&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List,&nbsp;Tuple<br/><br/>#&nbsp;Set&nbsp;up&nbsp;logging<br/>logging.basicConfig(<br/>&nbsp;&nbsp;&nbsp;&nbsp;format=&#x27;%(asctime)s&nbsp;-&nbsp;%(levelname)s&nbsp;-&nbsp;%(message)s&#x27;,&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;level=logging.INFO<br/>)<br/>logger&nbsp;=&nbsp;logging.getLogger(__name__)<br/><br/><br/>class&nbsp;DatasetGenerator:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;JSON&nbsp;formatted&nbsp;dictionary&nbsp;outputs&nbsp;for&nbsp;a&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Attributes:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict[str,&nbsp;Any]):&nbsp;Details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Questions&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Storage&nbsp;for&nbsp;generated&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_mapping&nbsp;(Dict[str,&nbsp;str]):&nbsp;Mapping&nbsp;of&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;Flag&nbsp;indicating&nbsp;if&nbsp;a&nbsp;language&nbsp;model&nbsp;should&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;format&nbsp;for&nbsp;querying&nbsp;the&nbsp;language&nbsp;model.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Methods:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;and&nbsp;return&nbsp;unique&nbsp;elements&nbsp;from&nbsp;an&nbsp;input&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_to_list(list_to_update:&nbsp;List[Dict],&nbsp;query:&nbsp;str,&nbsp;response:&nbsp;str,&nbsp;additional_field=None)&nbsp;-&gt;&nbsp;List[Dict]:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct&nbsp;list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_response_from_llm(query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question_type(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;related&nbsp;to&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generate()&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_path&nbsp;=&nbsp;file_path<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_details&nbsp;=&nbsp;file_details<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.base_name&nbsp;=&nbsp;base_name<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.questions&nbsp;=&nbsp;questions<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.model_config&nbsp;=&nbsp;model_config<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.llm&nbsp;=&nbsp;model_config[&#x27;model&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.llm&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list&nbsp;=&nbsp;[]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.question_mapping&nbsp;=&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;file&#x27;:&nbsp;&#x27;file&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;function&#x27;:&nbsp;&#x27;functions&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;class&#x27;:&nbsp;&#x27;classes&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;method&#x27;:&nbsp;&#x27;classes&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;input&nbsp;string&nbsp;and&nbsp;return&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;(str):&nbsp;The&nbsp;input&nbsp;string&nbsp;to&nbsp;be&nbsp;cleaned.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;cleaned&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleaned_elements&nbsp;=&nbsp;set(re.sub(r&#x27;[^\w\-_&gt;\s:/.]&#x27;,&nbsp;&#x27;&#x27;,&nbsp;element.strip())<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;element&nbsp;in&nbsp;re.sub(r&#x27;\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split(&#x27;,&#x27;))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(cleaned_elements)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_response_from_llm(self,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;generated&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&quot;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;full_context,&nbsp;prompt,&nbsp;context_size<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_context_length&nbsp;=&nbsp;self.model_config[&#x27;inference_model&#x27;][&#x27;model_params&#x27;][&#x27;context_length&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excluded_instructions&nbsp;=&nbsp;[&quot;Call&nbsp;code&nbsp;graph&quot;,&nbsp;&quot;Docstring&quot;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_qa&nbsp;=&nbsp;&quot;\n&quot;.join([f&quot;Q:&nbsp;{item[&#x27;instruction&#x27;]}&nbsp;\nA:&nbsp;{item[&#x27;output&#x27;]}&quot;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list&nbsp;if&nbsp;not&nbsp;any(item[&#x27;instruction&#x27;].startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions)])<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;manage&nbsp;context&nbsp;length&nbsp;for&nbsp;LLM&nbsp;using&nbsp;different&nbsp;strategies&nbsp;starting&nbsp;with&nbsp;the&nbsp;longest&nbsp;and&nbsp;most&nbsp;comprehensive<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_strategies&nbsp;=&nbsp;[<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(context)&nbsp;+&nbsp;&#x27;\n```&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(self.file_details[&#x27;file_info&#x27;][&#x27;file_code_simplified&#x27;])&nbsp;+&nbsp;&#x27;\n```&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;self.get_string_from_info(self.file_details[&#x27;file_info&#x27;],&nbsp;&#x27;file_summary&#x27;),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;strategy&nbsp;in&nbsp;context_strategies:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;strategy()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context,&nbsp;prompt,&nbsp;context_size&nbsp;=&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context_size&nbsp;&lt;=&nbsp;0.70&nbsp;*&nbsp;max_context_length:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(f&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response,&nbsp;adjust&nbsp;context_length&nbsp;&gt;&nbsp;{math.ceil(context_size/0.70)}&nbsp;in&nbsp;py2dataset_model_config.yaml&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;re.sub(r&#x27;\n\s*\n&#x27;,&nbsp;&#x27;\n\n&#x27;,&nbsp;self.llm(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Response:&nbsp;{response}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;response<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;the&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;(Dict):&nbsp;The&nbsp;information&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id.endswith(&#x27;code_graph&#x27;)&nbsp;or&nbsp;question_id.endswith(&#x27;docstring&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;info.get(question_id,&nbsp;{})<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.get_response_from_llm(query,&nbsp;context)&nbsp;if&nbsp;self.use_llm&nbsp;and&nbsp;question_id.endswith(&#x27;purpose&#x27;)&nbsp;else&nbsp;self.clean_and_get_unique_elements(str(info.get(question_id,&nbsp;&#x27;&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response&nbsp;and&nbsp;response&nbsp;!=&nbsp;&#x27;None&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_str&nbsp;=&nbsp;str(response).strip()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response_str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list.append({&#x27;instruction&#x27;:&nbsp;query,&nbsp;&#x27;input&#x27;:&nbsp;context,&nbsp;&#x27;output&#x27;:&nbsp;response_str})<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_string_from_info(info,&nbsp;item_type):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;info[item_type]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;items&nbsp;=&nbsp;[item.strip()&nbsp;for&nbsp;item&nbsp;in&nbsp;str(info[item_type]).split(&#x27;,&#x27;)&nbsp;if&nbsp;item]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(items)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question_type(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_text&nbsp;(str):&nbsp;The&nbsp;text&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;question_type&nbsp;==&nbsp;&#x27;method&#x27;:&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;class_name,&nbsp;class_info&nbsp;in&nbsp;self.file_details[&#x27;classes&#x27;].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key,&nbsp;method_info&nbsp;in&nbsp;class_info.items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key.startswith(&#x27;class_method_&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method_name&nbsp;=&nbsp;key[len(&#x27;class_method_&#x27;):]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;method_info[&#x27;method_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{&#x27;class_name&#x27;:&nbsp;class_name,&nbsp;&#x27;method_name&#x27;:&nbsp;method_name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;method_info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:&nbsp;&nbsp;#&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;function&#x27;&nbsp;or&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;name,&nbsp;info&nbsp;in&nbsp;self.file_details[self.question_mapping[question_type]].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;info[f&#x27;{question_type}_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{f&#x27;{question_type}_name&#x27;:&nbsp;name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id&nbsp;==&nbsp;f&#x27;{question_type}_purpose&#x27;&nbsp;and&nbsp;self.use_llm:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variables_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_variables&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputs_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_inputs&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combined_string&nbsp;=&nbsp;&#x27;,&nbsp;&#x27;.join([s&nbsp;for&nbsp;s&nbsp;in&nbsp;[variables_string,&nbsp;inputs_string]&nbsp;if&nbsp;s])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_variables&#x27;]&nbsp;=&nbsp;self.clean_and_get_unique_elements(combined_string)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;get&nbsp;methods&nbsp;to&nbsp;include&nbsp;in&nbsp;mapping&nbsp;for&nbsp;query<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_methods&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_methods&#x27;]&nbsp;=&nbsp;methods_string<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;generate(self)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;The&nbsp;generated&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;question&nbsp;in&nbsp;self.questions:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question_type(question[&#x27;type&#x27;],&nbsp;question[&#x27;id&#x27;],&nbsp;question[&#x27;text&#x27;])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.instruct_list<br/><br/><br/>def&nbsp;get_python_datasets(file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;information&nbsp;from&nbsp;a&nbsp;Python&nbsp;file&nbsp;and&nbsp;return&nbsp;it&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict):&nbsp;The&nbsp;details&nbsp;of&nbsp;the&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;Python&nbsp;code&nbsp;filename.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict]):&nbsp;The&nbsp;list&nbsp;of&nbsp;questions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;Extracted&nbsp;information&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;generator&nbsp;=&nbsp;DatasetGenerator(file_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;generator.generate()<br/></td><td>math,&nbsp;logging,&nbsp;typing,&nbsp;re</td></tr><tr><td>Call&nbsp;code&nbsp;graph&nbsp;of&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>&quot;&quot;&quot;<br/>Generates&nbsp;JSON&nbsp;format&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions&nbsp;for&nbsp;a&nbsp;Python&nbsp;file<br/>Requirements:<br/>[req01]&nbsp;The&nbsp;`DatasetGenerator`&nbsp;class&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;Python&nbsp;file&nbsp;path&nbsp;(str),&nbsp;file&nbsp;details&nbsp;(Dict),&nbsp;base&nbsp;name&nbsp;(str),&nbsp;list&nbsp;of&nbsp;questions&nbsp;(List[Dict]),&nbsp;and&nbsp;model&nbsp;configuration&nbsp;(Dict)&nbsp;as&nbsp;input&nbsp;during&nbsp;instantiation.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Initialize&nbsp;and&nbsp;store&nbsp;the&nbsp;Python&nbsp;file&nbsp;path,&nbsp;file&nbsp;details,&nbsp;base&nbsp;name,&nbsp;list&nbsp;of&nbsp;questions,&nbsp;language&nbsp;model,&nbsp;and&nbsp;use_llm&nbsp;flag&nbsp;as&nbsp;class&nbsp;attributes.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Provide&nbsp;the&nbsp;`clean_and_get_unique_elements`&nbsp;method&nbsp;to&nbsp;clean&nbsp;an&nbsp;input&nbsp;string&nbsp;(str)&nbsp;and&nbsp;return&nbsp;a&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Provide&nbsp;the&nbsp;`get_response_from_llm`&nbsp;method&nbsp;to&nbsp;retrieve&nbsp;a&nbsp;response&nbsp;from&nbsp;the&nbsp;language&nbsp;model&nbsp;based&nbsp;on&nbsp;a&nbsp;query&nbsp;and&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Provide&nbsp;the&nbsp;`process_question`&nbsp;method&nbsp;to&nbsp;process&nbsp;a&nbsp;question&nbsp;based&nbsp;on&nbsp;its&nbsp;type&nbsp;and&nbsp;generate&nbsp;a&nbsp;corresponding&nbsp;response&nbsp;to&nbsp;add&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.&nbsp;Provide&nbsp;the&nbsp;`process_question_type`&nbsp;method&nbsp;to&nbsp;process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.&nbsp;Provide&nbsp;the&nbsp;`generate`&nbsp;method&nbsp;to&nbsp;generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;questions&nbsp;in&nbsp;the&nbsp;list&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h.&nbsp;Internally&nbsp;manage&nbsp;a&nbsp;question&nbsp;mapping&nbsp;to&nbsp;correlate&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/><br/>[req02]&nbsp;The&nbsp;`get_python_datasets`&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;Python&nbsp;file&nbsp;path&nbsp;(str),&nbsp;file&nbsp;details&nbsp;(Dict),&nbsp;base&nbsp;name&nbsp;(str),&nbsp;list&nbsp;of&nbsp;questions&nbsp;(List[Dict]),&nbsp;and&nbsp;model&nbsp;configuration&nbsp;(Dict)&nbsp;as&nbsp;input.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Instantiate&nbsp;an&nbsp;object&nbsp;of&nbsp;the&nbsp;`DatasetGenerator`&nbsp;class&nbsp;using&nbsp;the&nbsp;provided&nbsp;input.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions&nbsp;using&nbsp;the&nbsp;`generate`&nbsp;method&nbsp;of&nbsp;the&nbsp;`DatasetGenerator`&nbsp;instance.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Return&nbsp;the&nbsp;generated&nbsp;`instruct_list`.<br/>&quot;&quot;&quot;<br/>import&nbsp;logging<br/>import&nbsp;re<br/>import&nbsp;math<br/>from&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List,&nbsp;Tuple<br/><br/>#&nbsp;Set&nbsp;up&nbsp;logging<br/>logging.basicConfig(<br/>&nbsp;&nbsp;&nbsp;&nbsp;format=&#x27;%(asctime)s&nbsp;-&nbsp;%(levelname)s&nbsp;-&nbsp;%(message)s&#x27;,&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;level=logging.INFO<br/>)<br/>logger&nbsp;=&nbsp;logging.getLogger(__name__)<br/><br/><br/>class&nbsp;DatasetGenerator:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;JSON&nbsp;formatted&nbsp;dictionary&nbsp;outputs&nbsp;for&nbsp;a&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Attributes:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict[str,&nbsp;Any]):&nbsp;Details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Questions&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Storage&nbsp;for&nbsp;generated&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_mapping&nbsp;(Dict[str,&nbsp;str]):&nbsp;Mapping&nbsp;of&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;Flag&nbsp;indicating&nbsp;if&nbsp;a&nbsp;language&nbsp;model&nbsp;should&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;format&nbsp;for&nbsp;querying&nbsp;the&nbsp;language&nbsp;model.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Methods:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;and&nbsp;return&nbsp;unique&nbsp;elements&nbsp;from&nbsp;an&nbsp;input&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_to_list(list_to_update:&nbsp;List[Dict],&nbsp;query:&nbsp;str,&nbsp;response:&nbsp;str,&nbsp;additional_field=None)&nbsp;-&gt;&nbsp;List[Dict]:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct&nbsp;list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_response_from_llm(query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question_type(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;related&nbsp;to&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generate()&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_path&nbsp;=&nbsp;file_path<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_details&nbsp;=&nbsp;file_details<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.base_name&nbsp;=&nbsp;base_name<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.questions&nbsp;=&nbsp;questions<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.model_config&nbsp;=&nbsp;model_config<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.llm&nbsp;=&nbsp;model_config[&#x27;model&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.llm&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list&nbsp;=&nbsp;[]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.question_mapping&nbsp;=&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;file&#x27;:&nbsp;&#x27;file&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;function&#x27;:&nbsp;&#x27;functions&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;class&#x27;:&nbsp;&#x27;classes&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;method&#x27;:&nbsp;&#x27;classes&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;input&nbsp;string&nbsp;and&nbsp;return&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;(str):&nbsp;The&nbsp;input&nbsp;string&nbsp;to&nbsp;be&nbsp;cleaned.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;cleaned&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleaned_elements&nbsp;=&nbsp;set(re.sub(r&#x27;[^\w\-_&gt;\s:/.]&#x27;,&nbsp;&#x27;&#x27;,&nbsp;element.strip())<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;element&nbsp;in&nbsp;re.sub(r&#x27;\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split(&#x27;,&#x27;))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(cleaned_elements)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_response_from_llm(self,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;generated&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&quot;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;full_context,&nbsp;prompt,&nbsp;context_size<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_context_length&nbsp;=&nbsp;self.model_config[&#x27;inference_model&#x27;][&#x27;model_params&#x27;][&#x27;context_length&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excluded_instructions&nbsp;=&nbsp;[&quot;Call&nbsp;code&nbsp;graph&quot;,&nbsp;&quot;Docstring&quot;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_qa&nbsp;=&nbsp;&quot;\n&quot;.join([f&quot;Q:&nbsp;{item[&#x27;instruction&#x27;]}&nbsp;\nA:&nbsp;{item[&#x27;output&#x27;]}&quot;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list&nbsp;if&nbsp;not&nbsp;any(item[&#x27;instruction&#x27;].startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions)])<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;manage&nbsp;context&nbsp;length&nbsp;for&nbsp;LLM&nbsp;using&nbsp;different&nbsp;strategies&nbsp;starting&nbsp;with&nbsp;the&nbsp;longest&nbsp;and&nbsp;most&nbsp;comprehensive<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_strategies&nbsp;=&nbsp;[<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(context)&nbsp;+&nbsp;&#x27;\n```&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(self.file_details[&#x27;file_info&#x27;][&#x27;file_code_simplified&#x27;])&nbsp;+&nbsp;&#x27;\n```&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;self.get_string_from_info(self.file_details[&#x27;file_info&#x27;],&nbsp;&#x27;file_summary&#x27;),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;strategy&nbsp;in&nbsp;context_strategies:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;strategy()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context,&nbsp;prompt,&nbsp;context_size&nbsp;=&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context_size&nbsp;&lt;=&nbsp;0.70&nbsp;*&nbsp;max_context_length:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(f&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response,&nbsp;adjust&nbsp;context_length&nbsp;&gt;&nbsp;{math.ceil(context_size/0.70)}&nbsp;in&nbsp;py2dataset_model_config.yaml&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;re.sub(r&#x27;\n\s*\n&#x27;,&nbsp;&#x27;\n\n&#x27;,&nbsp;self.llm(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Response:&nbsp;{response}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;response<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;the&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;(Dict):&nbsp;The&nbsp;information&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id.endswith(&#x27;code_graph&#x27;)&nbsp;or&nbsp;question_id.endswith(&#x27;docstring&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;info.get(question_id,&nbsp;{})<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.get_response_from_llm(query,&nbsp;context)&nbsp;if&nbsp;self.use_llm&nbsp;and&nbsp;question_id.endswith(&#x27;purpose&#x27;)&nbsp;else&nbsp;self.clean_and_get_unique_elements(str(info.get(question_id,&nbsp;&#x27;&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response&nbsp;and&nbsp;response&nbsp;!=&nbsp;&#x27;None&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_str&nbsp;=&nbsp;str(response).strip()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response_str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list.append({&#x27;instruction&#x27;:&nbsp;query,&nbsp;&#x27;input&#x27;:&nbsp;context,&nbsp;&#x27;output&#x27;:&nbsp;response_str})<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_string_from_info(info,&nbsp;item_type):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;info[item_type]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;items&nbsp;=&nbsp;[item.strip()&nbsp;for&nbsp;item&nbsp;in&nbsp;str(info[item_type]).split(&#x27;,&#x27;)&nbsp;if&nbsp;item]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(items)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question_type(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_text&nbsp;(str):&nbsp;The&nbsp;text&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;question_type&nbsp;==&nbsp;&#x27;method&#x27;:&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;class_name,&nbsp;class_info&nbsp;in&nbsp;self.file_details[&#x27;classes&#x27;].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key,&nbsp;method_info&nbsp;in&nbsp;class_info.items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key.startswith(&#x27;class_method_&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method_name&nbsp;=&nbsp;key[len(&#x27;class_method_&#x27;):]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;method_info[&#x27;method_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{&#x27;class_name&#x27;:&nbsp;class_name,&nbsp;&#x27;method_name&#x27;:&nbsp;method_name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;method_info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:&nbsp;&nbsp;#&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;function&#x27;&nbsp;or&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;name,&nbsp;info&nbsp;in&nbsp;self.file_details[self.question_mapping[question_type]].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;info[f&#x27;{question_type}_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{f&#x27;{question_type}_name&#x27;:&nbsp;name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id&nbsp;==&nbsp;f&#x27;{question_type}_purpose&#x27;&nbsp;and&nbsp;self.use_llm:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variables_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_variables&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputs_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_inputs&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combined_string&nbsp;=&nbsp;&#x27;,&nbsp;&#x27;.join([s&nbsp;for&nbsp;s&nbsp;in&nbsp;[variables_string,&nbsp;inputs_string]&nbsp;if&nbsp;s])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_variables&#x27;]&nbsp;=&nbsp;self.clean_and_get_unique_elements(combined_string)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;get&nbsp;methods&nbsp;to&nbsp;include&nbsp;in&nbsp;mapping&nbsp;for&nbsp;query<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_methods&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_methods&#x27;]&nbsp;=&nbsp;methods_string<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;generate(self)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;The&nbsp;generated&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;question&nbsp;in&nbsp;self.questions:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question_type(question[&#x27;type&#x27;],&nbsp;question[&#x27;id&#x27;],&nbsp;question[&#x27;text&#x27;])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.instruct_list<br/><br/><br/>def&nbsp;get_python_datasets(file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;information&nbsp;from&nbsp;a&nbsp;Python&nbsp;file&nbsp;and&nbsp;return&nbsp;it&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict):&nbsp;The&nbsp;details&nbsp;of&nbsp;the&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;Python&nbsp;code&nbsp;filename.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict]):&nbsp;The&nbsp;list&nbsp;of&nbsp;questions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;Extracted&nbsp;information&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;generator&nbsp;=&nbsp;DatasetGenerator(file_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;generator.generate()<br/></td><td>{&#x27;nodes&#x27;:&nbsp;[&#x27;DatasetGenerator&#x27;,&nbsp;&#x27;DatasetGenerator.__init__&#x27;,&nbsp;&#x27;DatasetGenerator.clean_and_get_unique_elements&#x27;,&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;DatasetGenerator.get_context_and_prompt&#x27;,&nbsp;&#x27;DatasetGenerator.process_question&#x27;,&nbsp;&#x27;DatasetGenerator.get_string_from_info&#x27;,&nbsp;&#x27;DatasetGenerator.process_question_type&#x27;,&nbsp;&#x27;DatasetGenerator.generate&#x27;,&nbsp;&#x27;get_python_datasets&#x27;,&nbsp;&#x27;generator.generate&#x27;,&nbsp;&#x27;set&#x27;,&nbsp;&#x27;re.sub&#x27;,&nbsp;&#x27;element.strip&#x27;,&nbsp;&quot;re.sub(&#x27;\\\\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split&quot;,&nbsp;&quot;&#x27;,&nbsp;&#x27;.join&quot;,&nbsp;&quot;self.model_config[&#x27;prompt_template&#x27;].format&quot;,&nbsp;&#x27;len&#x27;,&nbsp;&#x27;self.llm.tokenize&#x27;,&nbsp;&quot;&#x27;\\n&#x27;.join&quot;,&nbsp;&#x27;any&#x27;,&nbsp;&quot;item[&#x27;instruction&#x27;].startswith&quot;,&nbsp;&#x27;str&#x27;,&nbsp;&#x27;strategy&#x27;,&nbsp;&#x27;get_context_and_prompt&#x27;,&nbsp;&#x27;logger.error&#x27;,&nbsp;&#x27;math.ceil&#x27;,&nbsp;&#x27;self.llm&#x27;,&nbsp;&#x27;logging.info&#x27;,&nbsp;&#x27;question_id.endswith&#x27;,&nbsp;&#x27;info.get&#x27;,&nbsp;&#x27;str(response).strip&#x27;,&nbsp;&#x27;self.instruct_list.append&#x27;,&nbsp;&#x27;item.strip&#x27;,&nbsp;&#x27;str(info[item_type]).split&#x27;,&nbsp;&#x27;question_text.format&#x27;,&nbsp;&quot;self.file_details[&#x27;classes&#x27;].items&quot;,&nbsp;&#x27;class_info.items&#x27;,&nbsp;&#x27;key.startswith&#x27;,&nbsp;&#x27;self.file_details[self.question_mapping[question_type]].items&#x27;],&nbsp;&#x27;edges&#x27;:&nbsp;[{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator.__init__&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;self&#x27;,&nbsp;&#x27;file_path&#x27;,&nbsp;&#x27;file_details&#x27;,&nbsp;&#x27;base_name&#x27;,&nbsp;&#x27;questions&#x27;,&nbsp;&#x27;model_config&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator.clean_and_get_unique_elements&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;input_str&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[&quot;&#x27;,&nbsp;&#x27;.join(cleaned_elements)&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;self&#x27;,&nbsp;&#x27;query&#x27;,&nbsp;&#x27;context&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[&#x27;response&#x27;,&nbsp;&quot;&#x27;&#x27;&quot;,&nbsp;&#x27;(full_context,&nbsp;prompt,&nbsp;context_size)&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator.get_context_and_prompt&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;query&#x27;,&nbsp;&#x27;context&#x27;,&nbsp;&#x27;code_qa&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[&#x27;(full_context,&nbsp;prompt,&nbsp;context_size)&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator.process_question&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;self&#x27;,&nbsp;&#x27;question_type&#x27;,&nbsp;&#x27;question_id&#x27;,&nbsp;&#x27;query&#x27;,&nbsp;&#x27;context&#x27;,&nbsp;&#x27;info&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator.get_string_from_info&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;info&#x27;,&nbsp;&#x27;item_type&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[&quot;&#x27;&#x27;&quot;,&nbsp;&quot;&#x27;,&nbsp;&#x27;.join(items)&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator.process_question_type&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;self&#x27;,&nbsp;&#x27;question_type&#x27;,&nbsp;&#x27;question_id&#x27;,&nbsp;&#x27;question_text&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator.generate&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;self&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[&#x27;self.instruct_list&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.clean_and_get_unique_elements&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;set&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;(re.sub(&#x27;[^\\\\w\\\\-_&gt;\\\\s:/.]&#x27;,&nbsp;&#x27;&#x27;,&nbsp;element.strip())&nbsp;for&nbsp;element&nbsp;in&nbsp;re.sub(&#x27;\\\\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split(&#x27;,&#x27;))&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.clean_and_get_unique_elements&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;re.sub&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;\\\\s+&#x27;&quot;,&nbsp;&quot;&#x27;&nbsp;&#x27;&quot;,&nbsp;&#x27;input_str&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.clean_and_get_unique_elements&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;element.strip&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.clean_and_get_unique_elements&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&quot;re.sub(&#x27;\\\\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split&quot;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;,&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.clean_and_get_unique_elements&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&quot;&#x27;,&nbsp;&#x27;.join&quot;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;cleaned_elements&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&quot;self.model_config[&#x27;prompt_template&#x27;].format&quot;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;len&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;self.llm.tokenize(prompt)&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;self.llm.tokenize&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;prompt&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&quot;&#x27;\\n&#x27;.join&quot;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;[f&quot;Q:&nbsp;{item[\&#x27;instruction\&#x27;]}&nbsp;\\nA:&nbsp;{item[\&#x27;output\&#x27;]}&quot;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list&nbsp;if&nbsp;not&nbsp;any((item[\&#x27;instruction\&#x27;].startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions))]&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;any&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;(item[&#x27;instruction&#x27;].startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions)&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&quot;item[&#x27;instruction&#x27;].startswith&quot;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;prefix&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;str&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;self.file_details[&#x27;file_info&#x27;][&#x27;file_code_simplified&#x27;]&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator.get_string_from_info&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;info&#x27;,&nbsp;&#x27;item_type&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[&quot;&#x27;&#x27;&quot;,&nbsp;&quot;&#x27;,&nbsp;&#x27;.join(items)&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;strategy&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;get_context_and_prompt&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;query&#x27;,&nbsp;&#x27;context&#x27;,&nbsp;&#x27;code_qa&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;logger.error&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;math.ceil&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;context_size&nbsp;/&nbsp;0.7&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;re.sub&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;\\\\n\\\\s*\\\\n&#x27;&quot;,&nbsp;&quot;&#x27;\\n\\n&#x27;&quot;,&nbsp;&#x27;self.llm(prompt)&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;self.llm&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;prompt&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;logging.info&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;f&#x27;Response:&nbsp;{response}&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_context_and_prompt&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&quot;self.model_config[&#x27;prompt_template&#x27;].format&quot;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_context_and_prompt&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;len&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;self.llm.tokenize(prompt)&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_context_and_prompt&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;self.llm.tokenize&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;prompt&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;question_id.endswith&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;purpose&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;info.get&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;question_id&#x27;,&nbsp;&quot;&#x27;&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator.get_response_from_llm&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;self&#x27;,&nbsp;&#x27;query&#x27;,&nbsp;&#x27;context&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[&#x27;response&#x27;,&nbsp;&quot;&#x27;&#x27;&quot;,&nbsp;&#x27;(full_context,&nbsp;prompt,&nbsp;context_size)&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator.clean_and_get_unique_elements&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;input_str&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[&quot;&#x27;,&nbsp;&#x27;.join(cleaned_elements)&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;str&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;response&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;str(response).strip&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;self.instruct_list.append&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;{&#x27;instruction&#x27;:&nbsp;query,&nbsp;&#x27;input&#x27;:&nbsp;context,&nbsp;&#x27;output&#x27;:&nbsp;response_str}&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_string_from_info&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;item.strip&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_string_from_info&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;str(info[item_type]).split&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;,&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_string_from_info&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;str&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;info[item_type]&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.get_string_from_info&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&quot;&#x27;,&nbsp;&#x27;.join&quot;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;items&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question_type&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;question_text.format&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question_type&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator.process_question&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;self&#x27;,&nbsp;&#x27;question_type&#x27;,&nbsp;&#x27;question_id&#x27;,&nbsp;&#x27;query&#x27;,&nbsp;&#x27;context&#x27;,&nbsp;&#x27;info&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question_type&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&quot;self.file_details[&#x27;classes&#x27;].items&quot;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question_type&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;class_info.items&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question_type&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;key.startswith&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;class_method_&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question_type&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;len&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;class_method_&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question_type&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;self.file_details[self.question_mapping[question_type]].items&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question_type&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator.get_string_from_info&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;info&#x27;,&nbsp;&#x27;item_type&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[&quot;&#x27;&#x27;&quot;,&nbsp;&quot;&#x27;,&nbsp;&#x27;.join(items)&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question_type&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&quot;&#x27;,&nbsp;&#x27;.join&quot;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;[s&nbsp;for&nbsp;s&nbsp;in&nbsp;[variables_string,&nbsp;inputs_string]&nbsp;if&nbsp;s]&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.process_question_type&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator.clean_and_get_unique_elements&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;input_str&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[&quot;&#x27;,&nbsp;&#x27;.join(cleaned_elements)&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;DatasetGenerator.generate&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator.process_question_type&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;self&#x27;,&nbsp;&#x27;question_type&#x27;,&nbsp;&#x27;question_id&#x27;,&nbsp;&#x27;question_text&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;get_python_datasets&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;DatasetGenerator&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;file_path&#x27;,&nbsp;&#x27;file_details&#x27;,&nbsp;&#x27;base_name&#x27;,&nbsp;&#x27;questions&#x27;,&nbsp;&#x27;model_config&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;get_python_datasets&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;generator.generate&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]}]}</td></tr><tr><td>Functions&nbsp;defined&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>&quot;&quot;&quot;<br/>Generates&nbsp;JSON&nbsp;format&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions&nbsp;for&nbsp;a&nbsp;Python&nbsp;file<br/>Requirements:<br/>[req01]&nbsp;The&nbsp;`DatasetGenerator`&nbsp;class&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;Python&nbsp;file&nbsp;path&nbsp;(str),&nbsp;file&nbsp;details&nbsp;(Dict),&nbsp;base&nbsp;name&nbsp;(str),&nbsp;list&nbsp;of&nbsp;questions&nbsp;(List[Dict]),&nbsp;and&nbsp;model&nbsp;configuration&nbsp;(Dict)&nbsp;as&nbsp;input&nbsp;during&nbsp;instantiation.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Initialize&nbsp;and&nbsp;store&nbsp;the&nbsp;Python&nbsp;file&nbsp;path,&nbsp;file&nbsp;details,&nbsp;base&nbsp;name,&nbsp;list&nbsp;of&nbsp;questions,&nbsp;language&nbsp;model,&nbsp;and&nbsp;use_llm&nbsp;flag&nbsp;as&nbsp;class&nbsp;attributes.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Provide&nbsp;the&nbsp;`clean_and_get_unique_elements`&nbsp;method&nbsp;to&nbsp;clean&nbsp;an&nbsp;input&nbsp;string&nbsp;(str)&nbsp;and&nbsp;return&nbsp;a&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Provide&nbsp;the&nbsp;`get_response_from_llm`&nbsp;method&nbsp;to&nbsp;retrieve&nbsp;a&nbsp;response&nbsp;from&nbsp;the&nbsp;language&nbsp;model&nbsp;based&nbsp;on&nbsp;a&nbsp;query&nbsp;and&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Provide&nbsp;the&nbsp;`process_question`&nbsp;method&nbsp;to&nbsp;process&nbsp;a&nbsp;question&nbsp;based&nbsp;on&nbsp;its&nbsp;type&nbsp;and&nbsp;generate&nbsp;a&nbsp;corresponding&nbsp;response&nbsp;to&nbsp;add&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.&nbsp;Provide&nbsp;the&nbsp;`process_question_type`&nbsp;method&nbsp;to&nbsp;process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.&nbsp;Provide&nbsp;the&nbsp;`generate`&nbsp;method&nbsp;to&nbsp;generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;questions&nbsp;in&nbsp;the&nbsp;list&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h.&nbsp;Internally&nbsp;manage&nbsp;a&nbsp;question&nbsp;mapping&nbsp;to&nbsp;correlate&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/><br/>[req02]&nbsp;The&nbsp;`get_python_datasets`&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;Python&nbsp;file&nbsp;path&nbsp;(str),&nbsp;file&nbsp;details&nbsp;(Dict),&nbsp;base&nbsp;name&nbsp;(str),&nbsp;list&nbsp;of&nbsp;questions&nbsp;(List[Dict]),&nbsp;and&nbsp;model&nbsp;configuration&nbsp;(Dict)&nbsp;as&nbsp;input.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Instantiate&nbsp;an&nbsp;object&nbsp;of&nbsp;the&nbsp;`DatasetGenerator`&nbsp;class&nbsp;using&nbsp;the&nbsp;provided&nbsp;input.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions&nbsp;using&nbsp;the&nbsp;`generate`&nbsp;method&nbsp;of&nbsp;the&nbsp;`DatasetGenerator`&nbsp;instance.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Return&nbsp;the&nbsp;generated&nbsp;`instruct_list`.<br/>&quot;&quot;&quot;<br/>import&nbsp;logging<br/>import&nbsp;re<br/>import&nbsp;math<br/>from&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List,&nbsp;Tuple<br/><br/>#&nbsp;Set&nbsp;up&nbsp;logging<br/>logging.basicConfig(<br/>&nbsp;&nbsp;&nbsp;&nbsp;format=&#x27;%(asctime)s&nbsp;-&nbsp;%(levelname)s&nbsp;-&nbsp;%(message)s&#x27;,&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;level=logging.INFO<br/>)<br/>logger&nbsp;=&nbsp;logging.getLogger(__name__)<br/><br/><br/>class&nbsp;DatasetGenerator:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;JSON&nbsp;formatted&nbsp;dictionary&nbsp;outputs&nbsp;for&nbsp;a&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Attributes:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict[str,&nbsp;Any]):&nbsp;Details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Questions&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Storage&nbsp;for&nbsp;generated&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_mapping&nbsp;(Dict[str,&nbsp;str]):&nbsp;Mapping&nbsp;of&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;Flag&nbsp;indicating&nbsp;if&nbsp;a&nbsp;language&nbsp;model&nbsp;should&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;format&nbsp;for&nbsp;querying&nbsp;the&nbsp;language&nbsp;model.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Methods:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;and&nbsp;return&nbsp;unique&nbsp;elements&nbsp;from&nbsp;an&nbsp;input&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_to_list(list_to_update:&nbsp;List[Dict],&nbsp;query:&nbsp;str,&nbsp;response:&nbsp;str,&nbsp;additional_field=None)&nbsp;-&gt;&nbsp;List[Dict]:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct&nbsp;list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_response_from_llm(query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question_type(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;related&nbsp;to&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generate()&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_path&nbsp;=&nbsp;file_path<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_details&nbsp;=&nbsp;file_details<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.base_name&nbsp;=&nbsp;base_name<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.questions&nbsp;=&nbsp;questions<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.model_config&nbsp;=&nbsp;model_config<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.llm&nbsp;=&nbsp;model_config[&#x27;model&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.llm&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list&nbsp;=&nbsp;[]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.question_mapping&nbsp;=&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;file&#x27;:&nbsp;&#x27;file&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;function&#x27;:&nbsp;&#x27;functions&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;class&#x27;:&nbsp;&#x27;classes&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;method&#x27;:&nbsp;&#x27;classes&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;input&nbsp;string&nbsp;and&nbsp;return&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;(str):&nbsp;The&nbsp;input&nbsp;string&nbsp;to&nbsp;be&nbsp;cleaned.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;cleaned&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleaned_elements&nbsp;=&nbsp;set(re.sub(r&#x27;[^\w\-_&gt;\s:/.]&#x27;,&nbsp;&#x27;&#x27;,&nbsp;element.strip())<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;element&nbsp;in&nbsp;re.sub(r&#x27;\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split(&#x27;,&#x27;))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(cleaned_elements)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_response_from_llm(self,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;generated&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&quot;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;full_context,&nbsp;prompt,&nbsp;context_size<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_context_length&nbsp;=&nbsp;self.model_config[&#x27;inference_model&#x27;][&#x27;model_params&#x27;][&#x27;context_length&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excluded_instructions&nbsp;=&nbsp;[&quot;Call&nbsp;code&nbsp;graph&quot;,&nbsp;&quot;Docstring&quot;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_qa&nbsp;=&nbsp;&quot;\n&quot;.join([f&quot;Q:&nbsp;{item[&#x27;instruction&#x27;]}&nbsp;\nA:&nbsp;{item[&#x27;output&#x27;]}&quot;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list&nbsp;if&nbsp;not&nbsp;any(item[&#x27;instruction&#x27;].startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions)])<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;manage&nbsp;context&nbsp;length&nbsp;for&nbsp;LLM&nbsp;using&nbsp;different&nbsp;strategies&nbsp;starting&nbsp;with&nbsp;the&nbsp;longest&nbsp;and&nbsp;most&nbsp;comprehensive<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_strategies&nbsp;=&nbsp;[<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(context)&nbsp;+&nbsp;&#x27;\n```&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(self.file_details[&#x27;file_info&#x27;][&#x27;file_code_simplified&#x27;])&nbsp;+&nbsp;&#x27;\n```&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;self.get_string_from_info(self.file_details[&#x27;file_info&#x27;],&nbsp;&#x27;file_summary&#x27;),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;strategy&nbsp;in&nbsp;context_strategies:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;strategy()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context,&nbsp;prompt,&nbsp;context_size&nbsp;=&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context_size&nbsp;&lt;=&nbsp;0.70&nbsp;*&nbsp;max_context_length:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(f&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response,&nbsp;adjust&nbsp;context_length&nbsp;&gt;&nbsp;{math.ceil(context_size/0.70)}&nbsp;in&nbsp;py2dataset_model_config.yaml&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;re.sub(r&#x27;\n\s*\n&#x27;,&nbsp;&#x27;\n\n&#x27;,&nbsp;self.llm(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Response:&nbsp;{response}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;response<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;the&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;(Dict):&nbsp;The&nbsp;information&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id.endswith(&#x27;code_graph&#x27;)&nbsp;or&nbsp;question_id.endswith(&#x27;docstring&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;info.get(question_id,&nbsp;{})<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.get_response_from_llm(query,&nbsp;context)&nbsp;if&nbsp;self.use_llm&nbsp;and&nbsp;question_id.endswith(&#x27;purpose&#x27;)&nbsp;else&nbsp;self.clean_and_get_unique_elements(str(info.get(question_id,&nbsp;&#x27;&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response&nbsp;and&nbsp;response&nbsp;!=&nbsp;&#x27;None&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_str&nbsp;=&nbsp;str(response).strip()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response_str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list.append({&#x27;instruction&#x27;:&nbsp;query,&nbsp;&#x27;input&#x27;:&nbsp;context,&nbsp;&#x27;output&#x27;:&nbsp;response_str})<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_string_from_info(info,&nbsp;item_type):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;info[item_type]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;items&nbsp;=&nbsp;[item.strip()&nbsp;for&nbsp;item&nbsp;in&nbsp;str(info[item_type]).split(&#x27;,&#x27;)&nbsp;if&nbsp;item]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(items)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question_type(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_text&nbsp;(str):&nbsp;The&nbsp;text&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;question_type&nbsp;==&nbsp;&#x27;method&#x27;:&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;class_name,&nbsp;class_info&nbsp;in&nbsp;self.file_details[&#x27;classes&#x27;].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key,&nbsp;method_info&nbsp;in&nbsp;class_info.items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key.startswith(&#x27;class_method_&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method_name&nbsp;=&nbsp;key[len(&#x27;class_method_&#x27;):]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;method_info[&#x27;method_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{&#x27;class_name&#x27;:&nbsp;class_name,&nbsp;&#x27;method_name&#x27;:&nbsp;method_name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;method_info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:&nbsp;&nbsp;#&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;function&#x27;&nbsp;or&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;name,&nbsp;info&nbsp;in&nbsp;self.file_details[self.question_mapping[question_type]].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;info[f&#x27;{question_type}_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{f&#x27;{question_type}_name&#x27;:&nbsp;name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id&nbsp;==&nbsp;f&#x27;{question_type}_purpose&#x27;&nbsp;and&nbsp;self.use_llm:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variables_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_variables&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputs_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_inputs&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combined_string&nbsp;=&nbsp;&#x27;,&nbsp;&#x27;.join([s&nbsp;for&nbsp;s&nbsp;in&nbsp;[variables_string,&nbsp;inputs_string]&nbsp;if&nbsp;s])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_variables&#x27;]&nbsp;=&nbsp;self.clean_and_get_unique_elements(combined_string)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;get&nbsp;methods&nbsp;to&nbsp;include&nbsp;in&nbsp;mapping&nbsp;for&nbsp;query<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_methods&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_methods&#x27;]&nbsp;=&nbsp;methods_string<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;generate(self)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;The&nbsp;generated&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;question&nbsp;in&nbsp;self.questions:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question_type(question[&#x27;type&#x27;],&nbsp;question[&#x27;id&#x27;],&nbsp;question[&#x27;text&#x27;])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.instruct_list<br/><br/><br/>def&nbsp;get_python_datasets(file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;information&nbsp;from&nbsp;a&nbsp;Python&nbsp;file&nbsp;and&nbsp;return&nbsp;it&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict):&nbsp;The&nbsp;details&nbsp;of&nbsp;the&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;Python&nbsp;code&nbsp;filename.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict]):&nbsp;The&nbsp;list&nbsp;of&nbsp;questions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;Extracted&nbsp;information&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;generator&nbsp;=&nbsp;DatasetGenerator(file_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;generator.generate()<br/></td><td>get_python_datasets</td></tr><tr><td>Classes&nbsp;defined&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>&quot;&quot;&quot;<br/>Generates&nbsp;JSON&nbsp;format&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions&nbsp;for&nbsp;a&nbsp;Python&nbsp;file<br/>Requirements:<br/>[req01]&nbsp;The&nbsp;`DatasetGenerator`&nbsp;class&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;Python&nbsp;file&nbsp;path&nbsp;(str),&nbsp;file&nbsp;details&nbsp;(Dict),&nbsp;base&nbsp;name&nbsp;(str),&nbsp;list&nbsp;of&nbsp;questions&nbsp;(List[Dict]),&nbsp;and&nbsp;model&nbsp;configuration&nbsp;(Dict)&nbsp;as&nbsp;input&nbsp;during&nbsp;instantiation.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Initialize&nbsp;and&nbsp;store&nbsp;the&nbsp;Python&nbsp;file&nbsp;path,&nbsp;file&nbsp;details,&nbsp;base&nbsp;name,&nbsp;list&nbsp;of&nbsp;questions,&nbsp;language&nbsp;model,&nbsp;and&nbsp;use_llm&nbsp;flag&nbsp;as&nbsp;class&nbsp;attributes.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Provide&nbsp;the&nbsp;`clean_and_get_unique_elements`&nbsp;method&nbsp;to&nbsp;clean&nbsp;an&nbsp;input&nbsp;string&nbsp;(str)&nbsp;and&nbsp;return&nbsp;a&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Provide&nbsp;the&nbsp;`get_response_from_llm`&nbsp;method&nbsp;to&nbsp;retrieve&nbsp;a&nbsp;response&nbsp;from&nbsp;the&nbsp;language&nbsp;model&nbsp;based&nbsp;on&nbsp;a&nbsp;query&nbsp;and&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Provide&nbsp;the&nbsp;`process_question`&nbsp;method&nbsp;to&nbsp;process&nbsp;a&nbsp;question&nbsp;based&nbsp;on&nbsp;its&nbsp;type&nbsp;and&nbsp;generate&nbsp;a&nbsp;corresponding&nbsp;response&nbsp;to&nbsp;add&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.&nbsp;Provide&nbsp;the&nbsp;`process_question_type`&nbsp;method&nbsp;to&nbsp;process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.&nbsp;Provide&nbsp;the&nbsp;`generate`&nbsp;method&nbsp;to&nbsp;generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;questions&nbsp;in&nbsp;the&nbsp;list&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h.&nbsp;Internally&nbsp;manage&nbsp;a&nbsp;question&nbsp;mapping&nbsp;to&nbsp;correlate&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/><br/>[req02]&nbsp;The&nbsp;`get_python_datasets`&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;Python&nbsp;file&nbsp;path&nbsp;(str),&nbsp;file&nbsp;details&nbsp;(Dict),&nbsp;base&nbsp;name&nbsp;(str),&nbsp;list&nbsp;of&nbsp;questions&nbsp;(List[Dict]),&nbsp;and&nbsp;model&nbsp;configuration&nbsp;(Dict)&nbsp;as&nbsp;input.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Instantiate&nbsp;an&nbsp;object&nbsp;of&nbsp;the&nbsp;`DatasetGenerator`&nbsp;class&nbsp;using&nbsp;the&nbsp;provided&nbsp;input.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions&nbsp;using&nbsp;the&nbsp;`generate`&nbsp;method&nbsp;of&nbsp;the&nbsp;`DatasetGenerator`&nbsp;instance.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Return&nbsp;the&nbsp;generated&nbsp;`instruct_list`.<br/>&quot;&quot;&quot;<br/>import&nbsp;logging<br/>import&nbsp;re<br/>import&nbsp;math<br/>from&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List,&nbsp;Tuple<br/><br/>#&nbsp;Set&nbsp;up&nbsp;logging<br/>logging.basicConfig(<br/>&nbsp;&nbsp;&nbsp;&nbsp;format=&#x27;%(asctime)s&nbsp;-&nbsp;%(levelname)s&nbsp;-&nbsp;%(message)s&#x27;,&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;level=logging.INFO<br/>)<br/>logger&nbsp;=&nbsp;logging.getLogger(__name__)<br/><br/><br/>class&nbsp;DatasetGenerator:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;JSON&nbsp;formatted&nbsp;dictionary&nbsp;outputs&nbsp;for&nbsp;a&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Attributes:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict[str,&nbsp;Any]):&nbsp;Details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Questions&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Storage&nbsp;for&nbsp;generated&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_mapping&nbsp;(Dict[str,&nbsp;str]):&nbsp;Mapping&nbsp;of&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;Flag&nbsp;indicating&nbsp;if&nbsp;a&nbsp;language&nbsp;model&nbsp;should&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;format&nbsp;for&nbsp;querying&nbsp;the&nbsp;language&nbsp;model.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Methods:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;and&nbsp;return&nbsp;unique&nbsp;elements&nbsp;from&nbsp;an&nbsp;input&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_to_list(list_to_update:&nbsp;List[Dict],&nbsp;query:&nbsp;str,&nbsp;response:&nbsp;str,&nbsp;additional_field=None)&nbsp;-&gt;&nbsp;List[Dict]:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct&nbsp;list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_response_from_llm(query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question_type(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;related&nbsp;to&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generate()&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_path&nbsp;=&nbsp;file_path<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_details&nbsp;=&nbsp;file_details<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.base_name&nbsp;=&nbsp;base_name<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.questions&nbsp;=&nbsp;questions<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.model_config&nbsp;=&nbsp;model_config<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.llm&nbsp;=&nbsp;model_config[&#x27;model&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.llm&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list&nbsp;=&nbsp;[]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.question_mapping&nbsp;=&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;file&#x27;:&nbsp;&#x27;file&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;function&#x27;:&nbsp;&#x27;functions&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;class&#x27;:&nbsp;&#x27;classes&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;method&#x27;:&nbsp;&#x27;classes&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;input&nbsp;string&nbsp;and&nbsp;return&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;(str):&nbsp;The&nbsp;input&nbsp;string&nbsp;to&nbsp;be&nbsp;cleaned.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;cleaned&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleaned_elements&nbsp;=&nbsp;set(re.sub(r&#x27;[^\w\-_&gt;\s:/.]&#x27;,&nbsp;&#x27;&#x27;,&nbsp;element.strip())<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;element&nbsp;in&nbsp;re.sub(r&#x27;\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split(&#x27;,&#x27;))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(cleaned_elements)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_response_from_llm(self,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;generated&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&quot;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;full_context,&nbsp;prompt,&nbsp;context_size<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_context_length&nbsp;=&nbsp;self.model_config[&#x27;inference_model&#x27;][&#x27;model_params&#x27;][&#x27;context_length&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excluded_instructions&nbsp;=&nbsp;[&quot;Call&nbsp;code&nbsp;graph&quot;,&nbsp;&quot;Docstring&quot;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_qa&nbsp;=&nbsp;&quot;\n&quot;.join([f&quot;Q:&nbsp;{item[&#x27;instruction&#x27;]}&nbsp;\nA:&nbsp;{item[&#x27;output&#x27;]}&quot;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list&nbsp;if&nbsp;not&nbsp;any(item[&#x27;instruction&#x27;].startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions)])<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;manage&nbsp;context&nbsp;length&nbsp;for&nbsp;LLM&nbsp;using&nbsp;different&nbsp;strategies&nbsp;starting&nbsp;with&nbsp;the&nbsp;longest&nbsp;and&nbsp;most&nbsp;comprehensive<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_strategies&nbsp;=&nbsp;[<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(context)&nbsp;+&nbsp;&#x27;\n```&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(self.file_details[&#x27;file_info&#x27;][&#x27;file_code_simplified&#x27;])&nbsp;+&nbsp;&#x27;\n```&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;self.get_string_from_info(self.file_details[&#x27;file_info&#x27;],&nbsp;&#x27;file_summary&#x27;),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;strategy&nbsp;in&nbsp;context_strategies:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;strategy()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context,&nbsp;prompt,&nbsp;context_size&nbsp;=&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context_size&nbsp;&lt;=&nbsp;0.70&nbsp;*&nbsp;max_context_length:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(f&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response,&nbsp;adjust&nbsp;context_length&nbsp;&gt;&nbsp;{math.ceil(context_size/0.70)}&nbsp;in&nbsp;py2dataset_model_config.yaml&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;re.sub(r&#x27;\n\s*\n&#x27;,&nbsp;&#x27;\n\n&#x27;,&nbsp;self.llm(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Response:&nbsp;{response}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;response<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;the&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;(Dict):&nbsp;The&nbsp;information&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id.endswith(&#x27;code_graph&#x27;)&nbsp;or&nbsp;question_id.endswith(&#x27;docstring&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;info.get(question_id,&nbsp;{})<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.get_response_from_llm(query,&nbsp;context)&nbsp;if&nbsp;self.use_llm&nbsp;and&nbsp;question_id.endswith(&#x27;purpose&#x27;)&nbsp;else&nbsp;self.clean_and_get_unique_elements(str(info.get(question_id,&nbsp;&#x27;&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response&nbsp;and&nbsp;response&nbsp;!=&nbsp;&#x27;None&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_str&nbsp;=&nbsp;str(response).strip()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response_str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list.append({&#x27;instruction&#x27;:&nbsp;query,&nbsp;&#x27;input&#x27;:&nbsp;context,&nbsp;&#x27;output&#x27;:&nbsp;response_str})<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_string_from_info(info,&nbsp;item_type):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;info[item_type]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;items&nbsp;=&nbsp;[item.strip()&nbsp;for&nbsp;item&nbsp;in&nbsp;str(info[item_type]).split(&#x27;,&#x27;)&nbsp;if&nbsp;item]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(items)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question_type(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_text&nbsp;(str):&nbsp;The&nbsp;text&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;question_type&nbsp;==&nbsp;&#x27;method&#x27;:&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;class_name,&nbsp;class_info&nbsp;in&nbsp;self.file_details[&#x27;classes&#x27;].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key,&nbsp;method_info&nbsp;in&nbsp;class_info.items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key.startswith(&#x27;class_method_&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method_name&nbsp;=&nbsp;key[len(&#x27;class_method_&#x27;):]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;method_info[&#x27;method_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{&#x27;class_name&#x27;:&nbsp;class_name,&nbsp;&#x27;method_name&#x27;:&nbsp;method_name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;method_info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:&nbsp;&nbsp;#&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;function&#x27;&nbsp;or&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;name,&nbsp;info&nbsp;in&nbsp;self.file_details[self.question_mapping[question_type]].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;info[f&#x27;{question_type}_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{f&#x27;{question_type}_name&#x27;:&nbsp;name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id&nbsp;==&nbsp;f&#x27;{question_type}_purpose&#x27;&nbsp;and&nbsp;self.use_llm:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variables_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_variables&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputs_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_inputs&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combined_string&nbsp;=&nbsp;&#x27;,&nbsp;&#x27;.join([s&nbsp;for&nbsp;s&nbsp;in&nbsp;[variables_string,&nbsp;inputs_string]&nbsp;if&nbsp;s])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_variables&#x27;]&nbsp;=&nbsp;self.clean_and_get_unique_elements(combined_string)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;get&nbsp;methods&nbsp;to&nbsp;include&nbsp;in&nbsp;mapping&nbsp;for&nbsp;query<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_methods&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_methods&#x27;]&nbsp;=&nbsp;methods_string<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;generate(self)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;The&nbsp;generated&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;question&nbsp;in&nbsp;self.questions:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question_type(question[&#x27;type&#x27;],&nbsp;question[&#x27;id&#x27;],&nbsp;question[&#x27;text&#x27;])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.instruct_list<br/><br/><br/>def&nbsp;get_python_datasets(file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;information&nbsp;from&nbsp;a&nbsp;Python&nbsp;file&nbsp;and&nbsp;return&nbsp;it&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict):&nbsp;The&nbsp;details&nbsp;of&nbsp;the&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;Python&nbsp;code&nbsp;filename.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict]):&nbsp;The&nbsp;list&nbsp;of&nbsp;questions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;Extracted&nbsp;information&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;generator&nbsp;=&nbsp;DatasetGenerator(file_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;generator.generate()<br/></td><td>DatasetGenerator</td></tr><tr><td>Inputs&nbsp;to&nbsp;function:&nbsp;&#x27;get_python_datasets&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;get_python_datasets(file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;information&nbsp;from&nbsp;a&nbsp;Python&nbsp;file&nbsp;and&nbsp;return&nbsp;it&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict):&nbsp;The&nbsp;details&nbsp;of&nbsp;the&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;Python&nbsp;code&nbsp;filename.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict]):&nbsp;The&nbsp;list&nbsp;of&nbsp;questions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;Extracted&nbsp;information&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;generator&nbsp;=&nbsp;DatasetGenerator(file_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;generator.generate()</td><td>file_path,&nbsp;base_name,&nbsp;file_details,&nbsp;questions,&nbsp;model_config</td></tr><tr><td>Docstring&nbsp;of&nbsp;function:&nbsp;&#x27;get_python_datasets&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;get_python_datasets(file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;information&nbsp;from&nbsp;a&nbsp;Python&nbsp;file&nbsp;and&nbsp;return&nbsp;it&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict):&nbsp;The&nbsp;details&nbsp;of&nbsp;the&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;Python&nbsp;code&nbsp;filename.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict]):&nbsp;The&nbsp;list&nbsp;of&nbsp;questions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;Extracted&nbsp;information&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;generator&nbsp;=&nbsp;DatasetGenerator(file_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;generator.generate()</td><td>Extract&nbsp;information&nbsp;from&nbsp;a&nbsp;Python&nbsp;file&nbsp;and&nbsp;return&nbsp;it&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict):&nbsp;The&nbsp;details&nbsp;of&nbsp;the&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;Python&nbsp;code&nbsp;filename.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict]):&nbsp;The&nbsp;list&nbsp;of&nbsp;questions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;Extracted&nbsp;information&nbsp;in&nbsp;JSON&nbsp;format.</td></tr><tr><td>Calls&nbsp;made&nbsp;in&nbsp;function:&nbsp;&#x27;get_python_datasets&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;get_python_datasets(file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;information&nbsp;from&nbsp;a&nbsp;Python&nbsp;file&nbsp;and&nbsp;return&nbsp;it&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict):&nbsp;The&nbsp;details&nbsp;of&nbsp;the&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;Python&nbsp;code&nbsp;filename.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict]):&nbsp;The&nbsp;list&nbsp;of&nbsp;questions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;Extracted&nbsp;information&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;generator&nbsp;=&nbsp;DatasetGenerator(file_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;generator.generate()</td><td>DatasetGenerator,&nbsp;generator.generate</td></tr><tr><td>Variables&nbsp;defined&nbsp;in&nbsp;function:&nbsp;&#x27;get_python_datasets&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;get_python_datasets(file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;information&nbsp;from&nbsp;a&nbsp;Python&nbsp;file&nbsp;and&nbsp;return&nbsp;it&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict):&nbsp;The&nbsp;details&nbsp;of&nbsp;the&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;Python&nbsp;code&nbsp;filename.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict]):&nbsp;The&nbsp;list&nbsp;of&nbsp;questions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;Extracted&nbsp;information&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;generator&nbsp;=&nbsp;DatasetGenerator(file_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;generator.generate()</td><td>generator</td></tr><tr><td>Returned&nbsp;items&nbsp;from&nbsp;function:&nbsp;&#x27;get_python_datasets&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;get_python_datasets(file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;information&nbsp;from&nbsp;a&nbsp;Python&nbsp;file&nbsp;and&nbsp;return&nbsp;it&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict):&nbsp;The&nbsp;details&nbsp;of&nbsp;the&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;Python&nbsp;code&nbsp;filename.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict]):&nbsp;The&nbsp;list&nbsp;of&nbsp;questions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;Extracted&nbsp;information&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;generator&nbsp;=&nbsp;DatasetGenerator(file_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;generator.generate()</td><td>generator.generate</td></tr><tr><td>Methods&nbsp;defined&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>class&nbsp;DatasetGenerator:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;JSON&nbsp;formatted&nbsp;dictionary&nbsp;outputs&nbsp;for&nbsp;a&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Attributes:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict[str,&nbsp;Any]):&nbsp;Details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Questions&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Storage&nbsp;for&nbsp;generated&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_mapping&nbsp;(Dict[str,&nbsp;str]):&nbsp;Mapping&nbsp;of&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;Flag&nbsp;indicating&nbsp;if&nbsp;a&nbsp;language&nbsp;model&nbsp;should&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;format&nbsp;for&nbsp;querying&nbsp;the&nbsp;language&nbsp;model.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Methods:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;and&nbsp;return&nbsp;unique&nbsp;elements&nbsp;from&nbsp;an&nbsp;input&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_to_list(list_to_update:&nbsp;List[Dict],&nbsp;query:&nbsp;str,&nbsp;response:&nbsp;str,&nbsp;additional_field=None)&nbsp;-&gt;&nbsp;List[Dict]:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct&nbsp;list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_response_from_llm(query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question_type(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;related&nbsp;to&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generate()&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_path&nbsp;=&nbsp;file_path<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_details&nbsp;=&nbsp;file_details<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.base_name&nbsp;=&nbsp;base_name<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.questions&nbsp;=&nbsp;questions<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.model_config&nbsp;=&nbsp;model_config<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.llm&nbsp;=&nbsp;model_config[&#x27;model&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.llm&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list&nbsp;=&nbsp;[]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.question_mapping&nbsp;=&nbsp;{&#x27;file&#x27;:&nbsp;&#x27;file&#x27;,&nbsp;&#x27;function&#x27;:&nbsp;&#x27;functions&#x27;,&nbsp;&#x27;class&#x27;:&nbsp;&#x27;classes&#x27;,&nbsp;&#x27;method&#x27;:&nbsp;&#x27;classes&#x27;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;input&nbsp;string&nbsp;and&nbsp;return&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;(str):&nbsp;The&nbsp;input&nbsp;string&nbsp;to&nbsp;be&nbsp;cleaned.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;cleaned&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleaned_elements&nbsp;=&nbsp;set((re.sub(&#x27;[^\\w\\-_&gt;\\s:/.]&#x27;,&nbsp;&#x27;&#x27;,&nbsp;element.strip())&nbsp;for&nbsp;element&nbsp;in&nbsp;re.sub(&#x27;\\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split(&#x27;,&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(cleaned_elements)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_response_from_llm(self,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;generated&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&#x27;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(full_context,&nbsp;prompt,&nbsp;context_size)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_context_length&nbsp;=&nbsp;self.model_config[&#x27;inference_model&#x27;][&#x27;model_params&#x27;][&#x27;context_length&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excluded_instructions&nbsp;=&nbsp;[&#x27;Call&nbsp;code&nbsp;graph&#x27;,&nbsp;&#x27;Docstring&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_qa&nbsp;=&nbsp;&#x27;\n&#x27;.join([f&quot;Q:&nbsp;{item[&#x27;instruction&#x27;]}&nbsp;\nA:&nbsp;{item[&#x27;output&#x27;]}&quot;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list&nbsp;if&nbsp;not&nbsp;any((item[&#x27;instruction&#x27;].startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions))])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_strategies&nbsp;=&nbsp;[lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(context)&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(self.file_details[&#x27;file_info&#x27;][&#x27;file_code_simplified&#x27;])&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;self.get_string_from_info(self.file_details[&#x27;file_info&#x27;],&nbsp;&#x27;file_summary&#x27;),&nbsp;lambda:&nbsp;&#x27;&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;strategy&nbsp;in&nbsp;context_strategies:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;strategy()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context,&nbsp;prompt,&nbsp;context_size&nbsp;=&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context_size&nbsp;&lt;=&nbsp;0.7&nbsp;*&nbsp;max_context_length:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(f&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response,&nbsp;adjust&nbsp;context_length&nbsp;&gt;&nbsp;{math.ceil(context_size&nbsp;/&nbsp;0.7)}&nbsp;in&nbsp;py2dataset_model_config.yaml&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;re.sub(&#x27;\\n\\s*\\n&#x27;,&nbsp;&#x27;\n\n&#x27;,&nbsp;self.llm(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Response:&nbsp;{response}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;response<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;the&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;(Dict):&nbsp;The&nbsp;information&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id.endswith(&#x27;code_graph&#x27;)&nbsp;or&nbsp;question_id.endswith(&#x27;docstring&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;info.get(question_id,&nbsp;{})<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.get_response_from_llm(query,&nbsp;context)&nbsp;if&nbsp;self.use_llm&nbsp;and&nbsp;question_id.endswith(&#x27;purpose&#x27;)&nbsp;else&nbsp;self.clean_and_get_unique_elements(str(info.get(question_id,&nbsp;&#x27;&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response&nbsp;and&nbsp;response&nbsp;!=&nbsp;&#x27;None&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_str&nbsp;=&nbsp;str(response).strip()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response_str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list.append({&#x27;instruction&#x27;:&nbsp;query,&nbsp;&#x27;input&#x27;:&nbsp;context,&nbsp;&#x27;output&#x27;:&nbsp;response_str})<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_string_from_info(info,&nbsp;item_type):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;info[item_type]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;items&nbsp;=&nbsp;[item.strip()&nbsp;for&nbsp;item&nbsp;in&nbsp;str(info[item_type]).split(&#x27;,&#x27;)&nbsp;if&nbsp;item]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(items)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question_type(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_text&nbsp;(str):&nbsp;The&nbsp;text&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;question_type&nbsp;==&nbsp;&#x27;method&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;class_name,&nbsp;class_info&nbsp;in&nbsp;self.file_details[&#x27;classes&#x27;].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key,&nbsp;method_info&nbsp;in&nbsp;class_info.items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key.startswith(&#x27;class_method_&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method_name&nbsp;=&nbsp;key[len(&#x27;class_method_&#x27;):]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;method_info[&#x27;method_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{&#x27;class_name&#x27;:&nbsp;class_name,&nbsp;&#x27;method_name&#x27;:&nbsp;method_name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;method_info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;name,&nbsp;info&nbsp;in&nbsp;self.file_details[self.question_mapping[question_type]].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;info[f&#x27;{question_type}_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{f&#x27;{question_type}_name&#x27;:&nbsp;name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id&nbsp;==&nbsp;f&#x27;{question_type}_purpose&#x27;&nbsp;and&nbsp;self.use_llm:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variables_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_variables&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputs_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_inputs&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combined_string&nbsp;=&nbsp;&#x27;,&nbsp;&#x27;.join([s&nbsp;for&nbsp;s&nbsp;in&nbsp;[variables_string,&nbsp;inputs_string]&nbsp;if&nbsp;s])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_variables&#x27;]&nbsp;=&nbsp;self.clean_and_get_unique_elements(combined_string)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_methods&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_methods&#x27;]&nbsp;=&nbsp;methods_string<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;generate(self)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;The&nbsp;generated&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;question&nbsp;in&nbsp;self.questions:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question_type(question[&#x27;type&#x27;],&nbsp;question[&#x27;id&#x27;],&nbsp;question[&#x27;text&#x27;])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.instruct_list</td><td>generate,&nbsp;process_question,&nbsp;get_response_from_llm,&nbsp;process_question_type,&nbsp;clean_and_get_unique_elements,&nbsp;get_string_from_info</td></tr><tr><td>Docstring&nbsp;of&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>class&nbsp;DatasetGenerator:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;JSON&nbsp;formatted&nbsp;dictionary&nbsp;outputs&nbsp;for&nbsp;a&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Attributes:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict[str,&nbsp;Any]):&nbsp;Details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Questions&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Storage&nbsp;for&nbsp;generated&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_mapping&nbsp;(Dict[str,&nbsp;str]):&nbsp;Mapping&nbsp;of&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;Flag&nbsp;indicating&nbsp;if&nbsp;a&nbsp;language&nbsp;model&nbsp;should&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;format&nbsp;for&nbsp;querying&nbsp;the&nbsp;language&nbsp;model.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Methods:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;and&nbsp;return&nbsp;unique&nbsp;elements&nbsp;from&nbsp;an&nbsp;input&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_to_list(list_to_update:&nbsp;List[Dict],&nbsp;query:&nbsp;str,&nbsp;response:&nbsp;str,&nbsp;additional_field=None)&nbsp;-&gt;&nbsp;List[Dict]:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct&nbsp;list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_response_from_llm(query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question_type(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;related&nbsp;to&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generate()&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_path&nbsp;=&nbsp;file_path<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_details&nbsp;=&nbsp;file_details<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.base_name&nbsp;=&nbsp;base_name<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.questions&nbsp;=&nbsp;questions<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.model_config&nbsp;=&nbsp;model_config<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.llm&nbsp;=&nbsp;model_config[&#x27;model&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.llm&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list&nbsp;=&nbsp;[]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.question_mapping&nbsp;=&nbsp;{&#x27;file&#x27;:&nbsp;&#x27;file&#x27;,&nbsp;&#x27;function&#x27;:&nbsp;&#x27;functions&#x27;,&nbsp;&#x27;class&#x27;:&nbsp;&#x27;classes&#x27;,&nbsp;&#x27;method&#x27;:&nbsp;&#x27;classes&#x27;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;input&nbsp;string&nbsp;and&nbsp;return&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;(str):&nbsp;The&nbsp;input&nbsp;string&nbsp;to&nbsp;be&nbsp;cleaned.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;cleaned&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleaned_elements&nbsp;=&nbsp;set((re.sub(&#x27;[^\\w\\-_&gt;\\s:/.]&#x27;,&nbsp;&#x27;&#x27;,&nbsp;element.strip())&nbsp;for&nbsp;element&nbsp;in&nbsp;re.sub(&#x27;\\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split(&#x27;,&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(cleaned_elements)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_response_from_llm(self,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;generated&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&#x27;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(full_context,&nbsp;prompt,&nbsp;context_size)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_context_length&nbsp;=&nbsp;self.model_config[&#x27;inference_model&#x27;][&#x27;model_params&#x27;][&#x27;context_length&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excluded_instructions&nbsp;=&nbsp;[&#x27;Call&nbsp;code&nbsp;graph&#x27;,&nbsp;&#x27;Docstring&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_qa&nbsp;=&nbsp;&#x27;\n&#x27;.join([f&quot;Q:&nbsp;{item[&#x27;instruction&#x27;]}&nbsp;\nA:&nbsp;{item[&#x27;output&#x27;]}&quot;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list&nbsp;if&nbsp;not&nbsp;any((item[&#x27;instruction&#x27;].startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions))])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_strategies&nbsp;=&nbsp;[lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(context)&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(self.file_details[&#x27;file_info&#x27;][&#x27;file_code_simplified&#x27;])&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;self.get_string_from_info(self.file_details[&#x27;file_info&#x27;],&nbsp;&#x27;file_summary&#x27;),&nbsp;lambda:&nbsp;&#x27;&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;strategy&nbsp;in&nbsp;context_strategies:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;strategy()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context,&nbsp;prompt,&nbsp;context_size&nbsp;=&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context_size&nbsp;&lt;=&nbsp;0.7&nbsp;*&nbsp;max_context_length:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(f&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response,&nbsp;adjust&nbsp;context_length&nbsp;&gt;&nbsp;{math.ceil(context_size&nbsp;/&nbsp;0.7)}&nbsp;in&nbsp;py2dataset_model_config.yaml&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;re.sub(&#x27;\\n\\s*\\n&#x27;,&nbsp;&#x27;\n\n&#x27;,&nbsp;self.llm(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Response:&nbsp;{response}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;response<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;the&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;(Dict):&nbsp;The&nbsp;information&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id.endswith(&#x27;code_graph&#x27;)&nbsp;or&nbsp;question_id.endswith(&#x27;docstring&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;info.get(question_id,&nbsp;{})<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.get_response_from_llm(query,&nbsp;context)&nbsp;if&nbsp;self.use_llm&nbsp;and&nbsp;question_id.endswith(&#x27;purpose&#x27;)&nbsp;else&nbsp;self.clean_and_get_unique_elements(str(info.get(question_id,&nbsp;&#x27;&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response&nbsp;and&nbsp;response&nbsp;!=&nbsp;&#x27;None&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_str&nbsp;=&nbsp;str(response).strip()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response_str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list.append({&#x27;instruction&#x27;:&nbsp;query,&nbsp;&#x27;input&#x27;:&nbsp;context,&nbsp;&#x27;output&#x27;:&nbsp;response_str})<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_string_from_info(info,&nbsp;item_type):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;info[item_type]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;items&nbsp;=&nbsp;[item.strip()&nbsp;for&nbsp;item&nbsp;in&nbsp;str(info[item_type]).split(&#x27;,&#x27;)&nbsp;if&nbsp;item]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(items)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question_type(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_text&nbsp;(str):&nbsp;The&nbsp;text&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;question_type&nbsp;==&nbsp;&#x27;method&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;class_name,&nbsp;class_info&nbsp;in&nbsp;self.file_details[&#x27;classes&#x27;].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key,&nbsp;method_info&nbsp;in&nbsp;class_info.items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key.startswith(&#x27;class_method_&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method_name&nbsp;=&nbsp;key[len(&#x27;class_method_&#x27;):]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;method_info[&#x27;method_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{&#x27;class_name&#x27;:&nbsp;class_name,&nbsp;&#x27;method_name&#x27;:&nbsp;method_name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;method_info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;name,&nbsp;info&nbsp;in&nbsp;self.file_details[self.question_mapping[question_type]].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;info[f&#x27;{question_type}_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{f&#x27;{question_type}_name&#x27;:&nbsp;name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id&nbsp;==&nbsp;f&#x27;{question_type}_purpose&#x27;&nbsp;and&nbsp;self.use_llm:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variables_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_variables&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputs_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_inputs&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combined_string&nbsp;=&nbsp;&#x27;,&nbsp;&#x27;.join([s&nbsp;for&nbsp;s&nbsp;in&nbsp;[variables_string,&nbsp;inputs_string]&nbsp;if&nbsp;s])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_variables&#x27;]&nbsp;=&nbsp;self.clean_and_get_unique_elements(combined_string)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_methods&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_methods&#x27;]&nbsp;=&nbsp;methods_string<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;generate(self)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;The&nbsp;generated&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;question&nbsp;in&nbsp;self.questions:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question_type(question[&#x27;type&#x27;],&nbsp;question[&#x27;id&#x27;],&nbsp;question[&#x27;text&#x27;])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.instruct_list</td><td>Generate&nbsp;JSON&nbsp;formatted&nbsp;dictionary&nbsp;outputs&nbsp;for&nbsp;a&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Attributes:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict[str,&nbsp;Any]):&nbsp;Details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Questions&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Storage&nbsp;for&nbsp;generated&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_mapping&nbsp;(Dict[str,&nbsp;str]):&nbsp;Mapping&nbsp;of&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;Flag&nbsp;indicating&nbsp;if&nbsp;a&nbsp;language&nbsp;model&nbsp;should&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;format&nbsp;for&nbsp;querying&nbsp;the&nbsp;language&nbsp;model.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Methods:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;and&nbsp;return&nbsp;unique&nbsp;elements&nbsp;from&nbsp;an&nbsp;input&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_to_list(list_to_update:&nbsp;List[Dict],&nbsp;query:&nbsp;str,&nbsp;response:&nbsp;str,&nbsp;additional_field=None)&nbsp;-&gt;&nbsp;List[Dict]:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct&nbsp;list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_response_from_llm(query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question_type(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;related&nbsp;to&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generate()&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.</td></tr><tr><td>Attributes&nbsp;of&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>class&nbsp;DatasetGenerator:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;JSON&nbsp;formatted&nbsp;dictionary&nbsp;outputs&nbsp;for&nbsp;a&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Attributes:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict[str,&nbsp;Any]):&nbsp;Details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Questions&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Storage&nbsp;for&nbsp;generated&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_mapping&nbsp;(Dict[str,&nbsp;str]):&nbsp;Mapping&nbsp;of&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;Flag&nbsp;indicating&nbsp;if&nbsp;a&nbsp;language&nbsp;model&nbsp;should&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;format&nbsp;for&nbsp;querying&nbsp;the&nbsp;language&nbsp;model.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Methods:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;and&nbsp;return&nbsp;unique&nbsp;elements&nbsp;from&nbsp;an&nbsp;input&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_to_list(list_to_update:&nbsp;List[Dict],&nbsp;query:&nbsp;str,&nbsp;response:&nbsp;str,&nbsp;additional_field=None)&nbsp;-&gt;&nbsp;List[Dict]:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct&nbsp;list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_response_from_llm(query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question_type(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;related&nbsp;to&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generate()&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_path&nbsp;=&nbsp;file_path<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_details&nbsp;=&nbsp;file_details<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.base_name&nbsp;=&nbsp;base_name<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.questions&nbsp;=&nbsp;questions<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.model_config&nbsp;=&nbsp;model_config<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.llm&nbsp;=&nbsp;model_config[&#x27;model&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.llm&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list&nbsp;=&nbsp;[]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.question_mapping&nbsp;=&nbsp;{&#x27;file&#x27;:&nbsp;&#x27;file&#x27;,&nbsp;&#x27;function&#x27;:&nbsp;&#x27;functions&#x27;,&nbsp;&#x27;class&#x27;:&nbsp;&#x27;classes&#x27;,&nbsp;&#x27;method&#x27;:&nbsp;&#x27;classes&#x27;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;input&nbsp;string&nbsp;and&nbsp;return&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;(str):&nbsp;The&nbsp;input&nbsp;string&nbsp;to&nbsp;be&nbsp;cleaned.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;cleaned&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleaned_elements&nbsp;=&nbsp;set((re.sub(&#x27;[^\\w\\-_&gt;\\s:/.]&#x27;,&nbsp;&#x27;&#x27;,&nbsp;element.strip())&nbsp;for&nbsp;element&nbsp;in&nbsp;re.sub(&#x27;\\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split(&#x27;,&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(cleaned_elements)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_response_from_llm(self,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;generated&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&#x27;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(full_context,&nbsp;prompt,&nbsp;context_size)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_context_length&nbsp;=&nbsp;self.model_config[&#x27;inference_model&#x27;][&#x27;model_params&#x27;][&#x27;context_length&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excluded_instructions&nbsp;=&nbsp;[&#x27;Call&nbsp;code&nbsp;graph&#x27;,&nbsp;&#x27;Docstring&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_qa&nbsp;=&nbsp;&#x27;\n&#x27;.join([f&quot;Q:&nbsp;{item[&#x27;instruction&#x27;]}&nbsp;\nA:&nbsp;{item[&#x27;output&#x27;]}&quot;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list&nbsp;if&nbsp;not&nbsp;any((item[&#x27;instruction&#x27;].startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions))])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_strategies&nbsp;=&nbsp;[lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(context)&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(self.file_details[&#x27;file_info&#x27;][&#x27;file_code_simplified&#x27;])&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;self.get_string_from_info(self.file_details[&#x27;file_info&#x27;],&nbsp;&#x27;file_summary&#x27;),&nbsp;lambda:&nbsp;&#x27;&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;strategy&nbsp;in&nbsp;context_strategies:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;strategy()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context,&nbsp;prompt,&nbsp;context_size&nbsp;=&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context_size&nbsp;&lt;=&nbsp;0.7&nbsp;*&nbsp;max_context_length:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(f&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response,&nbsp;adjust&nbsp;context_length&nbsp;&gt;&nbsp;{math.ceil(context_size&nbsp;/&nbsp;0.7)}&nbsp;in&nbsp;py2dataset_model_config.yaml&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;re.sub(&#x27;\\n\\s*\\n&#x27;,&nbsp;&#x27;\n\n&#x27;,&nbsp;self.llm(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Response:&nbsp;{response}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;response<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;the&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;(Dict):&nbsp;The&nbsp;information&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id.endswith(&#x27;code_graph&#x27;)&nbsp;or&nbsp;question_id.endswith(&#x27;docstring&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;info.get(question_id,&nbsp;{})<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.get_response_from_llm(query,&nbsp;context)&nbsp;if&nbsp;self.use_llm&nbsp;and&nbsp;question_id.endswith(&#x27;purpose&#x27;)&nbsp;else&nbsp;self.clean_and_get_unique_elements(str(info.get(question_id,&nbsp;&#x27;&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response&nbsp;and&nbsp;response&nbsp;!=&nbsp;&#x27;None&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_str&nbsp;=&nbsp;str(response).strip()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response_str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list.append({&#x27;instruction&#x27;:&nbsp;query,&nbsp;&#x27;input&#x27;:&nbsp;context,&nbsp;&#x27;output&#x27;:&nbsp;response_str})<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_string_from_info(info,&nbsp;item_type):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;info[item_type]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;items&nbsp;=&nbsp;[item.strip()&nbsp;for&nbsp;item&nbsp;in&nbsp;str(info[item_type]).split(&#x27;,&#x27;)&nbsp;if&nbsp;item]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(items)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question_type(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_text&nbsp;(str):&nbsp;The&nbsp;text&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;question_type&nbsp;==&nbsp;&#x27;method&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;class_name,&nbsp;class_info&nbsp;in&nbsp;self.file_details[&#x27;classes&#x27;].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key,&nbsp;method_info&nbsp;in&nbsp;class_info.items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key.startswith(&#x27;class_method_&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method_name&nbsp;=&nbsp;key[len(&#x27;class_method_&#x27;):]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;method_info[&#x27;method_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{&#x27;class_name&#x27;:&nbsp;class_name,&nbsp;&#x27;method_name&#x27;:&nbsp;method_name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;method_info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;name,&nbsp;info&nbsp;in&nbsp;self.file_details[self.question_mapping[question_type]].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;info[f&#x27;{question_type}_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{f&#x27;{question_type}_name&#x27;:&nbsp;name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id&nbsp;==&nbsp;f&#x27;{question_type}_purpose&#x27;&nbsp;and&nbsp;self.use_llm:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variables_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_variables&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputs_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_inputs&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combined_string&nbsp;=&nbsp;&#x27;,&nbsp;&#x27;.join([s&nbsp;for&nbsp;s&nbsp;in&nbsp;[variables_string,&nbsp;inputs_string]&nbsp;if&nbsp;s])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_variables&#x27;]&nbsp;=&nbsp;self.clean_and_get_unique_elements(combined_string)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_methods&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_methods&#x27;]&nbsp;=&nbsp;methods_string<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;generate(self)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;The&nbsp;generated&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;question&nbsp;in&nbsp;self.questions:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question_type(question[&#x27;type&#x27;],&nbsp;question[&#x27;id&#x27;],&nbsp;question[&#x27;text&#x27;])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.instruct_list</td><td>use_llm,&nbsp;file_path,&nbsp;question_mapping,&nbsp;base_name,&nbsp;llm,&nbsp;file_details,&nbsp;questions,&nbsp;model_config,&nbsp;instruct_list</td></tr><tr><td>Variables&nbsp;defined&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>class&nbsp;DatasetGenerator:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;JSON&nbsp;formatted&nbsp;dictionary&nbsp;outputs&nbsp;for&nbsp;a&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Attributes:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict[str,&nbsp;Any]):&nbsp;Details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Questions&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Storage&nbsp;for&nbsp;generated&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_mapping&nbsp;(Dict[str,&nbsp;str]):&nbsp;Mapping&nbsp;of&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;Flag&nbsp;indicating&nbsp;if&nbsp;a&nbsp;language&nbsp;model&nbsp;should&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;format&nbsp;for&nbsp;querying&nbsp;the&nbsp;language&nbsp;model.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Methods:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;and&nbsp;return&nbsp;unique&nbsp;elements&nbsp;from&nbsp;an&nbsp;input&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_to_list(list_to_update:&nbsp;List[Dict],&nbsp;query:&nbsp;str,&nbsp;response:&nbsp;str,&nbsp;additional_field=None)&nbsp;-&gt;&nbsp;List[Dict]:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct&nbsp;list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_response_from_llm(query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question_type(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;related&nbsp;to&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generate()&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_path&nbsp;=&nbsp;file_path<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_details&nbsp;=&nbsp;file_details<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.base_name&nbsp;=&nbsp;base_name<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.questions&nbsp;=&nbsp;questions<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.model_config&nbsp;=&nbsp;model_config<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.llm&nbsp;=&nbsp;model_config[&#x27;model&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.llm&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list&nbsp;=&nbsp;[]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.question_mapping&nbsp;=&nbsp;{&#x27;file&#x27;:&nbsp;&#x27;file&#x27;,&nbsp;&#x27;function&#x27;:&nbsp;&#x27;functions&#x27;,&nbsp;&#x27;class&#x27;:&nbsp;&#x27;classes&#x27;,&nbsp;&#x27;method&#x27;:&nbsp;&#x27;classes&#x27;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;input&nbsp;string&nbsp;and&nbsp;return&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;(str):&nbsp;The&nbsp;input&nbsp;string&nbsp;to&nbsp;be&nbsp;cleaned.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;cleaned&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleaned_elements&nbsp;=&nbsp;set((re.sub(&#x27;[^\\w\\-_&gt;\\s:/.]&#x27;,&nbsp;&#x27;&#x27;,&nbsp;element.strip())&nbsp;for&nbsp;element&nbsp;in&nbsp;re.sub(&#x27;\\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split(&#x27;,&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(cleaned_elements)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_response_from_llm(self,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;generated&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&#x27;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(full_context,&nbsp;prompt,&nbsp;context_size)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_context_length&nbsp;=&nbsp;self.model_config[&#x27;inference_model&#x27;][&#x27;model_params&#x27;][&#x27;context_length&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excluded_instructions&nbsp;=&nbsp;[&#x27;Call&nbsp;code&nbsp;graph&#x27;,&nbsp;&#x27;Docstring&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_qa&nbsp;=&nbsp;&#x27;\n&#x27;.join([f&quot;Q:&nbsp;{item[&#x27;instruction&#x27;]}&nbsp;\nA:&nbsp;{item[&#x27;output&#x27;]}&quot;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list&nbsp;if&nbsp;not&nbsp;any((item[&#x27;instruction&#x27;].startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions))])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_strategies&nbsp;=&nbsp;[lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(context)&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(self.file_details[&#x27;file_info&#x27;][&#x27;file_code_simplified&#x27;])&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;self.get_string_from_info(self.file_details[&#x27;file_info&#x27;],&nbsp;&#x27;file_summary&#x27;),&nbsp;lambda:&nbsp;&#x27;&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;strategy&nbsp;in&nbsp;context_strategies:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;strategy()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context,&nbsp;prompt,&nbsp;context_size&nbsp;=&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context_size&nbsp;&lt;=&nbsp;0.7&nbsp;*&nbsp;max_context_length:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(f&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response,&nbsp;adjust&nbsp;context_length&nbsp;&gt;&nbsp;{math.ceil(context_size&nbsp;/&nbsp;0.7)}&nbsp;in&nbsp;py2dataset_model_config.yaml&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;re.sub(&#x27;\\n\\s*\\n&#x27;,&nbsp;&#x27;\n\n&#x27;,&nbsp;self.llm(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Response:&nbsp;{response}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;response<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;the&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;(Dict):&nbsp;The&nbsp;information&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id.endswith(&#x27;code_graph&#x27;)&nbsp;or&nbsp;question_id.endswith(&#x27;docstring&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;info.get(question_id,&nbsp;{})<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.get_response_from_llm(query,&nbsp;context)&nbsp;if&nbsp;self.use_llm&nbsp;and&nbsp;question_id.endswith(&#x27;purpose&#x27;)&nbsp;else&nbsp;self.clean_and_get_unique_elements(str(info.get(question_id,&nbsp;&#x27;&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response&nbsp;and&nbsp;response&nbsp;!=&nbsp;&#x27;None&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_str&nbsp;=&nbsp;str(response).strip()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response_str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list.append({&#x27;instruction&#x27;:&nbsp;query,&nbsp;&#x27;input&#x27;:&nbsp;context,&nbsp;&#x27;output&#x27;:&nbsp;response_str})<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_string_from_info(info,&nbsp;item_type):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;info[item_type]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;items&nbsp;=&nbsp;[item.strip()&nbsp;for&nbsp;item&nbsp;in&nbsp;str(info[item_type]).split(&#x27;,&#x27;)&nbsp;if&nbsp;item]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(items)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question_type(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_text&nbsp;(str):&nbsp;The&nbsp;text&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;question_type&nbsp;==&nbsp;&#x27;method&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;class_name,&nbsp;class_info&nbsp;in&nbsp;self.file_details[&#x27;classes&#x27;].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key,&nbsp;method_info&nbsp;in&nbsp;class_info.items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key.startswith(&#x27;class_method_&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method_name&nbsp;=&nbsp;key[len(&#x27;class_method_&#x27;):]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;method_info[&#x27;method_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{&#x27;class_name&#x27;:&nbsp;class_name,&nbsp;&#x27;method_name&#x27;:&nbsp;method_name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;method_info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;name,&nbsp;info&nbsp;in&nbsp;self.file_details[self.question_mapping[question_type]].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;info[f&#x27;{question_type}_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{f&#x27;{question_type}_name&#x27;:&nbsp;name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id&nbsp;==&nbsp;f&#x27;{question_type}_purpose&#x27;&nbsp;and&nbsp;self.use_llm:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variables_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_variables&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputs_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_inputs&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combined_string&nbsp;=&nbsp;&#x27;,&nbsp;&#x27;.join([s&nbsp;for&nbsp;s&nbsp;in&nbsp;[variables_string,&nbsp;inputs_string]&nbsp;if&nbsp;s])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_variables&#x27;]&nbsp;=&nbsp;self.clean_and_get_unique_elements(combined_string)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_methods&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_methods&#x27;]&nbsp;=&nbsp;methods_string<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;generate(self)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;The&nbsp;generated&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;question&nbsp;in&nbsp;self.questions:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question_type(question[&#x27;type&#x27;],&nbsp;question[&#x27;id&#x27;],&nbsp;question[&#x27;text&#x27;])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.instruct_list</td><td>combined_string,&nbsp;mapping,&nbsp;response_str,&nbsp;variables_string,&nbsp;excluded_instructions,&nbsp;context_size,&nbsp;context,&nbsp;items,&nbsp;methods_string,&nbsp;method_name,&nbsp;max_context_length,&nbsp;code_qa,&nbsp;context_strategies,&nbsp;response,&nbsp;query,&nbsp;inputs_string,&nbsp;prompt,&nbsp;full_context,&nbsp;info,&nbsp;cleaned_elements</td></tr><tr><td>Inputs&nbsp;to&nbsp;method:&nbsp;&#x27;__init__&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;__init__(self,&nbsp;file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;self.file_path&nbsp;=&nbsp;file_path<br/>&nbsp;&nbsp;&nbsp;&nbsp;self.file_details&nbsp;=&nbsp;file_details<br/>&nbsp;&nbsp;&nbsp;&nbsp;self.base_name&nbsp;=&nbsp;base_name<br/>&nbsp;&nbsp;&nbsp;&nbsp;self.questions&nbsp;=&nbsp;questions<br/>&nbsp;&nbsp;&nbsp;&nbsp;self.model_config&nbsp;=&nbsp;model_config<br/>&nbsp;&nbsp;&nbsp;&nbsp;self.llm&nbsp;=&nbsp;model_config[&#x27;model&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.llm&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list&nbsp;=&nbsp;[]<br/>&nbsp;&nbsp;&nbsp;&nbsp;self.question_mapping&nbsp;=&nbsp;{&#x27;file&#x27;:&nbsp;&#x27;file&#x27;,&nbsp;&#x27;function&#x27;:&nbsp;&#x27;functions&#x27;,&nbsp;&#x27;class&#x27;:&nbsp;&#x27;classes&#x27;,&nbsp;&#x27;method&#x27;:&nbsp;&#x27;classes&#x27;}</td><td>file_path,&nbsp;base_name,&nbsp;self,&nbsp;file_details,&nbsp;questions,&nbsp;model_config</td></tr><tr><td>Inputs&nbsp;to&nbsp;method:&nbsp;&#x27;clean_and_get_unique_elements&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>@staticmethod<br/>def&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;input&nbsp;string&nbsp;and&nbsp;return&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;(str):&nbsp;The&nbsp;input&nbsp;string&nbsp;to&nbsp;be&nbsp;cleaned.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;cleaned&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;cleaned_elements&nbsp;=&nbsp;set((re.sub(&#x27;[^\\w\\-_&gt;\\s:/.]&#x27;,&nbsp;&#x27;&#x27;,&nbsp;element.strip())&nbsp;for&nbsp;element&nbsp;in&nbsp;re.sub(&#x27;\\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split(&#x27;,&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(cleaned_elements)</td><td>input_str</td></tr><tr><td>Inputs&nbsp;to&nbsp;method:&nbsp;&#x27;get_response_from_llm&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;get_response_from_llm(self,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;generated&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&#x27;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(full_context,&nbsp;prompt,&nbsp;context_size)<br/>&nbsp;&nbsp;&nbsp;&nbsp;max_context_length&nbsp;=&nbsp;self.model_config[&#x27;inference_model&#x27;][&#x27;model_params&#x27;][&#x27;context_length&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;excluded_instructions&nbsp;=&nbsp;[&#x27;Call&nbsp;code&nbsp;graph&#x27;,&nbsp;&#x27;Docstring&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;code_qa&nbsp;=&nbsp;&#x27;\n&#x27;.join([f&quot;Q:&nbsp;{item[&#x27;instruction&#x27;]}&nbsp;\nA:&nbsp;{item[&#x27;output&#x27;]}&quot;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list&nbsp;if&nbsp;not&nbsp;any((item[&#x27;instruction&#x27;].startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions))])<br/>&nbsp;&nbsp;&nbsp;&nbsp;context_strategies&nbsp;=&nbsp;[lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(context)&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(self.file_details[&#x27;file_info&#x27;][&#x27;file_code_simplified&#x27;])&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;self.get_string_from_info(self.file_details[&#x27;file_info&#x27;],&nbsp;&#x27;file_summary&#x27;),&nbsp;lambda:&nbsp;&#x27;&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;strategy&nbsp;in&nbsp;context_strategies:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;strategy()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context,&nbsp;prompt,&nbsp;context_size&nbsp;=&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context_size&nbsp;&lt;=&nbsp;0.7&nbsp;*&nbsp;max_context_length:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(f&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response,&nbsp;adjust&nbsp;context_length&nbsp;&gt;&nbsp;{math.ceil(context_size&nbsp;/&nbsp;0.7)}&nbsp;in&nbsp;py2dataset_model_config.yaml&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;try:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;re.sub(&#x27;\\n\\s*\\n&#x27;,&nbsp;&#x27;\n\n&#x27;,&nbsp;self.llm(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Response:&nbsp;{response}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;except:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;response</td><td>query,&nbsp;context,&nbsp;self</td></tr><tr><td>Inputs&nbsp;to&nbsp;method:&nbsp;&#x27;get_context_and_prompt&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&#x27;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(full_context,&nbsp;prompt,&nbsp;context_size)</td><td>query,&nbsp;code_qa,&nbsp;context</td></tr><tr><td>Inputs&nbsp;to&nbsp;method:&nbsp;&#x27;process_question&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;process_question(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;the&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;(Dict):&nbsp;The&nbsp;information&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id.endswith(&#x27;code_graph&#x27;)&nbsp;or&nbsp;question_id.endswith(&#x27;docstring&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;info.get(question_id,&nbsp;{})<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.get_response_from_llm(query,&nbsp;context)&nbsp;if&nbsp;self.use_llm&nbsp;and&nbsp;question_id.endswith(&#x27;purpose&#x27;)&nbsp;else&nbsp;self.clean_and_get_unique_elements(str(info.get(question_id,&nbsp;&#x27;&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response&nbsp;and&nbsp;response&nbsp;!=&nbsp;&#x27;None&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_str&nbsp;=&nbsp;str(response).strip()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response_str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list.append({&#x27;instruction&#x27;:&nbsp;query,&nbsp;&#x27;input&#x27;:&nbsp;context,&nbsp;&#x27;output&#x27;:&nbsp;response_str})</td><td>context,&nbsp;query,&nbsp;self,&nbsp;info,&nbsp;question_type,&nbsp;question_id</td></tr><tr><td>Inputs&nbsp;to&nbsp;method:&nbsp;&#x27;get_string_from_info&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>@staticmethod<br/>def&nbsp;get_string_from_info(info,&nbsp;item_type):<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;info[item_type]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;items&nbsp;=&nbsp;[item.strip()&nbsp;for&nbsp;item&nbsp;in&nbsp;str(info[item_type]).split(&#x27;,&#x27;)&nbsp;if&nbsp;item]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(items)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;</td><td>info,&nbsp;item_type</td></tr><tr><td>Inputs&nbsp;to&nbsp;method:&nbsp;&#x27;process_question_type&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;process_question_type(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_text&nbsp;(str):&nbsp;The&nbsp;text&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;question_type&nbsp;==&nbsp;&#x27;method&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;class_name,&nbsp;class_info&nbsp;in&nbsp;self.file_details[&#x27;classes&#x27;].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key,&nbsp;method_info&nbsp;in&nbsp;class_info.items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key.startswith(&#x27;class_method_&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method_name&nbsp;=&nbsp;key[len(&#x27;class_method_&#x27;):]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;method_info[&#x27;method_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{&#x27;class_name&#x27;:&nbsp;class_name,&nbsp;&#x27;method_name&#x27;:&nbsp;method_name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;method_info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;name,&nbsp;info&nbsp;in&nbsp;self.file_details[self.question_mapping[question_type]].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;info[f&#x27;{question_type}_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{f&#x27;{question_type}_name&#x27;:&nbsp;name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id&nbsp;==&nbsp;f&#x27;{question_type}_purpose&#x27;&nbsp;and&nbsp;self.use_llm:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variables_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_variables&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputs_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_inputs&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combined_string&nbsp;=&nbsp;&#x27;,&nbsp;&#x27;.join([s&nbsp;for&nbsp;s&nbsp;in&nbsp;[variables_string,&nbsp;inputs_string]&nbsp;if&nbsp;s])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_variables&#x27;]&nbsp;=&nbsp;self.clean_and_get_unique_elements(combined_string)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_methods&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_methods&#x27;]&nbsp;=&nbsp;methods_string<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)</td><td>question_type,&nbsp;question_id,&nbsp;question_text,&nbsp;self</td></tr><tr><td>Inputs&nbsp;to&nbsp;method:&nbsp;&#x27;generate&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;generate(self)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;The&nbsp;generated&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;question&nbsp;in&nbsp;self.questions:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question_type(question[&#x27;type&#x27;],&nbsp;question[&#x27;id&#x27;],&nbsp;question[&#x27;text&#x27;])<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.instruct_list</td><td>self</td></tr><tr><td>Docstring&nbsp;of&nbsp;method:&nbsp;&#x27;clean_and_get_unique_elements&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>@staticmethod<br/>def&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;input&nbsp;string&nbsp;and&nbsp;return&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;(str):&nbsp;The&nbsp;input&nbsp;string&nbsp;to&nbsp;be&nbsp;cleaned.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;cleaned&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;cleaned_elements&nbsp;=&nbsp;set((re.sub(&#x27;[^\\w\\-_&gt;\\s:/.]&#x27;,&nbsp;&#x27;&#x27;,&nbsp;element.strip())&nbsp;for&nbsp;element&nbsp;in&nbsp;re.sub(&#x27;\\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split(&#x27;,&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(cleaned_elements)</td><td>Clean&nbsp;input&nbsp;string&nbsp;and&nbsp;return&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;(str):&nbsp;The&nbsp;input&nbsp;string&nbsp;to&nbsp;be&nbsp;cleaned.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;cleaned&nbsp;string.</td></tr><tr><td>Docstring&nbsp;of&nbsp;method:&nbsp;&#x27;get_response_from_llm&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;get_response_from_llm(self,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;generated&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&#x27;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(full_context,&nbsp;prompt,&nbsp;context_size)<br/>&nbsp;&nbsp;&nbsp;&nbsp;max_context_length&nbsp;=&nbsp;self.model_config[&#x27;inference_model&#x27;][&#x27;model_params&#x27;][&#x27;context_length&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;excluded_instructions&nbsp;=&nbsp;[&#x27;Call&nbsp;code&nbsp;graph&#x27;,&nbsp;&#x27;Docstring&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;code_qa&nbsp;=&nbsp;&#x27;\n&#x27;.join([f&quot;Q:&nbsp;{item[&#x27;instruction&#x27;]}&nbsp;\nA:&nbsp;{item[&#x27;output&#x27;]}&quot;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list&nbsp;if&nbsp;not&nbsp;any((item[&#x27;instruction&#x27;].startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions))])<br/>&nbsp;&nbsp;&nbsp;&nbsp;context_strategies&nbsp;=&nbsp;[lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(context)&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(self.file_details[&#x27;file_info&#x27;][&#x27;file_code_simplified&#x27;])&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;self.get_string_from_info(self.file_details[&#x27;file_info&#x27;],&nbsp;&#x27;file_summary&#x27;),&nbsp;lambda:&nbsp;&#x27;&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;strategy&nbsp;in&nbsp;context_strategies:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;strategy()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context,&nbsp;prompt,&nbsp;context_size&nbsp;=&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context_size&nbsp;&lt;=&nbsp;0.7&nbsp;*&nbsp;max_context_length:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(f&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response,&nbsp;adjust&nbsp;context_length&nbsp;&gt;&nbsp;{math.ceil(context_size&nbsp;/&nbsp;0.7)}&nbsp;in&nbsp;py2dataset_model_config.yaml&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;try:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;re.sub(&#x27;\\n\\s*\\n&#x27;,&nbsp;&#x27;\n\n&#x27;,&nbsp;self.llm(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Response:&nbsp;{response}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;except:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;response</td><td>Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;generated&nbsp;response.</td></tr><tr><td>Docstring&nbsp;of&nbsp;method:&nbsp;&#x27;process_question&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;process_question(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;the&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;(Dict):&nbsp;The&nbsp;information&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id.endswith(&#x27;code_graph&#x27;)&nbsp;or&nbsp;question_id.endswith(&#x27;docstring&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;info.get(question_id,&nbsp;{})<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.get_response_from_llm(query,&nbsp;context)&nbsp;if&nbsp;self.use_llm&nbsp;and&nbsp;question_id.endswith(&#x27;purpose&#x27;)&nbsp;else&nbsp;self.clean_and_get_unique_elements(str(info.get(question_id,&nbsp;&#x27;&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response&nbsp;and&nbsp;response&nbsp;!=&nbsp;&#x27;None&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_str&nbsp;=&nbsp;str(response).strip()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response_str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list.append({&#x27;instruction&#x27;:&nbsp;query,&nbsp;&#x27;input&#x27;:&nbsp;context,&nbsp;&#x27;output&#x27;:&nbsp;response_str})</td><td>Process&nbsp;question&nbsp;and&nbsp;add&nbsp;the&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;(Dict):&nbsp;The&nbsp;information&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None</td></tr><tr><td>Docstring&nbsp;of&nbsp;method:&nbsp;&#x27;process_question_type&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;process_question_type(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_text&nbsp;(str):&nbsp;The&nbsp;text&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;question_type&nbsp;==&nbsp;&#x27;method&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;class_name,&nbsp;class_info&nbsp;in&nbsp;self.file_details[&#x27;classes&#x27;].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key,&nbsp;method_info&nbsp;in&nbsp;class_info.items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key.startswith(&#x27;class_method_&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method_name&nbsp;=&nbsp;key[len(&#x27;class_method_&#x27;):]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;method_info[&#x27;method_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{&#x27;class_name&#x27;:&nbsp;class_name,&nbsp;&#x27;method_name&#x27;:&nbsp;method_name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;method_info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;name,&nbsp;info&nbsp;in&nbsp;self.file_details[self.question_mapping[question_type]].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;info[f&#x27;{question_type}_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{f&#x27;{question_type}_name&#x27;:&nbsp;name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id&nbsp;==&nbsp;f&#x27;{question_type}_purpose&#x27;&nbsp;and&nbsp;self.use_llm:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variables_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_variables&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputs_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_inputs&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combined_string&nbsp;=&nbsp;&#x27;,&nbsp;&#x27;.join([s&nbsp;for&nbsp;s&nbsp;in&nbsp;[variables_string,&nbsp;inputs_string]&nbsp;if&nbsp;s])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_variables&#x27;]&nbsp;=&nbsp;self.clean_and_get_unique_elements(combined_string)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_methods&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_methods&#x27;]&nbsp;=&nbsp;methods_string<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)</td><td>Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_text&nbsp;(str):&nbsp;The&nbsp;text&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None</td></tr><tr><td>Docstring&nbsp;of&nbsp;method:&nbsp;&#x27;generate&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;generate(self)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;The&nbsp;generated&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;question&nbsp;in&nbsp;self.questions:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question_type(question[&#x27;type&#x27;],&nbsp;question[&#x27;id&#x27;],&nbsp;question[&#x27;text&#x27;])<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.instruct_list</td><td>Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;The&nbsp;generated&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.</td></tr><tr><td>Calls&nbsp;made&nbsp;in&nbsp;method:&nbsp;&#x27;clean_and_get_unique_elements&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>@staticmethod<br/>def&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;input&nbsp;string&nbsp;and&nbsp;return&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;(str):&nbsp;The&nbsp;input&nbsp;string&nbsp;to&nbsp;be&nbsp;cleaned.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;cleaned&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;cleaned_elements&nbsp;=&nbsp;set((re.sub(&#x27;[^\\w\\-_&gt;\\s:/.]&#x27;,&nbsp;&#x27;&#x27;,&nbsp;element.strip())&nbsp;for&nbsp;element&nbsp;in&nbsp;re.sub(&#x27;\\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split(&#x27;,&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(cleaned_elements)</td><td>,&nbsp;.join,&nbsp;element.strip,&nbsp;re.subs,&nbsp;input_str.split,&nbsp;set,&nbsp;&nbsp;,&nbsp;re.sub</td></tr><tr><td>Calls&nbsp;made&nbsp;in&nbsp;method:&nbsp;&#x27;get_response_from_llm&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;get_response_from_llm(self,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;generated&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&#x27;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(full_context,&nbsp;prompt,&nbsp;context_size)<br/>&nbsp;&nbsp;&nbsp;&nbsp;max_context_length&nbsp;=&nbsp;self.model_config[&#x27;inference_model&#x27;][&#x27;model_params&#x27;][&#x27;context_length&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;excluded_instructions&nbsp;=&nbsp;[&#x27;Call&nbsp;code&nbsp;graph&#x27;,&nbsp;&#x27;Docstring&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;code_qa&nbsp;=&nbsp;&#x27;\n&#x27;.join([f&quot;Q:&nbsp;{item[&#x27;instruction&#x27;]}&nbsp;\nA:&nbsp;{item[&#x27;output&#x27;]}&quot;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list&nbsp;if&nbsp;not&nbsp;any((item[&#x27;instruction&#x27;].startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions))])<br/>&nbsp;&nbsp;&nbsp;&nbsp;context_strategies&nbsp;=&nbsp;[lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(context)&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(self.file_details[&#x27;file_info&#x27;][&#x27;file_code_simplified&#x27;])&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;self.get_string_from_info(self.file_details[&#x27;file_info&#x27;],&nbsp;&#x27;file_summary&#x27;),&nbsp;lambda:&nbsp;&#x27;&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;strategy&nbsp;in&nbsp;context_strategies:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;strategy()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context,&nbsp;prompt,&nbsp;context_size&nbsp;=&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context_size&nbsp;&lt;=&nbsp;0.7&nbsp;*&nbsp;max_context_length:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(f&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response,&nbsp;adjust&nbsp;context_length&nbsp;&gt;&nbsp;{math.ceil(context_size&nbsp;/&nbsp;0.7)}&nbsp;in&nbsp;py2dataset_model_config.yaml&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;try:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;re.sub(&#x27;\\n\\s*\\n&#x27;,&nbsp;&#x27;\n\n&#x27;,&nbsp;self.llm(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Response:&nbsp;{response}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;except:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;response</td><td>iteminstruction.startswith,&nbsp;self.get_string_from_info,&nbsp;self.model_configprompt_template.format,&nbsp;strategy,&nbsp;logging.info,&nbsp;logger.error,&nbsp;self.llm,&nbsp;str,&nbsp;get_context_and_prompt,&nbsp;n.join,&nbsp;len,&nbsp;re.sub,&nbsp;any,&nbsp;math.ceil,&nbsp;self.llm.tokenize</td></tr><tr><td>Calls&nbsp;made&nbsp;in&nbsp;method:&nbsp;&#x27;get_context_and_prompt&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&#x27;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(full_context,&nbsp;prompt,&nbsp;context_size)</td><td>len,&nbsp;self.llm.tokenize,&nbsp;self.model_configprompt_template.format</td></tr><tr><td>Calls&nbsp;made&nbsp;in&nbsp;method:&nbsp;&#x27;process_question&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;process_question(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;the&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;(Dict):&nbsp;The&nbsp;information&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id.endswith(&#x27;code_graph&#x27;)&nbsp;or&nbsp;question_id.endswith(&#x27;docstring&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;info.get(question_id,&nbsp;{})<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.get_response_from_llm(query,&nbsp;context)&nbsp;if&nbsp;self.use_llm&nbsp;and&nbsp;question_id.endswith(&#x27;purpose&#x27;)&nbsp;else&nbsp;self.clean_and_get_unique_elements(str(info.get(question_id,&nbsp;&#x27;&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response&nbsp;and&nbsp;response&nbsp;!=&nbsp;&#x27;None&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_str&nbsp;=&nbsp;str(response).strip()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response_str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list.append({&#x27;instruction&#x27;:&nbsp;query,&nbsp;&#x27;input&#x27;:&nbsp;context,&nbsp;&#x27;output&#x27;:&nbsp;response_str})</td><td>strresponse.strip,&nbsp;str,&nbsp;self.get_response_from_llm,&nbsp;self.clean_and_get_unique_elements,&nbsp;info.get,&nbsp;question_id.endswith,&nbsp;self.instruct_list.append</td></tr><tr><td>Calls&nbsp;made&nbsp;in&nbsp;method:&nbsp;&#x27;get_string_from_info&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>@staticmethod<br/>def&nbsp;get_string_from_info(info,&nbsp;item_type):<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;info[item_type]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;items&nbsp;=&nbsp;[item.strip()&nbsp;for&nbsp;item&nbsp;in&nbsp;str(info[item_type]).split(&#x27;,&#x27;)&nbsp;if&nbsp;item]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(items)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;</td><td>,&nbsp;.join,&nbsp;str,&nbsp;strinfoitem_type.split,&nbsp;item.strip</td></tr><tr><td>Calls&nbsp;made&nbsp;in&nbsp;method:&nbsp;&#x27;process_question_type&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;process_question_type(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_text&nbsp;(str):&nbsp;The&nbsp;text&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;question_type&nbsp;==&nbsp;&#x27;method&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;class_name,&nbsp;class_info&nbsp;in&nbsp;self.file_details[&#x27;classes&#x27;].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key,&nbsp;method_info&nbsp;in&nbsp;class_info.items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key.startswith(&#x27;class_method_&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method_name&nbsp;=&nbsp;key[len(&#x27;class_method_&#x27;):]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;method_info[&#x27;method_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{&#x27;class_name&#x27;:&nbsp;class_name,&nbsp;&#x27;method_name&#x27;:&nbsp;method_name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;method_info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;name,&nbsp;info&nbsp;in&nbsp;self.file_details[self.question_mapping[question_type]].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;info[f&#x27;{question_type}_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{f&#x27;{question_type}_name&#x27;:&nbsp;name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id&nbsp;==&nbsp;f&#x27;{question_type}_purpose&#x27;&nbsp;and&nbsp;self.use_llm:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variables_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_variables&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputs_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_inputs&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combined_string&nbsp;=&nbsp;&#x27;,&nbsp;&#x27;.join([s&nbsp;for&nbsp;s&nbsp;in&nbsp;[variables_string,&nbsp;inputs_string]&nbsp;if&nbsp;s])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_variables&#x27;]&nbsp;=&nbsp;self.clean_and_get_unique_elements(combined_string)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_methods&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_methods&#x27;]&nbsp;=&nbsp;methods_string<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)</td><td>,&nbsp;.join,&nbsp;self.get_string_from_info,&nbsp;class_info.items,&nbsp;question_text.format,&nbsp;len,&nbsp;self.file_detailsself.question_mappingquestion_type.items,&nbsp;self.clean_and_get_unique_elements,&nbsp;key.startswith,&nbsp;self.process_question,&nbsp;self.file_detailsclasses.items</td></tr><tr><td>Calls&nbsp;made&nbsp;in&nbsp;method:&nbsp;&#x27;generate&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;generate(self)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;The&nbsp;generated&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;question&nbsp;in&nbsp;self.questions:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question_type(question[&#x27;type&#x27;],&nbsp;question[&#x27;id&#x27;],&nbsp;question[&#x27;text&#x27;])<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.instruct_list</td><td>self.process_question_type</td></tr><tr><td>Returns&nbsp;from&nbsp;method:&nbsp;&#x27;clean_and_get_unique_elements&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>@staticmethod<br/>def&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;input&nbsp;string&nbsp;and&nbsp;return&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;(str):&nbsp;The&nbsp;input&nbsp;string&nbsp;to&nbsp;be&nbsp;cleaned.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;cleaned&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;cleaned_elements&nbsp;=&nbsp;set((re.sub(&#x27;[^\\w\\-_&gt;\\s:/.]&#x27;,&nbsp;&#x27;&#x27;,&nbsp;element.strip())&nbsp;for&nbsp;element&nbsp;in&nbsp;re.sub(&#x27;\\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split(&#x27;,&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(cleaned_elements)</td><td>,&nbsp;.joincleaned_elements</td></tr><tr><td>Returns&nbsp;from&nbsp;method:&nbsp;&#x27;get_response_from_llm&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;get_response_from_llm(self,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;generated&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&#x27;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(full_context,&nbsp;prompt,&nbsp;context_size)<br/>&nbsp;&nbsp;&nbsp;&nbsp;max_context_length&nbsp;=&nbsp;self.model_config[&#x27;inference_model&#x27;][&#x27;model_params&#x27;][&#x27;context_length&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;excluded_instructions&nbsp;=&nbsp;[&#x27;Call&nbsp;code&nbsp;graph&#x27;,&nbsp;&#x27;Docstring&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;code_qa&nbsp;=&nbsp;&#x27;\n&#x27;.join([f&quot;Q:&nbsp;{item[&#x27;instruction&#x27;]}&nbsp;\nA:&nbsp;{item[&#x27;output&#x27;]}&quot;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list&nbsp;if&nbsp;not&nbsp;any((item[&#x27;instruction&#x27;].startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions))])<br/>&nbsp;&nbsp;&nbsp;&nbsp;context_strategies&nbsp;=&nbsp;[lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(context)&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(self.file_details[&#x27;file_info&#x27;][&#x27;file_code_simplified&#x27;])&nbsp;+&nbsp;&#x27;\n```&#x27;,&nbsp;lambda:&nbsp;self.get_string_from_info(self.file_details[&#x27;file_info&#x27;],&nbsp;&#x27;file_summary&#x27;),&nbsp;lambda:&nbsp;&#x27;&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;strategy&nbsp;in&nbsp;context_strategies:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;strategy()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context,&nbsp;prompt,&nbsp;context_size&nbsp;=&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context_size&nbsp;&lt;=&nbsp;0.7&nbsp;*&nbsp;max_context_length:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(f&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response,&nbsp;adjust&nbsp;context_length&nbsp;&gt;&nbsp;{math.ceil(context_size&nbsp;/&nbsp;0.7)}&nbsp;in&nbsp;py2dataset_model_config.yaml&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;try:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;re.sub(&#x27;\\n\\s*\\n&#x27;,&nbsp;&#x27;\n\n&#x27;,&nbsp;self.llm(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Response:&nbsp;{response}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;except:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;response</td><td>response,&nbsp;,&nbsp;context_size,&nbsp;prompt,&nbsp;full_context</td></tr><tr><td>Returns&nbsp;from&nbsp;method:&nbsp;&#x27;get_context_and_prompt&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&#x27;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(full_context,&nbsp;prompt,&nbsp;context_size)</td><td>context_size,&nbsp;prompt,&nbsp;full_context</td></tr><tr><td>Returns&nbsp;from&nbsp;method:&nbsp;&#x27;get_string_from_info&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>@staticmethod<br/>def&nbsp;get_string_from_info(info,&nbsp;item_type):<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;info[item_type]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;items&nbsp;=&nbsp;[item.strip()&nbsp;for&nbsp;item&nbsp;in&nbsp;str(info[item_type]).split(&#x27;,&#x27;)&nbsp;if&nbsp;item]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(items)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;</td><td>,&nbsp;.joinitems</td></tr><tr><td>Returns&nbsp;from&nbsp;method:&nbsp;&#x27;generate&#x27;&nbsp;in&nbsp;class:&nbsp;&#x27;DatasetGenerator&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;?</td><td>def&nbsp;generate(self)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;The&nbsp;generated&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;question&nbsp;in&nbsp;self.questions:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question_type(question[&#x27;type&#x27;],&nbsp;question[&#x27;id&#x27;],&nbsp;question[&#x27;text&#x27;])<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.instruct_list</td><td>self.instruct_list</td></tr><tr><td>1)&nbsp;DESCRIBE&nbsp;the&nbsp;purpose&nbsp;and&nbsp;processing&nbsp;summary&nbsp;of&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.get_python_datasets.py&#x27;;&nbsp;2)&nbsp;PROVIDE&nbsp;an&nbsp;itemized&nbsp;and&nbsp;detailed&nbsp;description&nbsp;of&nbsp;each&nbsp;applicable&nbsp;function,&nbsp;class,&nbsp;and&nbsp;method;&nbsp;3)&nbsp;EXPLAIN&nbsp;what&nbsp;each&nbsp;input,&nbsp;output,&nbsp;and&nbsp;variable&nbsp;does&nbsp;in&nbsp;the&nbsp;code.</td><td>&quot;&quot;&quot;<br/>Generates&nbsp;JSON&nbsp;format&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions&nbsp;for&nbsp;a&nbsp;Python&nbsp;file<br/>Requirements:<br/>[req01]&nbsp;The&nbsp;`DatasetGenerator`&nbsp;class&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;Python&nbsp;file&nbsp;path&nbsp;(str),&nbsp;file&nbsp;details&nbsp;(Dict),&nbsp;base&nbsp;name&nbsp;(str),&nbsp;list&nbsp;of&nbsp;questions&nbsp;(List[Dict]),&nbsp;and&nbsp;model&nbsp;configuration&nbsp;(Dict)&nbsp;as&nbsp;input&nbsp;during&nbsp;instantiation.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Initialize&nbsp;and&nbsp;store&nbsp;the&nbsp;Python&nbsp;file&nbsp;path,&nbsp;file&nbsp;details,&nbsp;base&nbsp;name,&nbsp;list&nbsp;of&nbsp;questions,&nbsp;language&nbsp;model,&nbsp;and&nbsp;use_llm&nbsp;flag&nbsp;as&nbsp;class&nbsp;attributes.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Provide&nbsp;the&nbsp;`clean_and_get_unique_elements`&nbsp;method&nbsp;to&nbsp;clean&nbsp;an&nbsp;input&nbsp;string&nbsp;(str)&nbsp;and&nbsp;return&nbsp;a&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Provide&nbsp;the&nbsp;`get_response_from_llm`&nbsp;method&nbsp;to&nbsp;retrieve&nbsp;a&nbsp;response&nbsp;from&nbsp;the&nbsp;language&nbsp;model&nbsp;based&nbsp;on&nbsp;a&nbsp;query&nbsp;and&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Provide&nbsp;the&nbsp;`process_question`&nbsp;method&nbsp;to&nbsp;process&nbsp;a&nbsp;question&nbsp;based&nbsp;on&nbsp;its&nbsp;type&nbsp;and&nbsp;generate&nbsp;a&nbsp;corresponding&nbsp;response&nbsp;to&nbsp;add&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.&nbsp;Provide&nbsp;the&nbsp;`process_question_type`&nbsp;method&nbsp;to&nbsp;process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.&nbsp;Provide&nbsp;the&nbsp;`generate`&nbsp;method&nbsp;to&nbsp;generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;questions&nbsp;in&nbsp;the&nbsp;list&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h.&nbsp;Internally&nbsp;manage&nbsp;a&nbsp;question&nbsp;mapping&nbsp;to&nbsp;correlate&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/><br/>[req02]&nbsp;The&nbsp;`get_python_datasets`&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;Python&nbsp;file&nbsp;path&nbsp;(str),&nbsp;file&nbsp;details&nbsp;(Dict),&nbsp;base&nbsp;name&nbsp;(str),&nbsp;list&nbsp;of&nbsp;questions&nbsp;(List[Dict]),&nbsp;and&nbsp;model&nbsp;configuration&nbsp;(Dict)&nbsp;as&nbsp;input.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Instantiate&nbsp;an&nbsp;object&nbsp;of&nbsp;the&nbsp;`DatasetGenerator`&nbsp;class&nbsp;using&nbsp;the&nbsp;provided&nbsp;input.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions&nbsp;using&nbsp;the&nbsp;`generate`&nbsp;method&nbsp;of&nbsp;the&nbsp;`DatasetGenerator`&nbsp;instance.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Return&nbsp;the&nbsp;generated&nbsp;`instruct_list`.<br/>&quot;&quot;&quot;<br/>import&nbsp;logging<br/>import&nbsp;re<br/>import&nbsp;math<br/>from&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List,&nbsp;Tuple<br/><br/>#&nbsp;Set&nbsp;up&nbsp;logging<br/>logging.basicConfig(<br/>&nbsp;&nbsp;&nbsp;&nbsp;format=&#x27;%(asctime)s&nbsp;-&nbsp;%(levelname)s&nbsp;-&nbsp;%(message)s&#x27;,&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;level=logging.INFO<br/>)<br/>logger&nbsp;=&nbsp;logging.getLogger(__name__)<br/><br/><br/>class&nbsp;DatasetGenerator:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;JSON&nbsp;formatted&nbsp;dictionary&nbsp;outputs&nbsp;for&nbsp;a&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Attributes:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict[str,&nbsp;Any]):&nbsp;Details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Questions&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Storage&nbsp;for&nbsp;generated&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_mapping&nbsp;(Dict[str,&nbsp;str]):&nbsp;Mapping&nbsp;of&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;Flag&nbsp;indicating&nbsp;if&nbsp;a&nbsp;language&nbsp;model&nbsp;should&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;format&nbsp;for&nbsp;querying&nbsp;the&nbsp;language&nbsp;model.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Methods:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;and&nbsp;return&nbsp;unique&nbsp;elements&nbsp;from&nbsp;an&nbsp;input&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_to_list(list_to_update:&nbsp;List[Dict],&nbsp;query:&nbsp;str,&nbsp;response:&nbsp;str,&nbsp;additional_field=None)&nbsp;-&gt;&nbsp;List[Dict]:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct&nbsp;list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_response_from_llm(query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question_type(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;related&nbsp;to&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generate()&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_path&nbsp;=&nbsp;file_path<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_details&nbsp;=&nbsp;file_details<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.base_name&nbsp;=&nbsp;base_name<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.questions&nbsp;=&nbsp;questions<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.model_config&nbsp;=&nbsp;model_config<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.llm&nbsp;=&nbsp;model_config[&#x27;model&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.llm&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list&nbsp;=&nbsp;[]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.question_mapping&nbsp;=&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;file&#x27;:&nbsp;&#x27;file&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;function&#x27;:&nbsp;&#x27;functions&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;class&#x27;:&nbsp;&#x27;classes&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x27;method&#x27;:&nbsp;&#x27;classes&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;input&nbsp;string&nbsp;and&nbsp;return&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;(str):&nbsp;The&nbsp;input&nbsp;string&nbsp;to&nbsp;be&nbsp;cleaned.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;cleaned&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleaned_elements&nbsp;=&nbsp;set(re.sub(r&#x27;[^\w\-_&gt;\s:/.]&#x27;,&nbsp;&#x27;&#x27;,&nbsp;element.strip())<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;element&nbsp;in&nbsp;re.sub(r&#x27;\s+&#x27;,&nbsp;&#x27;&nbsp;&#x27;,&nbsp;input_str).split(&#x27;,&#x27;))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(cleaned_elements)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_response_from_llm(self,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;generated&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context&nbsp;=&nbsp;f&quot;{context}\nCODE&nbsp;Q&nbsp;and&nbsp;A:\n{code_qa}&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;self.model_config[&#x27;prompt_template&#x27;].format(context=full_context,&nbsp;query=query)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;full_context,&nbsp;prompt,&nbsp;context_size<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_context_length&nbsp;=&nbsp;self.model_config[&#x27;inference_model&#x27;][&#x27;model_params&#x27;][&#x27;context_length&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excluded_instructions&nbsp;=&nbsp;[&quot;Call&nbsp;code&nbsp;graph&quot;,&nbsp;&quot;Docstring&quot;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_qa&nbsp;=&nbsp;&quot;\n&quot;.join([f&quot;Q:&nbsp;{item[&#x27;instruction&#x27;]}&nbsp;\nA:&nbsp;{item[&#x27;output&#x27;]}&quot;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list&nbsp;if&nbsp;not&nbsp;any(item[&#x27;instruction&#x27;].startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions)])<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;manage&nbsp;context&nbsp;length&nbsp;for&nbsp;LLM&nbsp;using&nbsp;different&nbsp;strategies&nbsp;starting&nbsp;with&nbsp;the&nbsp;longest&nbsp;and&nbsp;most&nbsp;comprehensive<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_strategies&nbsp;=&nbsp;[<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(context)&nbsp;+&nbsp;&#x27;\n```&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&#x27;```python\n&#x27;&nbsp;+&nbsp;str(self.file_details[&#x27;file_info&#x27;][&#x27;file_code_simplified&#x27;])&nbsp;+&nbsp;&#x27;\n```&#x27;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;self.get_string_from_info(self.file_details[&#x27;file_info&#x27;],&nbsp;&#x27;file_summary&#x27;),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;strategy&nbsp;in&nbsp;context_strategies:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;strategy()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_context,&nbsp;prompt,&nbsp;context_size&nbsp;=&nbsp;get_context_and_prompt(query,&nbsp;context,&nbsp;code_qa)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context_size&nbsp;&lt;=&nbsp;0.70&nbsp;*&nbsp;max_context_length:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(f&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response,&nbsp;adjust&nbsp;context_length&nbsp;&gt;&nbsp;{math.ceil(context_size/0.70)}&nbsp;in&nbsp;py2dataset_model_config.yaml&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;re.sub(r&#x27;\n\s*\n&#x27;,&nbsp;&#x27;\n\n&#x27;,&nbsp;self.llm(prompt))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Response:&nbsp;{response}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(&#x27;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;response<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;the&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;(Dict):&nbsp;The&nbsp;information&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id.endswith(&#x27;code_graph&#x27;)&nbsp;or&nbsp;question_id.endswith(&#x27;docstring&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;info.get(question_id,&nbsp;{})<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.get_response_from_llm(query,&nbsp;context)&nbsp;if&nbsp;self.use_llm&nbsp;and&nbsp;question_id.endswith(&#x27;purpose&#x27;)&nbsp;else&nbsp;self.clean_and_get_unique_elements(str(info.get(question_id,&nbsp;&#x27;&#x27;)))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response&nbsp;and&nbsp;response&nbsp;!=&nbsp;&#x27;None&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_str&nbsp;=&nbsp;str(response).strip()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response_str:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list.append({&#x27;instruction&#x27;:&nbsp;query,&nbsp;&#x27;input&#x27;:&nbsp;context,&nbsp;&#x27;output&#x27;:&nbsp;response_str})<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_string_from_info(info,&nbsp;item_type):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;info[item_type]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;items&nbsp;=&nbsp;[item.strip()&nbsp;for&nbsp;item&nbsp;in&nbsp;str(info[item_type]).split(&#x27;,&#x27;)&nbsp;if&nbsp;item]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;,&nbsp;&#x27;.join(items)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#x27;&#x27;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question_type(self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_text&nbsp;(str):&nbsp;The&nbsp;text&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;file&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&#x27;file_info&#x27;][&#x27;file_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;question_type&nbsp;==&nbsp;&#x27;method&#x27;:&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;class_name,&nbsp;class_info&nbsp;in&nbsp;self.file_details[&#x27;classes&#x27;].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key,&nbsp;method_info&nbsp;in&nbsp;class_info.items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key.startswith(&#x27;class_method_&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method_name&nbsp;=&nbsp;key[len(&#x27;class_method_&#x27;):]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;method_info[&#x27;method_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{&#x27;class_name&#x27;:&nbsp;class_name,&nbsp;&#x27;method_name&#x27;:&nbsp;method_name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;method_info)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:&nbsp;&nbsp;#&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;function&#x27;&nbsp;or&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;name,&nbsp;info&nbsp;in&nbsp;self.file_details[self.question_mapping[question_type]].items():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;info[f&#x27;{question_type}_code&#x27;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{f&#x27;{question_type}_name&#x27;:&nbsp;name}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id&nbsp;==&nbsp;f&#x27;{question_type}_purpose&#x27;&nbsp;and&nbsp;self.use_llm:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variables_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_variables&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputs_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_inputs&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combined_string&nbsp;=&nbsp;&#x27;,&nbsp;&#x27;.join([s&nbsp;for&nbsp;s&nbsp;in&nbsp;[variables_string,&nbsp;inputs_string]&nbsp;if&nbsp;s])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_variables&#x27;]&nbsp;=&nbsp;self.clean_and_get_unique_elements(combined_string)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;get&nbsp;methods&nbsp;to&nbsp;include&nbsp;in&nbsp;mapping&nbsp;for&nbsp;query<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&#x27;class&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods_string&nbsp;=&nbsp;self.get_string_from_info(info,&nbsp;f&#x27;{question_type}_methods&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&#x27;{question_type}_methods&#x27;]&nbsp;=&nbsp;methods_string<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;generate(self)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;The&nbsp;generated&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;question&nbsp;in&nbsp;self.questions:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question_type(question[&#x27;type&#x27;],&nbsp;question[&#x27;id&#x27;],&nbsp;question[&#x27;text&#x27;])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.instruct_list<br/><br/><br/>def&nbsp;get_python_datasets(file_path:&nbsp;str,&nbsp;file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;questions:&nbsp;List[Dict],&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;information&nbsp;from&nbsp;a&nbsp;Python&nbsp;file&nbsp;and&nbsp;return&nbsp;it&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict):&nbsp;The&nbsp;details&nbsp;of&nbsp;the&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;Python&nbsp;code&nbsp;filename.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict]):&nbsp;The&nbsp;list&nbsp;of&nbsp;questions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;Extracted&nbsp;information&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;generator&nbsp;=&nbsp;DatasetGenerator(file_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;generator.generate()<br/></td><td>The&nbsp;purpose&nbsp;of&nbsp;`py2dataset.get_python_datasets.py`&nbsp;is&nbsp;to&nbsp;generate&nbsp;JSON&nbsp;formatted&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions&nbsp;for&nbsp;a&nbsp;Python&nbsp;file&nbsp;using&nbsp;an&nbsp;AI&nbsp;language&nbsp;model.&nbsp;The&nbsp;code&nbsp;provides&nbsp;a&nbsp;class&nbsp;called&nbsp;`DatasetGenerator`&nbsp;that&nbsp;accepts&nbsp;a&nbsp;Python&nbsp;file&nbsp;path,&nbsp;file&nbsp;details,&nbsp;base&nbsp;name,&nbsp;list&nbsp;of&nbsp;questions,&nbsp;and&nbsp;model&nbsp;configuration&nbsp;as&nbsp;input&nbsp;during&nbsp;instantiation.&nbsp;It&nbsp;processes&nbsp;the&nbsp;questions&nbsp;based&nbsp;on&nbsp;their&nbsp;type&nbsp;(file,&nbsp;function,&nbsp;or&nbsp;class)&nbsp;and&nbsp;generates&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;using&nbsp;the&nbsp;provided&nbsp;language&nbsp;model.&nbsp;The&nbsp;generated&nbsp;responses&nbsp;are&nbsp;stored&nbsp;in&nbsp;an&nbsp;internal&nbsp;`instruct_list`&nbsp;attribute&nbsp;that&nbsp;can&nbsp;be&nbsp;returned&nbsp;by&nbsp;calling&nbsp;the&nbsp;`generate()`&nbsp;method.<br/><br/>1.&nbsp;Functions&nbsp;and&nbsp;Classes&nbsp;defined:&nbsp;<br/>Function&nbsp;-&nbsp;<br/>```python<br/>get_python_datasets(file_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;information&nbsp;from&nbsp;a&nbsp;Python&nbsp;file&nbsp;and&nbsp;return&nbsp;it&nbsp;in&nbsp;JSON&nbsp;format.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict):&nbsp;The&nbsp;details&nbsp;of&nbsp;the&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;Python&nbsp;code&nbsp;filename.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict]):&nbsp;The&nbsp;list&nbsp;of&nbsp;questions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;Extracted&nbsp;information&nbsp;in&nbsp;JSON&nbsp;format.<br/>```&nbsp;<br/>-&nbsp;`get_python_datasets`&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;is&nbsp;responsible&nbsp;for&nbsp;instantiating&nbsp;an&nbsp;instance&nbsp;of&nbsp;`DatasetGenerator`,&nbsp;managing&nbsp;and&nbsp;providing&nbsp;context&nbsp;information&nbsp;to&nbsp;be&nbsp;used,&nbsp;processing&nbsp;each&nbsp;question&nbsp;related&nbsp;to&nbsp;the&nbsp;Python&nbsp;file,&nbsp;functions,&nbsp;or&nbsp;classes,&nbsp;and&nbsp;generating&nbsp;responses&nbsp;using&nbsp;a&nbsp;language&nbsp;model.&nbsp;It&nbsp;returns&nbsp;the&nbsp;generated&nbsp;`instruct_list`.<br/><br/>Class&nbsp;-&nbsp;<br/>```python<br/>class&nbsp;DatasetGenerator:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;JSON&nbsp;formatted&nbsp;dictionary&nbsp;outputs&nbsp;for&nbsp;a&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Attributes:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict[str,&nbsp;Any]):&nbsp;Details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Questions&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Storage&nbsp;for&nbsp;generated&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_mapping&nbsp;(Dict[str,&nbsp;str]):&nbsp;Mapping&nbsp;of&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;Flag&nbsp;indicating&nbsp;if&nbsp;a&nbsp;language&nbsp;model&nbsp;should&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;for&nbsp;generating&nbsp;responses.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;format&nbsp;for&nbsp;querying&nbsp;the&nbsp;language&nbsp;model.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Methods:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:&nbsp;Clean&nbsp;and&nbsp;return&nbsp;unique&nbsp;elements&nbsp;from&nbsp;an&nbsp;input&nbsp;string.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_to_list(list_to_update:&nbsp;List[Dict],&nbsp;query:&nbsp;str,&nbsp;response:&nbsp;str,&nbsp;additional_field=None)&nbsp;-&gt;&nbsp;List[Dict]:&nbsp;Add&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct&nbsp;list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_response_from_llm(query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question_type(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:&nbsp;Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generate()&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>```&nbsp;<br/>-&nbsp;`DatasetGenerator`&nbsp;is&nbsp;a&nbsp;class&nbsp;that&nbsp;contains&nbsp;methods&nbsp;and&nbsp;attributes&nbsp;to&nbsp;handle&nbsp;different&nbsp;types&nbsp;of&nbsp;questions&nbsp;related&nbsp;to&nbsp;file,&nbsp;function,&nbsp;or&nbsp;class&nbsp;details&nbsp;and&nbsp;generates&nbsp;responses&nbsp;using&nbsp;a&nbsp;language&nbsp;model.&nbsp;It&nbsp;provides&nbsp;the&nbsp;following&nbsp;functionalities:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Cleaning&nbsp;input&nbsp;strings&nbsp;for&nbsp;generating&nbsp;unique&nbsp;elements&nbsp;in&nbsp;`clean_and_get_unique_elements`.<br/>&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Retrieving&nbsp;responses&nbsp;from&nbsp;a&nbsp;language&nbsp;model&nbsp;in&nbsp;`get_response_from_llm`&nbsp;method.<br/>&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Processing&nbsp;questions&nbsp;using&nbsp;various&nbsp;methods&nbsp;to&nbsp;obtain&nbsp;details&nbsp;based&nbsp;on&nbsp;question&nbsp;types:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a)&nbsp;process_question&nbsp;and&nbsp;generate&nbsp;corresponding&nbsp;JSON&nbsp;data&nbsp;to&nbsp;the&nbsp;specified&nbsp;parameters&nbsp;and&nbsp;input-output&nbsp;pair.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b)&nbsp;process_question_type&nbsp;to&nbsp;handle&nbsp;file,&nbsp;function,&nbsp;or&nbsp;class-specific&nbsp;processing.<br/>&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Generating&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;in&nbsp;`generate`&nbsp;method.<br/>2.&nbsp;Inputs:&nbsp;<br/>-&nbsp;`file_path`:&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file&nbsp;being&nbsp;analyzed.<br/>-&nbsp;`file_details`:&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file&nbsp;such&nbsp;as&nbsp;function&nbsp;and&nbsp;class&nbsp;names,&nbsp;their&nbsp;corresponding&nbsp;code&nbsp;snippets,&nbsp;and&nbsp;a&nbsp;summary&nbsp;of&nbsp;the&nbsp;code&nbsp;content&nbsp;itself&nbsp;(as&nbsp;seen&nbsp;from&nbsp;analysis&nbsp;done&nbsp;earlier&nbsp;by&nbsp;Python&nbsp;LSI).&nbsp;This&nbsp;can&nbsp;help&nbsp;extract&nbsp;details&nbsp;based&nbsp;on&nbsp;types&nbsp;defined&nbsp;in&nbsp;`process_question`&nbsp;and&nbsp;`process_question_type`.<br/>-&nbsp;`base_name`:&nbsp;The&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;Python&nbsp;file&nbsp;being&nbsp;analyzed.&nbsp;<br/>-&nbsp;`questions`:&nbsp;A&nbsp;list&nbsp;containing&nbsp;different&nbsp;types&nbsp;of&nbsp;questions,&nbsp;each&nbsp;with&nbsp;their&nbsp;respective&nbsp;question&nbsp;ID&nbsp;and&nbsp;text.&nbsp;<br/>-&nbsp;`model_config`:&nbsp;Configuration&nbsp;for&nbsp;language&nbsp;model,&nbsp;prompt&nbsp;template,&nbsp;and&nbsp;inference&nbsp;parameters.&nbsp;This&nbsp;is&nbsp;used&nbsp;to&nbsp;generate&nbsp;responses&nbsp;using&nbsp;a&nbsp;pre-trained&nbsp;GPT-3&nbsp;or&nbsp;GPT-J&nbsp;language&nbsp;model.<br/>3.&nbsp;Output:&nbsp;Returns&nbsp;the&nbsp;generated&nbsp;`instruct_list`&nbsp;which&nbsp;contains&nbsp;a&nbsp;list&nbsp;of&nbsp;dictionaries&nbsp;containing&nbsp;JSON&nbsp;data&nbsp;for&nbsp;each&nbsp;question,&nbsp;where&nbsp;the&nbsp;keys&nbsp;are&nbsp;&#x27;instruction&#x27;,&nbsp;&#x27;input&#x27;&nbsp;and&nbsp;&#x27;output&#x27;.</td></tr>
                </tbody>
            </table>
        </body>
        </html>
        