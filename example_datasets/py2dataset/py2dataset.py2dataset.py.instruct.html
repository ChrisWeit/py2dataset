
        <html>
        <head>
            <style>
                table {border-collapse: collapse; width: 100%; table-layout: fixed;}
                th, td {
                    border: 1px solid black;
                    padding: 8px;
                    text-align: left;
                    white-space: pre-line;
                    vertical-align: top;
                    word-wrap: break-word;
                }
            </style>
        </head>
        <body>
            <table>
                <thead>
                    <tr>
        <th style='width: 33.333333333333336%;'>instruction</th><th style='width: 33.333333333333336%;'>input</th><th style='width: 33.333333333333336%;'>output</th>
                    </tr>
                </thead>
                <tbody>
        <tr><td>Dependencies&nbsp;of&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>&quot;&quot;&quot;<br/>For&nbsp;each&nbsp;Python&nbsp;file&nbsp;within&nbsp;given&nbsp;directory,&nbsp;generate,&nbsp;save,&nbsp;and&nbsp;return&nbsp;datasets&nbsp;that&nbsp;include&nbsp;responses&nbsp;to&nbsp;questions&nbsp;about&nbsp;the&nbsp;code.<br/>Requirements:<br/>[req00]&nbsp;The&nbsp;process_single_file&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;parameters&nbsp;for&nbsp;the&nbsp;Python&nbsp;file&nbsp;path,&nbsp;starting&nbsp;directory,&nbsp;model&nbsp;configuration&nbsp;pathname,&nbsp;questions&nbsp;dictionary,&nbsp;use&nbsp;of&nbsp;LLM,&nbsp;and&nbsp;output&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;If&nbsp;the&nbsp;use_llm&nbsp;parameter&nbsp;is&nbsp;True,&nbsp;use&nbsp;the&nbsp;&#x27;get_model&#x27;&nbsp;function&nbsp;to&nbsp;instantiate&nbsp;the&nbsp;model&nbsp;configuration&nbsp;for&nbsp;the&nbsp;LLM.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Use&nbsp;the&nbsp;&#x27;get_python_file_details&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;Python&nbsp;file&nbsp;details.<br/>&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Use&nbsp;the&nbsp;&#x27;get_python_datasets&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;instruct.json&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Use&nbsp;the&nbsp;&#x27;save_python_data&#x27;&nbsp;function&nbsp;to&nbsp;save&nbsp;the&nbsp;file&nbsp;details&nbsp;and&nbsp;instruct.json&nbsp;dataset.<br/><br/>[req01]&nbsp;The&nbsp;process_python_directories&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;parameters&nbsp;for&nbsp;the&nbsp;starting&nbsp;directory,&nbsp;output&nbsp;directory,&nbsp;model&nbsp;configuration&nbsp;pathname,&nbsp;questions&nbsp;dictionary,&nbsp;and&nbsp;use&nbsp;of&nbsp;LLM.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Search&nbsp;for&nbsp;all&nbsp;Python&nbsp;files&nbsp;within&nbsp;the&nbsp;given&nbsp;directory&nbsp;and&nbsp;its&nbsp;subdirectories&nbsp;using&nbsp;the&nbsp;rglob&nbsp;method&nbsp;with&nbsp;a&nbsp;pattern&nbsp;that&nbsp;excludes&nbsp;files&nbsp;starting&nbsp;with&nbsp;&quot;_&quot;.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;For&nbsp;each&nbsp;valid&nbsp;Python&nbsp;file,&nbsp;spawn&nbsp;a&nbsp;new&nbsp;child&nbsp;process&nbsp;using&nbsp;&#x27;process_single_file&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;file&nbsp;details&nbsp;and&nbsp;instruct.json&nbsp;dataset.<br/>&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;After&nbsp;processing&nbsp;all&nbsp;files,&nbsp;combine&nbsp;all&nbsp;of&nbsp;the&nbsp;instruct.json&nbsp;files&nbsp;together&nbsp;using&nbsp;the&nbsp;&#x27;combine_json_files&#x27;&nbsp;function.<br/>&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Return&nbsp;the&nbsp;combined&nbsp;datasets.<br/><br/>[req02]&nbsp;The&nbsp;py2dataset&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;parameters&nbsp;for&nbsp;the&nbsp;starting&nbsp;directory,&nbsp;output&nbsp;directory,&nbsp;questions&nbsp;pathname,&nbsp;model&nbsp;configuration&nbsp;pathname,&nbsp;use&nbsp;of&nbsp;LLM,&nbsp;and&nbsp;quiet&nbsp;mode.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Adjust&nbsp;the&nbsp;logging&nbsp;level&nbsp;based&nbsp;on&nbsp;the&nbsp;quiet&nbsp;flag.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;If&nbsp;no&nbsp;valid&nbsp;starting&nbsp;directory&nbsp;is&nbsp;provided,&nbsp;use&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Use&nbsp;the&nbsp;&#x27;get_output_dir&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;output&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Use&nbsp;the&nbsp;&#x27;get_questions&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;questions&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;f.&nbsp;Call&nbsp;the&nbsp;process_python_directories&nbsp;function&nbsp;to&nbsp;process&nbsp;the&nbsp;Python&nbsp;files&nbsp;and&nbsp;generate&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;g.&nbsp;Return&nbsp;the&nbsp;datasets.<br/><br/>[req03]&nbsp;The&nbsp;main&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;and&nbsp;process&nbsp;command-line&nbsp;arguments.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Determine&nbsp;the&nbsp;parameters&nbsp;for&nbsp;the&nbsp;py2dataset&nbsp;function&nbsp;based&nbsp;on&nbsp;the&nbsp;processed&nbsp;command-line&nbsp;arguments.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Call&nbsp;the&nbsp;py2dataset&nbsp;function&nbsp;with&nbsp;the&nbsp;derived&nbsp;parameters.<br/>&quot;&quot;&quot;<br/>import&nbsp;os<br/>import&nbsp;sys<br/>import&nbsp;gc<br/>import&nbsp;logging<br/>from&nbsp;pathlib&nbsp;import&nbsp;Path<br/>from&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List,&nbsp;Tuple,&nbsp;Union<br/>from&nbsp;multiprocessing&nbsp;import&nbsp;Process<br/><br/>from&nbsp;get_python_file_details&nbsp;import&nbsp;get_python_file_details<br/>from&nbsp;get_python_datasets&nbsp;import&nbsp;get_python_datasets<br/>from&nbsp;get_py2dataset_params&nbsp;import&nbsp;get_questions,&nbsp;get_model,&nbsp;get_output_dir<br/>from&nbsp;save_py2dataset_output&nbsp;import&nbsp;combine_json_files,&nbsp;save_python_data<br/><br/><br/>def&nbsp;process_single_file(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;a&nbsp;single&nbsp;Python&nbsp;file&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pythonfile_path&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Processing:&nbsp;{pythonfile_path}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;relative_path&nbsp;=&nbsp;pythonfile_path.relative_to(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;=&nbsp;&#x27;.&#x27;.join(part&nbsp;for&nbsp;part&nbsp;in&nbsp;relative_path.parts)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#instantiate&nbsp;llm&nbsp;and&nbsp;prompt&nbsp;if&nbsp;use_llm&nbsp;is&nbsp;True&nbsp;for&nbsp;each&nbsp;file&nbsp;to&nbsp;aviod&nbsp;multiprocessing&nbsp;pickling&nbsp;problem<br/>&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;=&nbsp;get_model(model_config_pathname)&nbsp;if&nbsp;use_llm&nbsp;else&nbsp;(None,&nbsp;&#x27;&#x27;,&nbsp;0)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;use&nbsp;AST&nbsp;to&nbsp;get&nbsp;python&nbsp;file&nbsp;details<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;None&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;get_python_file_details(pythonfile_path)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;file_details&nbsp;is&nbsp;None&nbsp;or&nbsp;isinstance(file_details,&nbsp;tuple):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;get&nbsp;lists&nbsp;for&nbsp;instruct.json&nbsp;for&nbsp;python&nbsp;file<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;get_python_datasets(pythonfile_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;instruct_list&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;save_python_data(file_details,&nbsp;instruct_list,&nbsp;relative_path,&nbsp;output_dir)<br/><br/>def&nbsp;process_python_directories(start_dir:&nbsp;str,&nbsp;output_dir:&nbsp;str,&nbsp;model_config_pathname:&nbsp;str,&nbsp;questions:&nbsp;Dict,&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm:&nbsp;bool)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Processes&nbsp;all&nbsp;Python&nbsp;files&nbsp;in&nbsp;the&nbsp;provided&nbsp;directory&nbsp;and&nbsp;subdirectories.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;each&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;the&nbsp;LLM&nbsp;model&nbsp;to&nbsp;generate&nbsp;answers&nbsp;for&nbsp;JSON..<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;{}<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;pythonfile_path&nbsp;in&nbsp;Path(start_dir).rglob(&#x27;[!_]*.py&#x27;):<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;pythonfile_path.is_dir():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;spawn&nbsp;a&nbsp;new&nbsp;child&nbsp;process&nbsp;to&nbsp;manage&nbsp;python&nbsp;memory&nbsp;leaks<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc&nbsp;=&nbsp;Process(target=process_single_file,&nbsp;args=(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.start()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.join()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;combine&nbsp;all&nbsp;of&nbsp;the&nbsp;instruct.json&nbsp;files&nbsp;together<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;combine_json_files(output_dir)&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets<br/><br/><br/>def&nbsp;py2dataset(start_dir:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;output_dir:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;questions_pathname:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;model_config_pathname:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm:&nbsp;bool&nbsp;=&nbsp;False,&nbsp;quiet:&nbsp;bool&nbsp;=&nbsp;False)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;Python&nbsp;files&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool,&nbsp;optional):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;quiet:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.WARNING)<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.INFO)<br/>&nbsp;&nbsp;&nbsp;&nbsp;sys.setrecursionlimit(3000)&nbsp;&nbsp;#&nbsp;Increase&nbsp;the&nbsp;recursion&nbsp;limit&nbsp;for&nbsp;AST<br/>&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;if&nbsp;start&nbsp;dir&nbsp;is&nbsp;empty&nbsp;or&nbsp;not&nbsp;a&nbsp;valid&nbsp;directory,&nbsp;use&nbsp;current&nbsp;working&nbsp;directory<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;start_dir&nbsp;==&nbsp;&#x27;&#x27;&nbsp;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(&#x27;No&nbsp;valid&nbsp;start&nbsp;path&nbsp;provided.&nbsp;Using&nbsp;current&nbsp;working&nbsp;directory.&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.getcwd()&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.path.abspath(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;get_output_dir(output_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;=&nbsp;get_questions(questions_pathname)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;process_python_directories(start_dir,&nbsp;output_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets<br/><br/><br/>def&nbsp;main():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Command-line&nbsp;entry&nbsp;point&nbsp;for&nbsp;processing&nbsp;Python&nbsp;files&nbsp;and&nbsp;generating&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;&#x27;datasets&#x27;&nbsp;directory&nbsp;in&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--use_llm&nbsp;(bool,&nbsp;optional):&nbsp;Use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;If&nbsp;provided,&nbsp;only&nbsp;warnings&nbsp;and&nbsp;errors&nbsp;will&nbsp;be&nbsp;logged.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--_context&nbsp;(bool,&nbsp;optional):&nbsp;add&nbsp;the&nbsp;context&nbsp;from&nbsp;the&nbsp;AST&nbsp;to&nbsp;the&nbsp;code&nbsp;as&nbsp;context&nbsp;use_llm&nbsp;is&nbsp;true&nbsp;to&nbsp;get&nbsp;better&nbsp;responses,&nbsp;at&nbsp;the&nbsp;expense&nbsp;of&nbsp;more&nbsp;memory&nbsp;usage.&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;&#x27;&nbsp;&#x27;.join(sys.argv[1:])<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;=&nbsp;False<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--start_dir&#x27;&nbsp;in&nbsp;arg_string:&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;arg_string.split(&#x27;--start_dir&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--start_dir&nbsp;{start_dir}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--output_dir&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;arg_string.split(&#x27;--output_dir&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--output_dir&nbsp;{output_dir}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--model_config_pathname&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;=&nbsp;arg_string.split(&#x27;--model_config_pathname&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--model_config_pathname&nbsp;{model_config_pathname}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--questions_pathname&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;=&nbsp;arg_string.split(&#x27;--questions_pathname&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--questions_pathname&nbsp;{questions_pathname}&#x27;,&nbsp;&#x27;&#x27;)&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--use_llm&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&#x27;--use_llm&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--quiet&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&#x27;--quiet&#x27;,&nbsp;&#x27;&#x27;)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;py2dataset(start_dir,&nbsp;output_dir,&nbsp;questions_pathname,&nbsp;model_config_pathname,&nbsp;use_llm,&nbsp;quiet)<br/><br/>if&nbsp;__name__&nbsp;==&nbsp;&quot;__main__&quot;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;main()</td><td>gc,&nbsp;get_py2dataset_params,&nbsp;get_python_datasets,&nbsp;logging,&nbsp;multiprocessing,&nbsp;pathlib,&nbsp;sys,&nbsp;save_py2dataset_output,&nbsp;os,&nbsp;get_python_file_details,&nbsp;typing</td></tr><tr><td>Call&nbsp;code&nbsp;graph&nbsp;of&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>&quot;&quot;&quot;<br/>For&nbsp;each&nbsp;Python&nbsp;file&nbsp;within&nbsp;given&nbsp;directory,&nbsp;generate,&nbsp;save,&nbsp;and&nbsp;return&nbsp;datasets&nbsp;that&nbsp;include&nbsp;responses&nbsp;to&nbsp;questions&nbsp;about&nbsp;the&nbsp;code.<br/>Requirements:<br/>[req00]&nbsp;The&nbsp;process_single_file&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;parameters&nbsp;for&nbsp;the&nbsp;Python&nbsp;file&nbsp;path,&nbsp;starting&nbsp;directory,&nbsp;model&nbsp;configuration&nbsp;pathname,&nbsp;questions&nbsp;dictionary,&nbsp;use&nbsp;of&nbsp;LLM,&nbsp;and&nbsp;output&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;If&nbsp;the&nbsp;use_llm&nbsp;parameter&nbsp;is&nbsp;True,&nbsp;use&nbsp;the&nbsp;&#x27;get_model&#x27;&nbsp;function&nbsp;to&nbsp;instantiate&nbsp;the&nbsp;model&nbsp;configuration&nbsp;for&nbsp;the&nbsp;LLM.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Use&nbsp;the&nbsp;&#x27;get_python_file_details&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;Python&nbsp;file&nbsp;details.<br/>&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Use&nbsp;the&nbsp;&#x27;get_python_datasets&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;instruct.json&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Use&nbsp;the&nbsp;&#x27;save_python_data&#x27;&nbsp;function&nbsp;to&nbsp;save&nbsp;the&nbsp;file&nbsp;details&nbsp;and&nbsp;instruct.json&nbsp;dataset.<br/><br/>[req01]&nbsp;The&nbsp;process_python_directories&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;parameters&nbsp;for&nbsp;the&nbsp;starting&nbsp;directory,&nbsp;output&nbsp;directory,&nbsp;model&nbsp;configuration&nbsp;pathname,&nbsp;questions&nbsp;dictionary,&nbsp;and&nbsp;use&nbsp;of&nbsp;LLM.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Search&nbsp;for&nbsp;all&nbsp;Python&nbsp;files&nbsp;within&nbsp;the&nbsp;given&nbsp;directory&nbsp;and&nbsp;its&nbsp;subdirectories&nbsp;using&nbsp;the&nbsp;rglob&nbsp;method&nbsp;with&nbsp;a&nbsp;pattern&nbsp;that&nbsp;excludes&nbsp;files&nbsp;starting&nbsp;with&nbsp;&quot;_&quot;.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;For&nbsp;each&nbsp;valid&nbsp;Python&nbsp;file,&nbsp;spawn&nbsp;a&nbsp;new&nbsp;child&nbsp;process&nbsp;using&nbsp;&#x27;process_single_file&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;file&nbsp;details&nbsp;and&nbsp;instruct.json&nbsp;dataset.<br/>&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;After&nbsp;processing&nbsp;all&nbsp;files,&nbsp;combine&nbsp;all&nbsp;of&nbsp;the&nbsp;instruct.json&nbsp;files&nbsp;together&nbsp;using&nbsp;the&nbsp;&#x27;combine_json_files&#x27;&nbsp;function.<br/>&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Return&nbsp;the&nbsp;combined&nbsp;datasets.<br/><br/>[req02]&nbsp;The&nbsp;py2dataset&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;parameters&nbsp;for&nbsp;the&nbsp;starting&nbsp;directory,&nbsp;output&nbsp;directory,&nbsp;questions&nbsp;pathname,&nbsp;model&nbsp;configuration&nbsp;pathname,&nbsp;use&nbsp;of&nbsp;LLM,&nbsp;and&nbsp;quiet&nbsp;mode.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Adjust&nbsp;the&nbsp;logging&nbsp;level&nbsp;based&nbsp;on&nbsp;the&nbsp;quiet&nbsp;flag.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;If&nbsp;no&nbsp;valid&nbsp;starting&nbsp;directory&nbsp;is&nbsp;provided,&nbsp;use&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Use&nbsp;the&nbsp;&#x27;get_output_dir&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;output&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Use&nbsp;the&nbsp;&#x27;get_questions&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;questions&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;f.&nbsp;Call&nbsp;the&nbsp;process_python_directories&nbsp;function&nbsp;to&nbsp;process&nbsp;the&nbsp;Python&nbsp;files&nbsp;and&nbsp;generate&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;g.&nbsp;Return&nbsp;the&nbsp;datasets.<br/><br/>[req03]&nbsp;The&nbsp;main&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;and&nbsp;process&nbsp;command-line&nbsp;arguments.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Determine&nbsp;the&nbsp;parameters&nbsp;for&nbsp;the&nbsp;py2dataset&nbsp;function&nbsp;based&nbsp;on&nbsp;the&nbsp;processed&nbsp;command-line&nbsp;arguments.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Call&nbsp;the&nbsp;py2dataset&nbsp;function&nbsp;with&nbsp;the&nbsp;derived&nbsp;parameters.<br/>&quot;&quot;&quot;<br/>import&nbsp;os<br/>import&nbsp;sys<br/>import&nbsp;gc<br/>import&nbsp;logging<br/>from&nbsp;pathlib&nbsp;import&nbsp;Path<br/>from&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List,&nbsp;Tuple,&nbsp;Union<br/>from&nbsp;multiprocessing&nbsp;import&nbsp;Process<br/><br/>from&nbsp;get_python_file_details&nbsp;import&nbsp;get_python_file_details<br/>from&nbsp;get_python_datasets&nbsp;import&nbsp;get_python_datasets<br/>from&nbsp;get_py2dataset_params&nbsp;import&nbsp;get_questions,&nbsp;get_model,&nbsp;get_output_dir<br/>from&nbsp;save_py2dataset_output&nbsp;import&nbsp;combine_json_files,&nbsp;save_python_data<br/><br/><br/>def&nbsp;process_single_file(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;a&nbsp;single&nbsp;Python&nbsp;file&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pythonfile_path&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Processing:&nbsp;{pythonfile_path}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;relative_path&nbsp;=&nbsp;pythonfile_path.relative_to(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;=&nbsp;&#x27;.&#x27;.join(part&nbsp;for&nbsp;part&nbsp;in&nbsp;relative_path.parts)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#instantiate&nbsp;llm&nbsp;and&nbsp;prompt&nbsp;if&nbsp;use_llm&nbsp;is&nbsp;True&nbsp;for&nbsp;each&nbsp;file&nbsp;to&nbsp;aviod&nbsp;multiprocessing&nbsp;pickling&nbsp;problem<br/>&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;=&nbsp;get_model(model_config_pathname)&nbsp;if&nbsp;use_llm&nbsp;else&nbsp;(None,&nbsp;&#x27;&#x27;,&nbsp;0)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;use&nbsp;AST&nbsp;to&nbsp;get&nbsp;python&nbsp;file&nbsp;details<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;None&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;get_python_file_details(pythonfile_path)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;file_details&nbsp;is&nbsp;None&nbsp;or&nbsp;isinstance(file_details,&nbsp;tuple):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;get&nbsp;lists&nbsp;for&nbsp;instruct.json&nbsp;for&nbsp;python&nbsp;file<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;get_python_datasets(pythonfile_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;instruct_list&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;save_python_data(file_details,&nbsp;instruct_list,&nbsp;relative_path,&nbsp;output_dir)<br/><br/>def&nbsp;process_python_directories(start_dir:&nbsp;str,&nbsp;output_dir:&nbsp;str,&nbsp;model_config_pathname:&nbsp;str,&nbsp;questions:&nbsp;Dict,&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm:&nbsp;bool)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Processes&nbsp;all&nbsp;Python&nbsp;files&nbsp;in&nbsp;the&nbsp;provided&nbsp;directory&nbsp;and&nbsp;subdirectories.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;each&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;the&nbsp;LLM&nbsp;model&nbsp;to&nbsp;generate&nbsp;answers&nbsp;for&nbsp;JSON..<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;{}<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;pythonfile_path&nbsp;in&nbsp;Path(start_dir).rglob(&#x27;[!_]*.py&#x27;):<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;pythonfile_path.is_dir():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;spawn&nbsp;a&nbsp;new&nbsp;child&nbsp;process&nbsp;to&nbsp;manage&nbsp;python&nbsp;memory&nbsp;leaks<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc&nbsp;=&nbsp;Process(target=process_single_file,&nbsp;args=(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.start()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.join()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;combine&nbsp;all&nbsp;of&nbsp;the&nbsp;instruct.json&nbsp;files&nbsp;together<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;combine_json_files(output_dir)&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets<br/><br/><br/>def&nbsp;py2dataset(start_dir:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;output_dir:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;questions_pathname:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;model_config_pathname:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm:&nbsp;bool&nbsp;=&nbsp;False,&nbsp;quiet:&nbsp;bool&nbsp;=&nbsp;False)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;Python&nbsp;files&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool,&nbsp;optional):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;quiet:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.WARNING)<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.INFO)<br/>&nbsp;&nbsp;&nbsp;&nbsp;sys.setrecursionlimit(3000)&nbsp;&nbsp;#&nbsp;Increase&nbsp;the&nbsp;recursion&nbsp;limit&nbsp;for&nbsp;AST<br/>&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;if&nbsp;start&nbsp;dir&nbsp;is&nbsp;empty&nbsp;or&nbsp;not&nbsp;a&nbsp;valid&nbsp;directory,&nbsp;use&nbsp;current&nbsp;working&nbsp;directory<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;start_dir&nbsp;==&nbsp;&#x27;&#x27;&nbsp;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(&#x27;No&nbsp;valid&nbsp;start&nbsp;path&nbsp;provided.&nbsp;Using&nbsp;current&nbsp;working&nbsp;directory.&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.getcwd()&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.path.abspath(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;get_output_dir(output_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;=&nbsp;get_questions(questions_pathname)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;process_python_directories(start_dir,&nbsp;output_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets<br/><br/><br/>def&nbsp;main():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Command-line&nbsp;entry&nbsp;point&nbsp;for&nbsp;processing&nbsp;Python&nbsp;files&nbsp;and&nbsp;generating&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;&#x27;datasets&#x27;&nbsp;directory&nbsp;in&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--use_llm&nbsp;(bool,&nbsp;optional):&nbsp;Use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;If&nbsp;provided,&nbsp;only&nbsp;warnings&nbsp;and&nbsp;errors&nbsp;will&nbsp;be&nbsp;logged.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--_context&nbsp;(bool,&nbsp;optional):&nbsp;add&nbsp;the&nbsp;context&nbsp;from&nbsp;the&nbsp;AST&nbsp;to&nbsp;the&nbsp;code&nbsp;as&nbsp;context&nbsp;use_llm&nbsp;is&nbsp;true&nbsp;to&nbsp;get&nbsp;better&nbsp;responses,&nbsp;at&nbsp;the&nbsp;expense&nbsp;of&nbsp;more&nbsp;memory&nbsp;usage.&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;&#x27;&nbsp;&#x27;.join(sys.argv[1:])<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;=&nbsp;False<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--start_dir&#x27;&nbsp;in&nbsp;arg_string:&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;arg_string.split(&#x27;--start_dir&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--start_dir&nbsp;{start_dir}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--output_dir&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;arg_string.split(&#x27;--output_dir&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--output_dir&nbsp;{output_dir}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--model_config_pathname&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;=&nbsp;arg_string.split(&#x27;--model_config_pathname&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--model_config_pathname&nbsp;{model_config_pathname}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--questions_pathname&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;=&nbsp;arg_string.split(&#x27;--questions_pathname&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--questions_pathname&nbsp;{questions_pathname}&#x27;,&nbsp;&#x27;&#x27;)&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--use_llm&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&#x27;--use_llm&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--quiet&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&#x27;--quiet&#x27;,&nbsp;&#x27;&#x27;)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;py2dataset(start_dir,&nbsp;output_dir,&nbsp;questions_pathname,&nbsp;model_config_pathname,&nbsp;use_llm,&nbsp;quiet)<br/><br/>if&nbsp;__name__&nbsp;==&nbsp;&quot;__main__&quot;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;main()</td><td>{&#x27;nodes&#x27;:&nbsp;[&#x27;process_single_file&#x27;,&nbsp;&#x27;process_python_directories&#x27;,&nbsp;&#x27;py2dataset&#x27;,&nbsp;&#x27;main&#x27;,&nbsp;&#x27;logging.info&#x27;,&nbsp;&#x27;pythonfile_path.relative_to&#x27;,&nbsp;&quot;&#x27;.&#x27;.join&quot;,&nbsp;&#x27;get_model&#x27;,&nbsp;&#x27;get_python_file_details&#x27;,&nbsp;&#x27;isinstance&#x27;,&nbsp;&#x27;get_python_datasets&#x27;,&nbsp;&#x27;save_python_data&#x27;,&nbsp;&#x27;Path(start_dir).rglob&#x27;,&nbsp;&#x27;Path&#x27;,&nbsp;&#x27;pythonfile_path.is_dir&#x27;,&nbsp;&#x27;Process&#x27;,&nbsp;&#x27;proc.start&#x27;,&nbsp;&#x27;proc.join&#x27;,&nbsp;&#x27;combine_json_files&#x27;,&nbsp;&#x27;logging.getLogger().setLevel&#x27;,&nbsp;&#x27;logging.getLogger&#x27;,&nbsp;&#x27;sys.setrecursionlimit&#x27;,&nbsp;&#x27;os.getcwd&#x27;,&nbsp;&#x27;os.path.abspath&#x27;,&nbsp;&#x27;get_output_dir&#x27;,&nbsp;&#x27;get_questions&#x27;,&nbsp;&quot;&#x27;&nbsp;&#x27;.join&quot;,&nbsp;&quot;arg_string.split(&#x27;--start_dir&nbsp;&#x27;)[1].split&quot;,&nbsp;&#x27;arg_string.split&#x27;,&nbsp;&#x27;arg_string.replace&#x27;,&nbsp;&quot;arg_string.split(&#x27;--output_dir&nbsp;&#x27;)[1].split&quot;,&nbsp;&quot;arg_string.split(&#x27;--model_config_pathname&nbsp;&#x27;)[1].split&quot;,&nbsp;&quot;arg_string.split(&#x27;--questions_pathname&nbsp;&#x27;)[1].split&quot;],&nbsp;&#x27;edges&#x27;:&nbsp;[{&#x27;source&#x27;:&nbsp;&#x27;process_single_file&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;logging.info&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;f&#x27;Processing:&nbsp;{pythonfile_path}&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;process_single_file&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;pythonfile_path.relative_to&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;start_dir&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;process_single_file&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&quot;&#x27;.&#x27;.join&quot;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;(part&nbsp;for&nbsp;part&nbsp;in&nbsp;relative_path.parts)&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;process_single_file&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;get_model&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;model_config_pathname&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;process_single_file&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;get_python_file_details&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;pythonfile_path&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;process_single_file&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;isinstance&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;file_details&#x27;,&nbsp;&#x27;tuple&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;process_single_file&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;get_python_datasets&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;pythonfile_path&#x27;,&nbsp;&#x27;file_details&#x27;,&nbsp;&#x27;base_name&#x27;,&nbsp;&#x27;questions&#x27;,&nbsp;&#x27;model_config&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;process_single_file&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;save_python_data&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;file_details&#x27;,&nbsp;&#x27;instruct_list&#x27;,&nbsp;&#x27;relative_path&#x27;,&nbsp;&#x27;output_dir&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;process_python_directories&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;Path(start_dir).rglob&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;[!_]*.py&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;process_python_directories&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;Path&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;start_dir&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;process_python_directories&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;pythonfile_path.is_dir&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;process_python_directories&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;Process&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;process_python_directories&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;proc.start&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;process_python_directories&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;proc.join&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;process_python_directories&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;combine_json_files&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;output_dir&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;py2dataset&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;logging.getLogger().setLevel&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;logging.INFO&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;py2dataset&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;logging.getLogger&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;py2dataset&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;sys.setrecursionlimit&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;3000&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;py2dataset&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;logging.info&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;No&nbsp;valid&nbsp;start&nbsp;path&nbsp;provided.&nbsp;Using&nbsp;current&nbsp;working&nbsp;directory.&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;py2dataset&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;os.getcwd&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;py2dataset&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;os.path.abspath&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;start_dir&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;py2dataset&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;get_output_dir&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;output_dir&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;py2dataset&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;get_questions&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;questions_pathname&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;py2dataset&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;process_python_directories&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;start_dir&#x27;,&nbsp;&#x27;output_dir&#x27;,&nbsp;&#x27;model_config_pathname&#x27;,&nbsp;&#x27;questions&#x27;,&nbsp;&#x27;use_llm&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[&#x27;datasets&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;main&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&quot;&#x27;&nbsp;&#x27;.join&quot;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;sys.argv[1:]&#x27;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;main&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&quot;arg_string.split(&#x27;--start_dir&nbsp;&#x27;)[1].split&quot;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;&nbsp;&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;main&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;arg_string.split&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;--questions_pathname&nbsp;&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;main&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;arg_string.replace&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;--quiet&#x27;&quot;,&nbsp;&quot;&#x27;&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;main&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&quot;arg_string.split(&#x27;--output_dir&nbsp;&#x27;)[1].split&quot;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;&nbsp;&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;main&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&quot;arg_string.split(&#x27;--model_config_pathname&nbsp;&#x27;)[1].split&quot;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;&nbsp;&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;main&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&quot;arg_string.split(&#x27;--questions_pathname&nbsp;&#x27;)[1].split&quot;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&quot;&#x27;&nbsp;&#x27;&quot;]},&nbsp;{&#x27;source&#x27;:&nbsp;&#x27;main&#x27;,&nbsp;&#x27;target&#x27;:&nbsp;&#x27;py2dataset&#x27;,&nbsp;&#x27;target_inputs&#x27;:&nbsp;[&#x27;start_dir&#x27;,&nbsp;&#x27;output_dir&#x27;,&nbsp;&#x27;questions_pathname&#x27;,&nbsp;&#x27;model_config_pathname&#x27;,&nbsp;&#x27;use_llm&#x27;,&nbsp;&#x27;quiet&#x27;],&nbsp;&#x27;target_returns&#x27;:&nbsp;[&#x27;datasets&#x27;]}]}</td></tr><tr><td>Functions&nbsp;defined&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>&quot;&quot;&quot;<br/>For&nbsp;each&nbsp;Python&nbsp;file&nbsp;within&nbsp;given&nbsp;directory,&nbsp;generate,&nbsp;save,&nbsp;and&nbsp;return&nbsp;datasets&nbsp;that&nbsp;include&nbsp;responses&nbsp;to&nbsp;questions&nbsp;about&nbsp;the&nbsp;code.<br/>Requirements:<br/>[req00]&nbsp;The&nbsp;process_single_file&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;parameters&nbsp;for&nbsp;the&nbsp;Python&nbsp;file&nbsp;path,&nbsp;starting&nbsp;directory,&nbsp;model&nbsp;configuration&nbsp;pathname,&nbsp;questions&nbsp;dictionary,&nbsp;use&nbsp;of&nbsp;LLM,&nbsp;and&nbsp;output&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;If&nbsp;the&nbsp;use_llm&nbsp;parameter&nbsp;is&nbsp;True,&nbsp;use&nbsp;the&nbsp;&#x27;get_model&#x27;&nbsp;function&nbsp;to&nbsp;instantiate&nbsp;the&nbsp;model&nbsp;configuration&nbsp;for&nbsp;the&nbsp;LLM.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Use&nbsp;the&nbsp;&#x27;get_python_file_details&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;Python&nbsp;file&nbsp;details.<br/>&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Use&nbsp;the&nbsp;&#x27;get_python_datasets&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;instruct.json&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Use&nbsp;the&nbsp;&#x27;save_python_data&#x27;&nbsp;function&nbsp;to&nbsp;save&nbsp;the&nbsp;file&nbsp;details&nbsp;and&nbsp;instruct.json&nbsp;dataset.<br/><br/>[req01]&nbsp;The&nbsp;process_python_directories&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;parameters&nbsp;for&nbsp;the&nbsp;starting&nbsp;directory,&nbsp;output&nbsp;directory,&nbsp;model&nbsp;configuration&nbsp;pathname,&nbsp;questions&nbsp;dictionary,&nbsp;and&nbsp;use&nbsp;of&nbsp;LLM.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Search&nbsp;for&nbsp;all&nbsp;Python&nbsp;files&nbsp;within&nbsp;the&nbsp;given&nbsp;directory&nbsp;and&nbsp;its&nbsp;subdirectories&nbsp;using&nbsp;the&nbsp;rglob&nbsp;method&nbsp;with&nbsp;a&nbsp;pattern&nbsp;that&nbsp;excludes&nbsp;files&nbsp;starting&nbsp;with&nbsp;&quot;_&quot;.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;For&nbsp;each&nbsp;valid&nbsp;Python&nbsp;file,&nbsp;spawn&nbsp;a&nbsp;new&nbsp;child&nbsp;process&nbsp;using&nbsp;&#x27;process_single_file&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;file&nbsp;details&nbsp;and&nbsp;instruct.json&nbsp;dataset.<br/>&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;After&nbsp;processing&nbsp;all&nbsp;files,&nbsp;combine&nbsp;all&nbsp;of&nbsp;the&nbsp;instruct.json&nbsp;files&nbsp;together&nbsp;using&nbsp;the&nbsp;&#x27;combine_json_files&#x27;&nbsp;function.<br/>&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Return&nbsp;the&nbsp;combined&nbsp;datasets.<br/><br/>[req02]&nbsp;The&nbsp;py2dataset&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;parameters&nbsp;for&nbsp;the&nbsp;starting&nbsp;directory,&nbsp;output&nbsp;directory,&nbsp;questions&nbsp;pathname,&nbsp;model&nbsp;configuration&nbsp;pathname,&nbsp;use&nbsp;of&nbsp;LLM,&nbsp;and&nbsp;quiet&nbsp;mode.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Adjust&nbsp;the&nbsp;logging&nbsp;level&nbsp;based&nbsp;on&nbsp;the&nbsp;quiet&nbsp;flag.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;If&nbsp;no&nbsp;valid&nbsp;starting&nbsp;directory&nbsp;is&nbsp;provided,&nbsp;use&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Use&nbsp;the&nbsp;&#x27;get_output_dir&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;output&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Use&nbsp;the&nbsp;&#x27;get_questions&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;questions&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;f.&nbsp;Call&nbsp;the&nbsp;process_python_directories&nbsp;function&nbsp;to&nbsp;process&nbsp;the&nbsp;Python&nbsp;files&nbsp;and&nbsp;generate&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;g.&nbsp;Return&nbsp;the&nbsp;datasets.<br/><br/>[req03]&nbsp;The&nbsp;main&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;and&nbsp;process&nbsp;command-line&nbsp;arguments.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Determine&nbsp;the&nbsp;parameters&nbsp;for&nbsp;the&nbsp;py2dataset&nbsp;function&nbsp;based&nbsp;on&nbsp;the&nbsp;processed&nbsp;command-line&nbsp;arguments.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Call&nbsp;the&nbsp;py2dataset&nbsp;function&nbsp;with&nbsp;the&nbsp;derived&nbsp;parameters.<br/>&quot;&quot;&quot;<br/>import&nbsp;os<br/>import&nbsp;sys<br/>import&nbsp;gc<br/>import&nbsp;logging<br/>from&nbsp;pathlib&nbsp;import&nbsp;Path<br/>from&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List,&nbsp;Tuple,&nbsp;Union<br/>from&nbsp;multiprocessing&nbsp;import&nbsp;Process<br/><br/>from&nbsp;get_python_file_details&nbsp;import&nbsp;get_python_file_details<br/>from&nbsp;get_python_datasets&nbsp;import&nbsp;get_python_datasets<br/>from&nbsp;get_py2dataset_params&nbsp;import&nbsp;get_questions,&nbsp;get_model,&nbsp;get_output_dir<br/>from&nbsp;save_py2dataset_output&nbsp;import&nbsp;combine_json_files,&nbsp;save_python_data<br/><br/><br/>def&nbsp;process_single_file(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;a&nbsp;single&nbsp;Python&nbsp;file&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pythonfile_path&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Processing:&nbsp;{pythonfile_path}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;relative_path&nbsp;=&nbsp;pythonfile_path.relative_to(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;=&nbsp;&#x27;.&#x27;.join(part&nbsp;for&nbsp;part&nbsp;in&nbsp;relative_path.parts)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#instantiate&nbsp;llm&nbsp;and&nbsp;prompt&nbsp;if&nbsp;use_llm&nbsp;is&nbsp;True&nbsp;for&nbsp;each&nbsp;file&nbsp;to&nbsp;aviod&nbsp;multiprocessing&nbsp;pickling&nbsp;problem<br/>&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;=&nbsp;get_model(model_config_pathname)&nbsp;if&nbsp;use_llm&nbsp;else&nbsp;(None,&nbsp;&#x27;&#x27;,&nbsp;0)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;use&nbsp;AST&nbsp;to&nbsp;get&nbsp;python&nbsp;file&nbsp;details<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;None&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;get_python_file_details(pythonfile_path)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;file_details&nbsp;is&nbsp;None&nbsp;or&nbsp;isinstance(file_details,&nbsp;tuple):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;get&nbsp;lists&nbsp;for&nbsp;instruct.json&nbsp;for&nbsp;python&nbsp;file<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;get_python_datasets(pythonfile_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;instruct_list&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;save_python_data(file_details,&nbsp;instruct_list,&nbsp;relative_path,&nbsp;output_dir)<br/><br/>def&nbsp;process_python_directories(start_dir:&nbsp;str,&nbsp;output_dir:&nbsp;str,&nbsp;model_config_pathname:&nbsp;str,&nbsp;questions:&nbsp;Dict,&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm:&nbsp;bool)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Processes&nbsp;all&nbsp;Python&nbsp;files&nbsp;in&nbsp;the&nbsp;provided&nbsp;directory&nbsp;and&nbsp;subdirectories.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;each&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;the&nbsp;LLM&nbsp;model&nbsp;to&nbsp;generate&nbsp;answers&nbsp;for&nbsp;JSON..<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;{}<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;pythonfile_path&nbsp;in&nbsp;Path(start_dir).rglob(&#x27;[!_]*.py&#x27;):<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;pythonfile_path.is_dir():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;spawn&nbsp;a&nbsp;new&nbsp;child&nbsp;process&nbsp;to&nbsp;manage&nbsp;python&nbsp;memory&nbsp;leaks<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc&nbsp;=&nbsp;Process(target=process_single_file,&nbsp;args=(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.start()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.join()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;combine&nbsp;all&nbsp;of&nbsp;the&nbsp;instruct.json&nbsp;files&nbsp;together<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;combine_json_files(output_dir)&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets<br/><br/><br/>def&nbsp;py2dataset(start_dir:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;output_dir:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;questions_pathname:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;model_config_pathname:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm:&nbsp;bool&nbsp;=&nbsp;False,&nbsp;quiet:&nbsp;bool&nbsp;=&nbsp;False)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;Python&nbsp;files&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool,&nbsp;optional):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;quiet:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.WARNING)<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.INFO)<br/>&nbsp;&nbsp;&nbsp;&nbsp;sys.setrecursionlimit(3000)&nbsp;&nbsp;#&nbsp;Increase&nbsp;the&nbsp;recursion&nbsp;limit&nbsp;for&nbsp;AST<br/>&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;if&nbsp;start&nbsp;dir&nbsp;is&nbsp;empty&nbsp;or&nbsp;not&nbsp;a&nbsp;valid&nbsp;directory,&nbsp;use&nbsp;current&nbsp;working&nbsp;directory<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;start_dir&nbsp;==&nbsp;&#x27;&#x27;&nbsp;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(&#x27;No&nbsp;valid&nbsp;start&nbsp;path&nbsp;provided.&nbsp;Using&nbsp;current&nbsp;working&nbsp;directory.&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.getcwd()&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.path.abspath(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;get_output_dir(output_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;=&nbsp;get_questions(questions_pathname)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;process_python_directories(start_dir,&nbsp;output_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets<br/><br/><br/>def&nbsp;main():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Command-line&nbsp;entry&nbsp;point&nbsp;for&nbsp;processing&nbsp;Python&nbsp;files&nbsp;and&nbsp;generating&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;&#x27;datasets&#x27;&nbsp;directory&nbsp;in&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--use_llm&nbsp;(bool,&nbsp;optional):&nbsp;Use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;If&nbsp;provided,&nbsp;only&nbsp;warnings&nbsp;and&nbsp;errors&nbsp;will&nbsp;be&nbsp;logged.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--_context&nbsp;(bool,&nbsp;optional):&nbsp;add&nbsp;the&nbsp;context&nbsp;from&nbsp;the&nbsp;AST&nbsp;to&nbsp;the&nbsp;code&nbsp;as&nbsp;context&nbsp;use_llm&nbsp;is&nbsp;true&nbsp;to&nbsp;get&nbsp;better&nbsp;responses,&nbsp;at&nbsp;the&nbsp;expense&nbsp;of&nbsp;more&nbsp;memory&nbsp;usage.&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;&#x27;&nbsp;&#x27;.join(sys.argv[1:])<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;=&nbsp;False<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--start_dir&#x27;&nbsp;in&nbsp;arg_string:&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;arg_string.split(&#x27;--start_dir&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--start_dir&nbsp;{start_dir}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--output_dir&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;arg_string.split(&#x27;--output_dir&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--output_dir&nbsp;{output_dir}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--model_config_pathname&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;=&nbsp;arg_string.split(&#x27;--model_config_pathname&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--model_config_pathname&nbsp;{model_config_pathname}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--questions_pathname&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;=&nbsp;arg_string.split(&#x27;--questions_pathname&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--questions_pathname&nbsp;{questions_pathname}&#x27;,&nbsp;&#x27;&#x27;)&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--use_llm&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&#x27;--use_llm&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--quiet&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&#x27;--quiet&#x27;,&nbsp;&#x27;&#x27;)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;py2dataset(start_dir,&nbsp;output_dir,&nbsp;questions_pathname,&nbsp;model_config_pathname,&nbsp;use_llm,&nbsp;quiet)<br/><br/>if&nbsp;__name__&nbsp;==&nbsp;&quot;__main__&quot;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;main()</td><td>py2dataset,&nbsp;process_python_directories,&nbsp;main,&nbsp;process_single_file</td></tr><tr><td>Inputs&nbsp;to&nbsp;function:&nbsp;&#x27;process_single_file&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;process_single_file(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;a&nbsp;single&nbsp;Python&nbsp;file&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pythonfile_path&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Processing:&nbsp;{pythonfile_path}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;relative_path&nbsp;=&nbsp;pythonfile_path.relative_to(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;=&nbsp;&#x27;.&#x27;.join((part&nbsp;for&nbsp;part&nbsp;in&nbsp;relative_path.parts))<br/>&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;=&nbsp;get_model(model_config_pathname)&nbsp;if&nbsp;use_llm&nbsp;else&nbsp;(None,&nbsp;&#x27;&#x27;,&nbsp;0)<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;get_python_file_details(pythonfile_path)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;file_details&nbsp;is&nbsp;None&nbsp;or&nbsp;isinstance(file_details,&nbsp;tuple):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;get_python_datasets(pythonfile_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;instruct_list&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br/>&nbsp;&nbsp;&nbsp;&nbsp;save_python_data(file_details,&nbsp;instruct_list,&nbsp;relative_path,&nbsp;output_dir)</td><td>pythonfile_path,&nbsp;start_dir,&nbsp;questions,&nbsp;output_dir,&nbsp;model_config_pathname,&nbsp;use_llm</td></tr><tr><td>Inputs&nbsp;to&nbsp;function:&nbsp;&#x27;process_python_directories&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;process_python_directories(start_dir:&nbsp;str,&nbsp;output_dir:&nbsp;str,&nbsp;model_config_pathname:&nbsp;str,&nbsp;questions:&nbsp;Dict,&nbsp;use_llm:&nbsp;bool)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Processes&nbsp;all&nbsp;Python&nbsp;files&nbsp;in&nbsp;the&nbsp;provided&nbsp;directory&nbsp;and&nbsp;subdirectories.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;each&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;the&nbsp;LLM&nbsp;model&nbsp;to&nbsp;generate&nbsp;answers&nbsp;for&nbsp;JSON..<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;{}<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;pythonfile_path&nbsp;in&nbsp;Path(start_dir).rglob(&#x27;[!_]*.py&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;pythonfile_path.is_dir():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc&nbsp;=&nbsp;Process(target=process_single_file,&nbsp;args=(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.start()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.join()<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;combine_json_files(output_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets</td><td>start_dir,&nbsp;questions,&nbsp;output_dir,&nbsp;model_config_pathname,&nbsp;use_llm</td></tr><tr><td>Inputs&nbsp;to&nbsp;function:&nbsp;&#x27;py2dataset&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;py2dataset(start_dir:&nbsp;str=&#x27;&#x27;,&nbsp;output_dir:&nbsp;str=&#x27;&#x27;,&nbsp;questions_pathname:&nbsp;str=&#x27;&#x27;,&nbsp;model_config_pathname:&nbsp;str=&#x27;&#x27;,&nbsp;use_llm:&nbsp;bool=False,&nbsp;quiet:&nbsp;bool=False)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;Python&nbsp;files&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool,&nbsp;optional):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;quiet:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.WARNING)<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.INFO)<br/>&nbsp;&nbsp;&nbsp;&nbsp;sys.setrecursionlimit(3000)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;start_dir&nbsp;==&nbsp;&#x27;&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(&#x27;No&nbsp;valid&nbsp;start&nbsp;path&nbsp;provided.&nbsp;Using&nbsp;current&nbsp;working&nbsp;directory.&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.getcwd()<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.path.abspath(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;get_output_dir(output_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;=&nbsp;get_questions(questions_pathname)<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;process_python_directories(start_dir,&nbsp;output_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets</td><td>quiet,&nbsp;start_dir,&nbsp;output_dir,&nbsp;model_config_pathname,&nbsp;use_llm,&nbsp;questions_pathname</td></tr><tr><td>Docstring&nbsp;of&nbsp;function:&nbsp;&#x27;process_single_file&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;process_single_file(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;a&nbsp;single&nbsp;Python&nbsp;file&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pythonfile_path&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Processing:&nbsp;{pythonfile_path}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;relative_path&nbsp;=&nbsp;pythonfile_path.relative_to(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;=&nbsp;&#x27;.&#x27;.join((part&nbsp;for&nbsp;part&nbsp;in&nbsp;relative_path.parts))<br/>&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;=&nbsp;get_model(model_config_pathname)&nbsp;if&nbsp;use_llm&nbsp;else&nbsp;(None,&nbsp;&#x27;&#x27;,&nbsp;0)<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;get_python_file_details(pythonfile_path)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;file_details&nbsp;is&nbsp;None&nbsp;or&nbsp;isinstance(file_details,&nbsp;tuple):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;get_python_datasets(pythonfile_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;instruct_list&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br/>&nbsp;&nbsp;&nbsp;&nbsp;save_python_data(file_details,&nbsp;instruct_list,&nbsp;relative_path,&nbsp;output_dir)</td><td>Process&nbsp;a&nbsp;single&nbsp;Python&nbsp;file&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pythonfile_path&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none</td></tr><tr><td>Docstring&nbsp;of&nbsp;function:&nbsp;&#x27;process_python_directories&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;process_python_directories(start_dir:&nbsp;str,&nbsp;output_dir:&nbsp;str,&nbsp;model_config_pathname:&nbsp;str,&nbsp;questions:&nbsp;Dict,&nbsp;use_llm:&nbsp;bool)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Processes&nbsp;all&nbsp;Python&nbsp;files&nbsp;in&nbsp;the&nbsp;provided&nbsp;directory&nbsp;and&nbsp;subdirectories.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;each&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;the&nbsp;LLM&nbsp;model&nbsp;to&nbsp;generate&nbsp;answers&nbsp;for&nbsp;JSON..<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;{}<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;pythonfile_path&nbsp;in&nbsp;Path(start_dir).rglob(&#x27;[!_]*.py&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;pythonfile_path.is_dir():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc&nbsp;=&nbsp;Process(target=process_single_file,&nbsp;args=(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.start()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.join()<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;combine_json_files(output_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets</td><td>Processes&nbsp;all&nbsp;Python&nbsp;files&nbsp;in&nbsp;the&nbsp;provided&nbsp;directory&nbsp;and&nbsp;subdirectories.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;each&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;the&nbsp;LLM&nbsp;model&nbsp;to&nbsp;generate&nbsp;answers&nbsp;for&nbsp;JSON..<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.</td></tr><tr><td>Docstring&nbsp;of&nbsp;function:&nbsp;&#x27;py2dataset&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;py2dataset(start_dir:&nbsp;str=&#x27;&#x27;,&nbsp;output_dir:&nbsp;str=&#x27;&#x27;,&nbsp;questions_pathname:&nbsp;str=&#x27;&#x27;,&nbsp;model_config_pathname:&nbsp;str=&#x27;&#x27;,&nbsp;use_llm:&nbsp;bool=False,&nbsp;quiet:&nbsp;bool=False)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;Python&nbsp;files&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool,&nbsp;optional):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;quiet:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.WARNING)<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.INFO)<br/>&nbsp;&nbsp;&nbsp;&nbsp;sys.setrecursionlimit(3000)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;start_dir&nbsp;==&nbsp;&#x27;&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(&#x27;No&nbsp;valid&nbsp;start&nbsp;path&nbsp;provided.&nbsp;Using&nbsp;current&nbsp;working&nbsp;directory.&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.getcwd()<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.path.abspath(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;get_output_dir(output_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;=&nbsp;get_questions(questions_pathname)<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;process_python_directories(start_dir,&nbsp;output_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets</td><td>Process&nbsp;Python&nbsp;files&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool,&nbsp;optional):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.</td></tr><tr><td>Docstring&nbsp;of&nbsp;function:&nbsp;&#x27;main&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;main():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Command-line&nbsp;entry&nbsp;point&nbsp;for&nbsp;processing&nbsp;Python&nbsp;files&nbsp;and&nbsp;generating&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;&#x27;datasets&#x27;&nbsp;directory&nbsp;in&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--use_llm&nbsp;(bool,&nbsp;optional):&nbsp;Use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;If&nbsp;provided,&nbsp;only&nbsp;warnings&nbsp;and&nbsp;errors&nbsp;will&nbsp;be&nbsp;logged.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--_context&nbsp;(bool,&nbsp;optional):&nbsp;add&nbsp;the&nbsp;context&nbsp;from&nbsp;the&nbsp;AST&nbsp;to&nbsp;the&nbsp;code&nbsp;as&nbsp;context&nbsp;use_llm&nbsp;is&nbsp;true&nbsp;to&nbsp;get&nbsp;better&nbsp;responses,&nbsp;at&nbsp;the&nbsp;expense&nbsp;of&nbsp;more&nbsp;memory&nbsp;usage.&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;&#x27;&nbsp;&#x27;.join(sys.argv[1:])<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--start_dir&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;arg_string.split(&#x27;--start_dir&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--start_dir&nbsp;{start_dir}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--output_dir&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;arg_string.split(&#x27;--output_dir&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--output_dir&nbsp;{output_dir}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--model_config_pathname&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;=&nbsp;arg_string.split(&#x27;--model_config_pathname&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--model_config_pathname&nbsp;{model_config_pathname}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--questions_pathname&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;=&nbsp;arg_string.split(&#x27;--questions_pathname&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--questions_pathname&nbsp;{questions_pathname}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--use_llm&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&#x27;--use_llm&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--quiet&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&#x27;--quiet&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;py2dataset(start_dir,&nbsp;output_dir,&nbsp;questions_pathname,&nbsp;model_config_pathname,&nbsp;use_llm,&nbsp;quiet)</td><td>Command-line&nbsp;entry&nbsp;point&nbsp;for&nbsp;processing&nbsp;Python&nbsp;files&nbsp;and&nbsp;generating&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;&#x27;datasets&#x27;&nbsp;directory&nbsp;in&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--use_llm&nbsp;(bool,&nbsp;optional):&nbsp;Use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;If&nbsp;provided,&nbsp;only&nbsp;warnings&nbsp;and&nbsp;errors&nbsp;will&nbsp;be&nbsp;logged.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--_context&nbsp;(bool,&nbsp;optional):&nbsp;add&nbsp;the&nbsp;context&nbsp;from&nbsp;the&nbsp;AST&nbsp;to&nbsp;the&nbsp;code&nbsp;as&nbsp;context&nbsp;use_llm&nbsp;is&nbsp;true&nbsp;to&nbsp;get&nbsp;better&nbsp;responses,&nbsp;at&nbsp;the&nbsp;expense&nbsp;of&nbsp;more&nbsp;memory&nbsp;usage.</td></tr><tr><td>Calls&nbsp;made&nbsp;in&nbsp;function:&nbsp;&#x27;process_single_file&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;process_single_file(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;a&nbsp;single&nbsp;Python&nbsp;file&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pythonfile_path&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Processing:&nbsp;{pythonfile_path}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;relative_path&nbsp;=&nbsp;pythonfile_path.relative_to(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;=&nbsp;&#x27;.&#x27;.join((part&nbsp;for&nbsp;part&nbsp;in&nbsp;relative_path.parts))<br/>&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;=&nbsp;get_model(model_config_pathname)&nbsp;if&nbsp;use_llm&nbsp;else&nbsp;(None,&nbsp;&#x27;&#x27;,&nbsp;0)<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;get_python_file_details(pythonfile_path)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;file_details&nbsp;is&nbsp;None&nbsp;or&nbsp;isinstance(file_details,&nbsp;tuple):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;get_python_datasets(pythonfile_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;instruct_list&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br/>&nbsp;&nbsp;&nbsp;&nbsp;save_python_data(file_details,&nbsp;instruct_list,&nbsp;relative_path,&nbsp;output_dir)</td><td>..join,&nbsp;get_model,&nbsp;get_python_datasets,&nbsp;save_python_data,&nbsp;logging.info,&nbsp;pythonfile_path.relative_to,&nbsp;get_python_file_details,&nbsp;isinstance</td></tr><tr><td>Calls&nbsp;made&nbsp;in&nbsp;function:&nbsp;&#x27;process_python_directories&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;process_python_directories(start_dir:&nbsp;str,&nbsp;output_dir:&nbsp;str,&nbsp;model_config_pathname:&nbsp;str,&nbsp;questions:&nbsp;Dict,&nbsp;use_llm:&nbsp;bool)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Processes&nbsp;all&nbsp;Python&nbsp;files&nbsp;in&nbsp;the&nbsp;provided&nbsp;directory&nbsp;and&nbsp;subdirectories.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;each&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;the&nbsp;LLM&nbsp;model&nbsp;to&nbsp;generate&nbsp;answers&nbsp;for&nbsp;JSON..<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;{}<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;pythonfile_path&nbsp;in&nbsp;Path(start_dir).rglob(&#x27;[!_]*.py&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;pythonfile_path.is_dir():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc&nbsp;=&nbsp;Process(target=process_single_file,&nbsp;args=(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.start()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.join()<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;combine_json_files(output_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets</td><td>Process,&nbsp;proc.start,&nbsp;Path,&nbsp;proc.join,&nbsp;combine_json_files,&nbsp;pythonfile_path.is_dir,&nbsp;Pathstart_dir.rglob</td></tr><tr><td>Calls&nbsp;made&nbsp;in&nbsp;function:&nbsp;&#x27;py2dataset&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;py2dataset(start_dir:&nbsp;str=&#x27;&#x27;,&nbsp;output_dir:&nbsp;str=&#x27;&#x27;,&nbsp;questions_pathname:&nbsp;str=&#x27;&#x27;,&nbsp;model_config_pathname:&nbsp;str=&#x27;&#x27;,&nbsp;use_llm:&nbsp;bool=False,&nbsp;quiet:&nbsp;bool=False)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;Python&nbsp;files&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool,&nbsp;optional):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;quiet:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.WARNING)<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.INFO)<br/>&nbsp;&nbsp;&nbsp;&nbsp;sys.setrecursionlimit(3000)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;start_dir&nbsp;==&nbsp;&#x27;&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(&#x27;No&nbsp;valid&nbsp;start&nbsp;path&nbsp;provided.&nbsp;Using&nbsp;current&nbsp;working&nbsp;directory.&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.getcwd()<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.path.abspath(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;get_output_dir(output_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;=&nbsp;get_questions(questions_pathname)<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;process_python_directories(start_dir,&nbsp;output_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets</td><td>logging.getLogger,&nbsp;os.path.abspath,&nbsp;get_output_dir,&nbsp;get_questions,&nbsp;logging.info,&nbsp;process_python_directories,&nbsp;sys.setrecursionlimit,&nbsp;logging.getLogger.setLevel,&nbsp;os.getcwd</td></tr><tr><td>Calls&nbsp;made&nbsp;in&nbsp;function:&nbsp;&#x27;main&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;main():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Command-line&nbsp;entry&nbsp;point&nbsp;for&nbsp;processing&nbsp;Python&nbsp;files&nbsp;and&nbsp;generating&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;&#x27;datasets&#x27;&nbsp;directory&nbsp;in&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--use_llm&nbsp;(bool,&nbsp;optional):&nbsp;Use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;If&nbsp;provided,&nbsp;only&nbsp;warnings&nbsp;and&nbsp;errors&nbsp;will&nbsp;be&nbsp;logged.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--_context&nbsp;(bool,&nbsp;optional):&nbsp;add&nbsp;the&nbsp;context&nbsp;from&nbsp;the&nbsp;AST&nbsp;to&nbsp;the&nbsp;code&nbsp;as&nbsp;context&nbsp;use_llm&nbsp;is&nbsp;true&nbsp;to&nbsp;get&nbsp;better&nbsp;responses,&nbsp;at&nbsp;the&nbsp;expense&nbsp;of&nbsp;more&nbsp;memory&nbsp;usage.&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;&#x27;&nbsp;&#x27;.join(sys.argv[1:])<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--start_dir&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;arg_string.split(&#x27;--start_dir&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--start_dir&nbsp;{start_dir}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--output_dir&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;arg_string.split(&#x27;--output_dir&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--output_dir&nbsp;{output_dir}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--model_config_pathname&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;=&nbsp;arg_string.split(&#x27;--model_config_pathname&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--model_config_pathname&nbsp;{model_config_pathname}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--questions_pathname&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;=&nbsp;arg_string.split(&#x27;--questions_pathname&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--questions_pathname&nbsp;{questions_pathname}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--use_llm&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&#x27;--use_llm&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--quiet&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&#x27;--quiet&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;py2dataset(start_dir,&nbsp;output_dir,&nbsp;questions_pathname,&nbsp;model_config_pathname,&nbsp;use_llm,&nbsp;quiet)</td><td>arg_string.split--start_dir&nbsp;1.split,&nbsp;arg_string.split--model_config_pathname&nbsp;1.split,&nbsp;arg_string.replace,&nbsp;py2dataset,&nbsp;arg_string.split--output_dir&nbsp;1.split,&nbsp;arg_string.split,&nbsp;&nbsp;.join,&nbsp;arg_string.split--questions_pathname&nbsp;1.split</td></tr><tr><td>Variables&nbsp;defined&nbsp;in&nbsp;function:&nbsp;&#x27;process_single_file&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;process_single_file(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;a&nbsp;single&nbsp;Python&nbsp;file&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pythonfile_path&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Processing:&nbsp;{pythonfile_path}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;relative_path&nbsp;=&nbsp;pythonfile_path.relative_to(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;=&nbsp;&#x27;.&#x27;.join((part&nbsp;for&nbsp;part&nbsp;in&nbsp;relative_path.parts))<br/>&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;=&nbsp;get_model(model_config_pathname)&nbsp;if&nbsp;use_llm&nbsp;else&nbsp;(None,&nbsp;&#x27;&#x27;,&nbsp;0)<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;get_python_file_details(pythonfile_path)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;file_details&nbsp;is&nbsp;None&nbsp;or&nbsp;isinstance(file_details,&nbsp;tuple):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;get_python_datasets(pythonfile_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;instruct_list&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br/>&nbsp;&nbsp;&nbsp;&nbsp;save_python_data(file_details,&nbsp;instruct_list,&nbsp;relative_path,&nbsp;output_dir)</td><td>relative_path,&nbsp;file_details,&nbsp;instruct_list,&nbsp;model_config,&nbsp;base_name</td></tr><tr><td>Variables&nbsp;defined&nbsp;in&nbsp;function:&nbsp;&#x27;process_python_directories&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;process_python_directories(start_dir:&nbsp;str,&nbsp;output_dir:&nbsp;str,&nbsp;model_config_pathname:&nbsp;str,&nbsp;questions:&nbsp;Dict,&nbsp;use_llm:&nbsp;bool)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Processes&nbsp;all&nbsp;Python&nbsp;files&nbsp;in&nbsp;the&nbsp;provided&nbsp;directory&nbsp;and&nbsp;subdirectories.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;each&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;the&nbsp;LLM&nbsp;model&nbsp;to&nbsp;generate&nbsp;answers&nbsp;for&nbsp;JSON..<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;{}<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;pythonfile_path&nbsp;in&nbsp;Path(start_dir).rglob(&#x27;[!_]*.py&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;pythonfile_path.is_dir():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc&nbsp;=&nbsp;Process(target=process_single_file,&nbsp;args=(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.start()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.join()<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;combine_json_files(output_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets</td><td>proc,&nbsp;datasets</td></tr><tr><td>Variables&nbsp;defined&nbsp;in&nbsp;function:&nbsp;&#x27;py2dataset&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;py2dataset(start_dir:&nbsp;str=&#x27;&#x27;,&nbsp;output_dir:&nbsp;str=&#x27;&#x27;,&nbsp;questions_pathname:&nbsp;str=&#x27;&#x27;,&nbsp;model_config_pathname:&nbsp;str=&#x27;&#x27;,&nbsp;use_llm:&nbsp;bool=False,&nbsp;quiet:&nbsp;bool=False)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;Python&nbsp;files&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool,&nbsp;optional):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;quiet:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.WARNING)<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.INFO)<br/>&nbsp;&nbsp;&nbsp;&nbsp;sys.setrecursionlimit(3000)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;start_dir&nbsp;==&nbsp;&#x27;&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(&#x27;No&nbsp;valid&nbsp;start&nbsp;path&nbsp;provided.&nbsp;Using&nbsp;current&nbsp;working&nbsp;directory.&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.getcwd()<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.path.abspath(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;get_output_dir(output_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;=&nbsp;get_questions(questions_pathname)<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;process_python_directories(start_dir,&nbsp;output_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets</td><td>output_dir,&nbsp;questions,&nbsp;start_dir,&nbsp;datasets</td></tr><tr><td>Variables&nbsp;defined&nbsp;in&nbsp;function:&nbsp;&#x27;main&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;main():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Command-line&nbsp;entry&nbsp;point&nbsp;for&nbsp;processing&nbsp;Python&nbsp;files&nbsp;and&nbsp;generating&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;&#x27;datasets&#x27;&nbsp;directory&nbsp;in&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--use_llm&nbsp;(bool,&nbsp;optional):&nbsp;Use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;If&nbsp;provided,&nbsp;only&nbsp;warnings&nbsp;and&nbsp;errors&nbsp;will&nbsp;be&nbsp;logged.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--_context&nbsp;(bool,&nbsp;optional):&nbsp;add&nbsp;the&nbsp;context&nbsp;from&nbsp;the&nbsp;AST&nbsp;to&nbsp;the&nbsp;code&nbsp;as&nbsp;context&nbsp;use_llm&nbsp;is&nbsp;true&nbsp;to&nbsp;get&nbsp;better&nbsp;responses,&nbsp;at&nbsp;the&nbsp;expense&nbsp;of&nbsp;more&nbsp;memory&nbsp;usage.&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;&#x27;&nbsp;&#x27;.join(sys.argv[1:])<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--start_dir&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;arg_string.split(&#x27;--start_dir&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--start_dir&nbsp;{start_dir}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--output_dir&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;arg_string.split(&#x27;--output_dir&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--output_dir&nbsp;{output_dir}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--model_config_pathname&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;=&nbsp;arg_string.split(&#x27;--model_config_pathname&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--model_config_pathname&nbsp;{model_config_pathname}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--questions_pathname&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;=&nbsp;arg_string.split(&#x27;--questions_pathname&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--questions_pathname&nbsp;{questions_pathname}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--use_llm&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&#x27;--use_llm&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--quiet&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&#x27;--quiet&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;py2dataset(start_dir,&nbsp;output_dir,&nbsp;questions_pathname,&nbsp;model_config_pathname,&nbsp;use_llm,&nbsp;quiet)</td><td>quiet,&nbsp;start_dir,&nbsp;output_dir,&nbsp;model_config_pathname,&nbsp;use_llm,&nbsp;questions_pathname,&nbsp;arg_string</td></tr><tr><td>Returned&nbsp;items&nbsp;from&nbsp;function:&nbsp;&#x27;process_python_directories&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;process_python_directories(start_dir:&nbsp;str,&nbsp;output_dir:&nbsp;str,&nbsp;model_config_pathname:&nbsp;str,&nbsp;questions:&nbsp;Dict,&nbsp;use_llm:&nbsp;bool)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Processes&nbsp;all&nbsp;Python&nbsp;files&nbsp;in&nbsp;the&nbsp;provided&nbsp;directory&nbsp;and&nbsp;subdirectories.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;each&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;the&nbsp;LLM&nbsp;model&nbsp;to&nbsp;generate&nbsp;answers&nbsp;for&nbsp;JSON..<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;{}<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;pythonfile_path&nbsp;in&nbsp;Path(start_dir).rglob(&#x27;[!_]*.py&#x27;):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;pythonfile_path.is_dir():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc&nbsp;=&nbsp;Process(target=process_single_file,&nbsp;args=(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.start()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.join()<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;combine_json_files(output_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets</td><td>datasets</td></tr><tr><td>Returned&nbsp;items&nbsp;from&nbsp;function:&nbsp;&#x27;py2dataset&#x27;&nbsp;in&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;?</td><td>def&nbsp;py2dataset(start_dir:&nbsp;str=&#x27;&#x27;,&nbsp;output_dir:&nbsp;str=&#x27;&#x27;,&nbsp;questions_pathname:&nbsp;str=&#x27;&#x27;,&nbsp;model_config_pathname:&nbsp;str=&#x27;&#x27;,&nbsp;use_llm:&nbsp;bool=False,&nbsp;quiet:&nbsp;bool=False)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;Python&nbsp;files&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool,&nbsp;optional):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;quiet:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.WARNING)<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.INFO)<br/>&nbsp;&nbsp;&nbsp;&nbsp;sys.setrecursionlimit(3000)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;start_dir&nbsp;==&nbsp;&#x27;&#x27;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(&#x27;No&nbsp;valid&nbsp;start&nbsp;path&nbsp;provided.&nbsp;Using&nbsp;current&nbsp;working&nbsp;directory.&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.getcwd()<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.path.abspath(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;get_output_dir(output_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;=&nbsp;get_questions(questions_pathname)<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;process_python_directories(start_dir,&nbsp;output_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets</td><td>datasets</td></tr><tr><td>1)&nbsp;DESCRIBE&nbsp;the&nbsp;purpose&nbsp;and&nbsp;processing&nbsp;summary&nbsp;of&nbsp;Python&nbsp;file:&nbsp;&#x27;py2dataset.py2dataset.py&#x27;;&nbsp;2)&nbsp;PROVIDE&nbsp;an&nbsp;itemized&nbsp;and&nbsp;detailed&nbsp;description&nbsp;of&nbsp;each&nbsp;applicable&nbsp;function,&nbsp;class,&nbsp;and&nbsp;method;&nbsp;3)&nbsp;EXPLAIN&nbsp;what&nbsp;each&nbsp;input,&nbsp;output,&nbsp;and&nbsp;variable&nbsp;does&nbsp;in&nbsp;the&nbsp;code.</td><td>&quot;&quot;&quot;<br/>For&nbsp;each&nbsp;Python&nbsp;file&nbsp;within&nbsp;given&nbsp;directory,&nbsp;generate,&nbsp;save,&nbsp;and&nbsp;return&nbsp;datasets&nbsp;that&nbsp;include&nbsp;responses&nbsp;to&nbsp;questions&nbsp;about&nbsp;the&nbsp;code.<br/>Requirements:<br/>[req00]&nbsp;The&nbsp;process_single_file&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;parameters&nbsp;for&nbsp;the&nbsp;Python&nbsp;file&nbsp;path,&nbsp;starting&nbsp;directory,&nbsp;model&nbsp;configuration&nbsp;pathname,&nbsp;questions&nbsp;dictionary,&nbsp;use&nbsp;of&nbsp;LLM,&nbsp;and&nbsp;output&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;If&nbsp;the&nbsp;use_llm&nbsp;parameter&nbsp;is&nbsp;True,&nbsp;use&nbsp;the&nbsp;&#x27;get_model&#x27;&nbsp;function&nbsp;to&nbsp;instantiate&nbsp;the&nbsp;model&nbsp;configuration&nbsp;for&nbsp;the&nbsp;LLM.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Use&nbsp;the&nbsp;&#x27;get_python_file_details&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;Python&nbsp;file&nbsp;details.<br/>&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Use&nbsp;the&nbsp;&#x27;get_python_datasets&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;instruct.json&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Use&nbsp;the&nbsp;&#x27;save_python_data&#x27;&nbsp;function&nbsp;to&nbsp;save&nbsp;the&nbsp;file&nbsp;details&nbsp;and&nbsp;instruct.json&nbsp;dataset.<br/><br/>[req01]&nbsp;The&nbsp;process_python_directories&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;parameters&nbsp;for&nbsp;the&nbsp;starting&nbsp;directory,&nbsp;output&nbsp;directory,&nbsp;model&nbsp;configuration&nbsp;pathname,&nbsp;questions&nbsp;dictionary,&nbsp;and&nbsp;use&nbsp;of&nbsp;LLM.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Search&nbsp;for&nbsp;all&nbsp;Python&nbsp;files&nbsp;within&nbsp;the&nbsp;given&nbsp;directory&nbsp;and&nbsp;its&nbsp;subdirectories&nbsp;using&nbsp;the&nbsp;rglob&nbsp;method&nbsp;with&nbsp;a&nbsp;pattern&nbsp;that&nbsp;excludes&nbsp;files&nbsp;starting&nbsp;with&nbsp;&quot;_&quot;.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;For&nbsp;each&nbsp;valid&nbsp;Python&nbsp;file,&nbsp;spawn&nbsp;a&nbsp;new&nbsp;child&nbsp;process&nbsp;using&nbsp;&#x27;process_single_file&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;file&nbsp;details&nbsp;and&nbsp;instruct.json&nbsp;dataset.<br/>&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;After&nbsp;processing&nbsp;all&nbsp;files,&nbsp;combine&nbsp;all&nbsp;of&nbsp;the&nbsp;instruct.json&nbsp;files&nbsp;together&nbsp;using&nbsp;the&nbsp;&#x27;combine_json_files&#x27;&nbsp;function.<br/>&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Return&nbsp;the&nbsp;combined&nbsp;datasets.<br/><br/>[req02]&nbsp;The&nbsp;py2dataset&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;parameters&nbsp;for&nbsp;the&nbsp;starting&nbsp;directory,&nbsp;output&nbsp;directory,&nbsp;questions&nbsp;pathname,&nbsp;model&nbsp;configuration&nbsp;pathname,&nbsp;use&nbsp;of&nbsp;LLM,&nbsp;and&nbsp;quiet&nbsp;mode.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Adjust&nbsp;the&nbsp;logging&nbsp;level&nbsp;based&nbsp;on&nbsp;the&nbsp;quiet&nbsp;flag.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;If&nbsp;no&nbsp;valid&nbsp;starting&nbsp;directory&nbsp;is&nbsp;provided,&nbsp;use&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Use&nbsp;the&nbsp;&#x27;get_output_dir&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;output&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Use&nbsp;the&nbsp;&#x27;get_questions&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;questions&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;f.&nbsp;Call&nbsp;the&nbsp;process_python_directories&nbsp;function&nbsp;to&nbsp;process&nbsp;the&nbsp;Python&nbsp;files&nbsp;and&nbsp;generate&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;g.&nbsp;Return&nbsp;the&nbsp;datasets.<br/><br/>[req03]&nbsp;The&nbsp;main&nbsp;function&nbsp;shall:<br/>&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;and&nbsp;process&nbsp;command-line&nbsp;arguments.<br/>&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Determine&nbsp;the&nbsp;parameters&nbsp;for&nbsp;the&nbsp;py2dataset&nbsp;function&nbsp;based&nbsp;on&nbsp;the&nbsp;processed&nbsp;command-line&nbsp;arguments.<br/>&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Call&nbsp;the&nbsp;py2dataset&nbsp;function&nbsp;with&nbsp;the&nbsp;derived&nbsp;parameters.<br/>&quot;&quot;&quot;<br/>import&nbsp;os<br/>import&nbsp;sys<br/>import&nbsp;gc<br/>import&nbsp;logging<br/>from&nbsp;pathlib&nbsp;import&nbsp;Path<br/>from&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List,&nbsp;Tuple,&nbsp;Union<br/>from&nbsp;multiprocessing&nbsp;import&nbsp;Process<br/><br/>from&nbsp;get_python_file_details&nbsp;import&nbsp;get_python_file_details<br/>from&nbsp;get_python_datasets&nbsp;import&nbsp;get_python_datasets<br/>from&nbsp;get_py2dataset_params&nbsp;import&nbsp;get_questions,&nbsp;get_model,&nbsp;get_output_dir<br/>from&nbsp;save_py2dataset_output&nbsp;import&nbsp;combine_json_files,&nbsp;save_python_data<br/><br/><br/>def&nbsp;process_single_file(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;a&nbsp;single&nbsp;Python&nbsp;file&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pythonfile_path&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;the&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&#x27;Processing:&nbsp;{pythonfile_path}&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;relative_path&nbsp;=&nbsp;pythonfile_path.relative_to(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;=&nbsp;&#x27;.&#x27;.join(part&nbsp;for&nbsp;part&nbsp;in&nbsp;relative_path.parts)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#instantiate&nbsp;llm&nbsp;and&nbsp;prompt&nbsp;if&nbsp;use_llm&nbsp;is&nbsp;True&nbsp;for&nbsp;each&nbsp;file&nbsp;to&nbsp;aviod&nbsp;multiprocessing&nbsp;pickling&nbsp;problem<br/>&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;=&nbsp;get_model(model_config_pathname)&nbsp;if&nbsp;use_llm&nbsp;else&nbsp;(None,&nbsp;&#x27;&#x27;,&nbsp;0)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;use&nbsp;AST&nbsp;to&nbsp;get&nbsp;python&nbsp;file&nbsp;details<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;None&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;get_python_file_details(pythonfile_path)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;file_details&nbsp;is&nbsp;None&nbsp;or&nbsp;isinstance(file_details,&nbsp;tuple):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;get&nbsp;lists&nbsp;for&nbsp;instruct.json&nbsp;for&nbsp;python&nbsp;file<br/>&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;=&nbsp;get_python_datasets(pythonfile_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;instruct_list&nbsp;is&nbsp;None:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;save_python_data(file_details,&nbsp;instruct_list,&nbsp;relative_path,&nbsp;output_dir)<br/><br/>def&nbsp;process_python_directories(start_dir:&nbsp;str,&nbsp;output_dir:&nbsp;str,&nbsp;model_config_pathname:&nbsp;str,&nbsp;questions:&nbsp;Dict,&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm:&nbsp;bool)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Processes&nbsp;all&nbsp;Python&nbsp;files&nbsp;in&nbsp;the&nbsp;provided&nbsp;directory&nbsp;and&nbsp;subdirectories.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Questions&nbsp;dictionary&nbsp;to&nbsp;answer&nbsp;about&nbsp;each&nbsp;Python&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;If&nbsp;True,&nbsp;use&nbsp;the&nbsp;LLM&nbsp;model&nbsp;to&nbsp;generate&nbsp;answers&nbsp;for&nbsp;JSON..<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;{}<br/>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;pythonfile_path&nbsp;in&nbsp;Path(start_dir).rglob(&#x27;[!_]*.py&#x27;):<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;pythonfile_path.is_dir():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;spawn&nbsp;a&nbsp;new&nbsp;child&nbsp;process&nbsp;to&nbsp;manage&nbsp;python&nbsp;memory&nbsp;leaks<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc&nbsp;=&nbsp;Process(target=process_single_file,&nbsp;args=(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.start()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.join()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;combine&nbsp;all&nbsp;of&nbsp;the&nbsp;instruct.json&nbsp;files&nbsp;together<br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;combine_json_files(output_dir)&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets<br/><br/><br/>def&nbsp;py2dataset(start_dir:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;output_dir:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;questions_pathname:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;model_config_pathname:&nbsp;str&nbsp;=&nbsp;&#x27;&#x27;,&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm:&nbsp;bool&nbsp;=&nbsp;False,&nbsp;quiet:&nbsp;bool&nbsp;=&nbsp;False)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;Python&nbsp;files&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool,&nbsp;optional):&nbsp;If&nbsp;True,&nbsp;use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Datasets&nbsp;dictionary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;quiet:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.WARNING)<br/>&nbsp;&nbsp;&nbsp;&nbsp;else:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.INFO)<br/>&nbsp;&nbsp;&nbsp;&nbsp;sys.setrecursionlimit(3000)&nbsp;&nbsp;#&nbsp;Increase&nbsp;the&nbsp;recursion&nbsp;limit&nbsp;for&nbsp;AST<br/>&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;if&nbsp;start&nbsp;dir&nbsp;is&nbsp;empty&nbsp;or&nbsp;not&nbsp;a&nbsp;valid&nbsp;directory,&nbsp;use&nbsp;current&nbsp;working&nbsp;directory<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;start_dir&nbsp;==&nbsp;&#x27;&#x27;&nbsp;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(&#x27;No&nbsp;valid&nbsp;start&nbsp;path&nbsp;provided.&nbsp;Using&nbsp;current&nbsp;working&nbsp;directory.&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.getcwd()&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.path.abspath(start_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;get_output_dir(output_dir)<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;=&nbsp;get_questions(questions_pathname)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;datasets&nbsp;=&nbsp;process_python_directories(start_dir,&nbsp;output_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm)<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;datasets<br/><br/><br/>def&nbsp;main():<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Command-line&nbsp;entry&nbsp;point&nbsp;for&nbsp;processing&nbsp;Python&nbsp;files&nbsp;and&nbsp;generating&nbsp;datasets.<br/>&nbsp;&nbsp;&nbsp;&nbsp;Args:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--start_dir&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;&#x27;datasets&#x27;&nbsp;directory&nbsp;in&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--use_llm&nbsp;(bool,&nbsp;optional):&nbsp;Use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;If&nbsp;provided,&nbsp;only&nbsp;warnings&nbsp;and&nbsp;errors&nbsp;will&nbsp;be&nbsp;logged.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--_context&nbsp;(bool,&nbsp;optional):&nbsp;add&nbsp;the&nbsp;context&nbsp;from&nbsp;the&nbsp;AST&nbsp;to&nbsp;the&nbsp;code&nbsp;as&nbsp;context&nbsp;use_llm&nbsp;is&nbsp;true&nbsp;to&nbsp;get&nbsp;better&nbsp;responses,&nbsp;at&nbsp;the&nbsp;expense&nbsp;of&nbsp;more&nbsp;memory&nbsp;usage.&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;&#x27;&nbsp;&#x27;.join(sys.argv[1:])<br/>&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;=&nbsp;&#x27;&#x27;<br/>&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;=&nbsp;False<br/>&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;=&nbsp;False<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--start_dir&#x27;&nbsp;in&nbsp;arg_string:&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;arg_string.split(&#x27;--start_dir&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--start_dir&nbsp;{start_dir}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--output_dir&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;arg_string.split(&#x27;--output_dir&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--output_dir&nbsp;{output_dir}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--model_config_pathname&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;=&nbsp;arg_string.split(&#x27;--model_config_pathname&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--model_config_pathname&nbsp;{model_config_pathname}&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--questions_pathname&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;=&nbsp;arg_string.split(&#x27;--questions_pathname&nbsp;&#x27;)[1].split(&#x27;&nbsp;&#x27;)[0]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(f&#x27;--questions_pathname&nbsp;{questions_pathname}&#x27;,&nbsp;&#x27;&#x27;)&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--use_llm&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&#x27;--use_llm&#x27;,&nbsp;&#x27;&#x27;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&#x27;--quiet&#x27;&nbsp;in&nbsp;arg_string:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;=&nbsp;True<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&#x27;--quiet&#x27;,&nbsp;&#x27;&#x27;)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;py2dataset(start_dir,&nbsp;output_dir,&nbsp;questions_pathname,&nbsp;model_config_pathname,&nbsp;use_llm,&nbsp;quiet)<br/><br/>if&nbsp;__name__&nbsp;==&nbsp;&quot;__main__&quot;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;main()</td><td>The&nbsp;&#x27;py2dataset&#x27;&nbsp;file&nbsp;contains&nbsp;the&nbsp;`py2dataset`&nbsp;function&nbsp;which&nbsp;processes&nbsp;Python&nbsp;files&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions,&nbsp;using&nbsp;an&nbsp;AST&nbsp;(abstract&nbsp;syntax&nbsp;tree).&nbsp;It&nbsp;accepts&nbsp;a&nbsp;set&nbsp;of&nbsp;command-line&nbsp;arguments&nbsp;and&nbsp;provides&nbsp;control&nbsp;over&nbsp;various&nbsp;aspects&nbsp;such&nbsp;as&nbsp;starting&nbsp;directory,&nbsp;output&nbsp;directory,&nbsp;model&nbsp;configuration&nbsp;pathname,&nbsp;questions&nbsp;dictionary,&nbsp;use&nbsp;of&nbsp;LLM,&nbsp;and&nbsp;quiet&nbsp;mode.&nbsp;The&nbsp;&#x27;py2dataset&#x27;&nbsp;function&nbsp;uses&nbsp;the&nbsp;`process_single_file`&nbsp;function&nbsp;to&nbsp;process&nbsp;individual&nbsp;Python&nbsp;files,&nbsp;and&nbsp;the&nbsp;`process_python_directories`&nbsp;function&nbsp;to&nbsp;search&nbsp;for&nbsp;all&nbsp;Python&nbsp;files&nbsp;within&nbsp;a&nbsp;given&nbsp;directory&nbsp;and&nbsp;its&nbsp;subdirectories&nbsp;using&nbsp;the&nbsp;`rglob`&nbsp;method&nbsp;with&nbsp;a&nbsp;pattern&nbsp;that&nbsp;excludes&nbsp;files&nbsp;starting&nbsp;with&nbsp;&quot;_&quot;.&nbsp;The&nbsp;`save_py2dataset_output`&nbsp;module&nbsp;is&nbsp;used&nbsp;to&nbsp;combine&nbsp;the&nbsp;datasets&nbsp;generated&nbsp;from&nbsp;each&nbsp;file&nbsp;into&nbsp;one&nbsp;JSON&nbsp;file.&nbsp;<br/><br/>###&nbsp;Function:&nbsp;process_single_file(pythonfile_path,&nbsp;start_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;output_dir)&nbsp;<br/>*&nbsp;purpose:&nbsp;To&nbsp;get&nbsp;a&nbsp;list&nbsp;of&nbsp;python&nbsp;file&nbsp;details&nbsp;and&nbsp;dataset&nbsp;questions&nbsp;from&nbsp;individual&nbsp;files&nbsp;found&nbsp;by&nbsp;&#x27;get_python_file_details&#x27;&nbsp;and&nbsp;&#x27;get_python_datasets&#x27;&nbsp;functions.&nbsp;<br/>*&nbsp;input:&nbsp;`pythonfile_path`&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file,&nbsp;`start_dir`&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files,&nbsp;`model_config_pathname`&nbsp;(str)&nbsp;path&nbsp;to&nbsp;model&nbsp;configuration&nbsp;file,&nbsp;`questions`&nbsp;(Dict)&nbsp;list&nbsp;of&nbsp;questions,&nbsp;`use_llm`&nbsp;(bool):&nbsp;if&nbsp;True,&nbsp;use&nbsp;LLM&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers,&nbsp;and&nbsp;`output_dir`&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.&nbsp;<br/>*&nbsp;output:&nbsp;none&nbsp;<br/>*&nbsp;variables:&nbsp;`relative_path`:&nbsp;relative&nbsp;path&nbsp;of&nbsp;python&nbsp;file,&nbsp;`file_details`:&nbsp;details&nbsp;about&nbsp;the&nbsp;Python&nbsp;file,&nbsp;`instruct_list`:&nbsp;list&nbsp;of&nbsp;questions&nbsp;and&nbsp;their&nbsp;corresponding&nbsp;answers&nbsp;generated&nbsp;from&nbsp;&#x27;get_python_datasets&#x27;&nbsp;function.<br/>*&nbsp;calls&nbsp;made:&nbsp;&#x27;get_model&#x27;&nbsp;function&nbsp;to&nbsp;instantiate&nbsp;the&nbsp;model&nbsp;configuration&nbsp;for&nbsp;LLM&nbsp;if&nbsp;`use_llm`&nbsp;is&nbsp;True,&nbsp;`get_python_file_details`&nbsp;function&nbsp;to&nbsp;get&nbsp;file&nbsp;details,&nbsp;`get_python_datasets`&nbsp;function&nbsp;to&nbsp;generate&nbsp;dataset&nbsp;questions&nbsp;and&nbsp;answers,&nbsp;and&nbsp;`save_python_data`&nbsp;function&nbsp;to&nbsp;write&nbsp;data&nbsp;in&nbsp;a&nbsp;specific&nbsp;format.<br/><br/>###&nbsp;Function:&nbsp;process_python_directories(start_dir,&nbsp;output_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm)&nbsp;<br/>*&nbsp;purpose:&nbsp;To&nbsp;search&nbsp;for&nbsp;all&nbsp;Python&nbsp;files&nbsp;within&nbsp;the&nbsp;given&nbsp;directory&nbsp;and&nbsp;its&nbsp;subdirectories&nbsp;using&nbsp;`rglob`&nbsp;method&nbsp;with&nbsp;a&nbsp;pattern&nbsp;that&nbsp;excludes&nbsp;files&nbsp;starting&nbsp;with&nbsp;&quot;_&quot;&nbsp;and&nbsp;process&nbsp;them.&nbsp;<br/>*&nbsp;input:&nbsp;`start_dir`:&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files,&nbsp;`output_dir`:&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files,&nbsp;`model_config_pathname`:&nbsp;Path&nbsp;to&nbsp;model&nbsp;configuration&nbsp;file,&nbsp;`questions`:&nbsp;list&nbsp;of&nbsp;questions,&nbsp;and&nbsp;`use_llm`&nbsp;(bool):&nbsp;if&nbsp;True,&nbsp;use&nbsp;LLM&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.<br/>*&nbsp;output:&nbsp;dictionary&nbsp;of&nbsp;combined&nbsp;datasets&nbsp;generated&nbsp;from&nbsp;all&nbsp;processed&nbsp;Python&nbsp;files&nbsp;<br/>*&nbsp;variables:&nbsp;`proc`,&nbsp;`datasets`.&nbsp;<br/>*&nbsp;calls&nbsp;made:&nbsp;`Process`&nbsp;class&nbsp;to&nbsp;manage&nbsp;python&nbsp;memory&nbsp;leaks&nbsp;in&nbsp;a&nbsp;child&nbsp;process,&nbsp;and&nbsp;&#x27;get_python_file_details&#x27;&nbsp;function&nbsp;to&nbsp;get&nbsp;file&nbsp;details&nbsp;for&nbsp;each&nbsp;individual&nbsp;file.&nbsp;Then,&nbsp;it&nbsp;spawns&nbsp;a&nbsp;new&nbsp;child&nbsp;process&nbsp;using&nbsp;the&nbsp;`process_single_file`&nbsp;function&nbsp;to&nbsp;generate&nbsp;datasets&nbsp;for&nbsp;each&nbsp;valid&nbsp;Python&nbsp;file&nbsp;found.&nbsp;<br/>*&nbsp;After&nbsp;processing&nbsp;all&nbsp;files,&nbsp;it&nbsp;calls&nbsp;the&nbsp;`combine_json_files`&nbsp;function&nbsp;from&nbsp;the&nbsp;`save_py2dataset_output`&nbsp;module&nbsp;to&nbsp;combine&nbsp;the&nbsp;instructions&nbsp;for&nbsp;each&nbsp;Python&nbsp;file&nbsp;into&nbsp;a&nbsp;single&nbsp;JSON&nbsp;output.&nbsp;The&nbsp;combined&nbsp;dataset&nbsp;is&nbsp;returned&nbsp;as&nbsp;the&nbsp;final&nbsp;output.&nbsp;<br/><br/>###&nbsp;Function:&nbsp;py2dataset(start_dir=&#x27;&#x27;,&nbsp;output_dir=&#x27;&#x27;,&nbsp;questions_pathname=&#x27;&#x27;,&nbsp;model_config_pathname=&#x27;&#x27;,&nbsp;use_llm=False,&nbsp;quiet=False)&nbsp;<br/>*&nbsp;purpose:&nbsp;To&nbsp;process&nbsp;Python&nbsp;files&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.&nbsp;<br/>*&nbsp;input:&nbsp;`start_dir`&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files,&nbsp;`output_dir`&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files,&nbsp;`questions_pathname`&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;questions&nbsp;file,&nbsp;`model_config_pathname`&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;model&nbsp;configuration&nbsp;file,&nbsp;`use_llm`&nbsp;(bool):&nbsp;if&nbsp;True,&nbsp;use&nbsp;LLM&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers,&nbsp;and&nbsp;`quiet`&nbsp;(bool):&nbsp;limit&nbsp;logging&nbsp;output.<br/>*&nbsp;output:&nbsp;dictionary&nbsp;of&nbsp;combined&nbsp;datasets&nbsp;generated&nbsp;from&nbsp;all&nbsp;processed&nbsp;Python&nbsp;files&nbsp;<br/>*&nbsp;variables:&nbsp;`output_dir`:&nbsp;directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files,&nbsp;`questions`:&nbsp;questions&nbsp;dictionary,&nbsp;`datasets`:&nbsp;combined&nbsp;dataset&nbsp;generated&nbsp;from&nbsp;all&nbsp;processed&nbsp;Python&nbsp;files&nbsp;using&nbsp;the&nbsp;`process_python_directories`&nbsp;function.&nbsp;<br/>*&nbsp;calls&nbsp;made:&nbsp;`get_py2dataset_params`,&nbsp;&#x27;os&#x27;&nbsp;module&nbsp;to&nbsp;check&nbsp;for&nbsp;empty&nbsp;directories&nbsp;or&nbsp;path&nbsp;issues&nbsp;and&nbsp;get&nbsp;the&nbsp;current&nbsp;working&nbsp;directory,&nbsp;&#x27;save_py2dataset_output&#x27;,&nbsp;and&nbsp;`combine_json_files`.&nbsp;It&nbsp;adjusts&nbsp;the&nbsp;logging&nbsp;level&nbsp;based&nbsp;on&nbsp;the&nbsp;quiet&nbsp;flag&nbsp;using&nbsp;`logging.getLogger().setLevel(logging.WARNING)`&nbsp;if&nbsp;True.&nbsp;<br/>*&nbsp;main&nbsp;function&nbsp;to&nbsp;process&nbsp;command-line&nbsp;arguments&nbsp;and&nbsp;call&nbsp;the&nbsp;`process_python_directories`&nbsp;function&nbsp;with&nbsp;the&nbsp;derived&nbsp;parameters.<br/><br/>###&nbsp;Input:<br/>The&nbsp;&#x27;py2dataset&#x27;&nbsp;file&nbsp;takes&nbsp;several&nbsp;input&nbsp;arguments&nbsp;as&nbsp;follows,&nbsp;along&nbsp;with&nbsp;two&nbsp;boolean&nbsp;values--&#x27;quiet&#x27;,&nbsp;&#x27;use_llm&#x27;&nbsp;modes&nbsp;to&nbsp;limit&nbsp;output/handle&nbsp;LLVM&nbsp;or&nbsp;exclude&nbsp;questions&nbsp;generated&nbsp;based&nbsp;on&nbsp;keywords&nbsp;mentioned&nbsp;in&nbsp;configuration&nbsp;JSON&nbsp;files:&nbsp;<br/>*&nbsp;`--start_dir`:&nbsp;Starting&nbsp;directory&nbsp;to&nbsp;search&nbsp;for&nbsp;Python&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;if&nbsp;not&nbsp;provided.<br/>*&nbsp;`--output_dir`:&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.&nbsp;Defaults&nbsp;to&nbsp;the&nbsp;&#x27;datasets&#x27;&nbsp;directory&nbsp;in&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;if&nbsp;not&nbsp;provided.<br/>*&nbsp;`--questions_pathname`:&nbsp;Path&nbsp;to&nbsp;the&nbsp;questions&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>*&nbsp;`--model_config_pathname`:&nbsp;Path&nbsp;to&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.&nbsp;If&nbsp;not&nbsp;provided,&nbsp;defaults&nbsp;defined&nbsp;in&nbsp;&#x27;get_py2dataset_params.py&#x27;&nbsp;will&nbsp;be&nbsp;used.<br/>*&nbsp;`--use_llm`:&nbsp;Use&nbsp;a&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;for&nbsp;generating&nbsp;JSON&nbsp;answers.&nbsp;Defaults&nbsp;to&nbsp;False.&nbsp;<br/>*&nbsp;`--quiet`:&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;If&nbsp;provided,&nbsp;only&nbsp;warnings&nbsp;and&nbsp;errors&nbsp;will&nbsp;be&nbsp;logged.&nbsp;Defaults&nbsp;to&nbsp;False.<br/>###&nbsp;Output:&nbsp;<br/>The&nbsp;final&nbsp;dataset&nbsp;is&nbsp;returned&nbsp;as&nbsp;the&nbsp;dictionary&nbsp;of&nbsp;questions&nbsp;with&nbsp;their&nbsp;corresponding&nbsp;answers&nbsp;generated&nbsp;from&nbsp;each&nbsp;Python&nbsp;file&nbsp;in&nbsp;the&nbsp;given&nbsp;directory&nbsp;and&nbsp;its&nbsp;subdirectories.&nbsp;The&nbsp;JSON&nbsp;format&nbsp;for&nbsp;each&nbsp;dataset&nbsp;is&nbsp;as&nbsp;follows:<br/>```json<br/>{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;filename&quot;:&nbsp;&quot;path/to/file&quot;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;function_name&quot;:&nbsp;&quot;function_name&quot;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;question_id&quot;:&nbsp;0,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;question&quot;:&nbsp;&quot;What&nbsp;does&nbsp;this&nbsp;function&nbsp;do?&quot;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;answer&quot;:&nbsp;&quot;This&nbsp;function&nbsp;takes&nbsp;in&nbsp;a&nbsp;list&nbsp;of&nbsp;integers&nbsp;and&nbsp;returns&nbsp;the&nbsp;sum&nbsp;of&nbsp;all&nbsp;odd&nbsp;numbers&nbsp;in&nbsp;the&nbsp;list.&quot;<br/>}<br/>```</td></tr>
                </tbody>
            </table>
        </body>
        </html>
        